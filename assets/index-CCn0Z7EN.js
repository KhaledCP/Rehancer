(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const m of l)if(m.type==="childList")for(const S of m.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&s(S)}).observe(document,{childList:!0,subtree:!0});function r(l){const m={};return l.integrity&&(m.integrity=l.integrity),l.referrerPolicy&&(m.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?m.credentials="include":l.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(l){if(l.ep)return;l.ep=!0;const m=r(l);fetch(l.href,m)}})();function getAugmentedNamespace(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var a=o.default;if(typeof a=="function"){var r=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};r.prototype=a.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(s){var l=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return o[s]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(s,l,m){var S=null;if(m!==void 0&&(S=""+m),l.key!==void 0&&(S=""+l.key),"key"in l){m={};for(var w in l)w!=="key"&&(m[w]=l[w])}else m=l;return l=m.ref,{$$typeof:o,type:s,key:S,ref:l!==void 0?l:null,props:m}}return reactJsxRuntime_production.Fragment=a,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),S=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function A(g){return g===null||typeof g!="object"?null:(g=d&&g[d]||g["@@iterator"],typeof g=="function"?g:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,b={};function E(g,T,I){this.props=g,this.context=T,this.refs=b,this.updater=I||_}E.prototype.isReactComponent={},E.prototype.setState=function(g,T){if(typeof g!="object"&&typeof g!="function"&&g!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,T,"setState")},E.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")};function y(){}y.prototype=E.prototype;function P(g,T,I){this.props=g,this.context=T,this.refs=b,this.updater=I||_}var B=P.prototype=new y;B.constructor=P,p(B,E.prototype),B.isPureReactComponent=!0;var U=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function $(g,T,I,N,G,j){return I=j.ref,{$$typeof:o,type:g,key:T,ref:I!==void 0?I:null,props:j}}function Y(g,T){return $(g.type,T,void 0,void 0,void 0,g.props)}function X(g){return typeof g=="object"&&g!==null&&g.$$typeof===o}function J(g){var T={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,function(I){return T[I]})}var tt=/\/+/g;function _t(g,T){return typeof g=="object"&&g!==null&&g.key!=null?J(""+g.key):T.toString(36)}function mt(){}function yt(g){switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:switch(typeof g.status=="string"?g.then(mt,mt):(g.status="pending",g.then(function(T){g.status==="pending"&&(g.status="fulfilled",g.value=T)},function(T){g.status==="pending"&&(g.status="rejected",g.reason=T)})),g.status){case"fulfilled":return g.value;case"rejected":throw g.reason}}throw g}function At(g,T,I,N,G){var j=typeof g;(j==="undefined"||j==="boolean")&&(g=null);var v=!1;if(g===null)v=!0;else switch(j){case"bigint":case"string":case"number":v=!0;break;case"object":switch(g.$$typeof){case o:case a:v=!0;break;case u:return v=g._init,At(v(g._payload),T,I,N,G)}}if(v)return G=G(g),v=N===""?"."+_t(g,0):N,U(G)?(I="",v!=null&&(I=v.replace(tt,"$&/")+"/"),At(G,T,I,"",function(z){return z})):G!=null&&(X(G)&&(G=Y(G,I+(G.key==null||g&&g.key===G.key?"":(""+G.key).replace(tt,"$&/")+"/")+v)),T.push(G)),1;v=0;var D=N===""?".":N+":";if(U(g))for(var F=0;F<g.length;F++)N=g[F],j=D+_t(N,F),v+=At(N,T,I,j,G);else if(F=A(g),typeof F=="function")for(g=F.call(g),F=0;!(N=g.next()).done;)N=N.value,j=D+_t(N,F++),v+=At(N,T,I,j,G);else if(j==="object"){if(typeof g.then=="function")return At(yt(g),T,I,N,G);throw T=String(g),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return v}function V(g,T,I){if(g==null)return g;var N=[],G=0;return At(g,N,"","",function(j){return T.call(I,j,G++)}),N}function H(g){if(g._status===-1){var T=g._result;T=T(),T.then(function(I){(g._status===0||g._status===-1)&&(g._status=1,g._result=I)},function(I){(g._status===0||g._status===-1)&&(g._status=2,g._result=I)}),g._status===-1&&(g._status=0,g._result=T)}if(g._status===1)return g._result.default;throw g._result}var O=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function x(){}return react_production.Children={map:V,forEach:function(g,T,I){V(g,function(){T.apply(this,arguments)},I)},count:function(g){var T=0;return V(g,function(){T++}),T},toArray:function(g){return V(g,function(T){return T})||[]},only:function(g){if(!X(g))throw Error("React.Children.only expected to receive a single React element child.");return g}},react_production.Component=E,react_production.Fragment=r,react_production.Profiler=l,react_production.PureComponent=P,react_production.StrictMode=s,react_production.Suspense=R,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(g){return C.H.useMemoCache(g)}},react_production.cache=function(g){return function(){return g.apply(null,arguments)}},react_production.cloneElement=function(g,T,I){if(g==null)throw Error("The argument must be a React element, but you passed "+g+".");var N=p({},g.props),G=g.key,j=void 0;if(T!=null)for(v in T.ref!==void 0&&(j=void 0),T.key!==void 0&&(G=""+T.key),T)!k.call(T,v)||v==="key"||v==="__self"||v==="__source"||v==="ref"&&T.ref===void 0||(N[v]=T[v]);var v=arguments.length-2;if(v===1)N.children=I;else if(1<v){for(var D=Array(v),F=0;F<v;F++)D[F]=arguments[F+2];N.children=D}return $(g.type,G,void 0,void 0,j,N)},react_production.createContext=function(g){return g={$$typeof:S,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null},g.Provider=g,g.Consumer={$$typeof:m,_context:g},g},react_production.createElement=function(g,T,I){var N,G={},j=null;if(T!=null)for(N in T.key!==void 0&&(j=""+T.key),T)k.call(T,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(G[N]=T[N]);var v=arguments.length-2;if(v===1)G.children=I;else if(1<v){for(var D=Array(v),F=0;F<v;F++)D[F]=arguments[F+2];G.children=D}if(g&&g.defaultProps)for(N in v=g.defaultProps,v)G[N]===void 0&&(G[N]=v[N]);return $(g,j,void 0,void 0,null,G)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(g){return{$$typeof:w,render:g}},react_production.isValidElement=X,react_production.lazy=function(g){return{$$typeof:u,_payload:{_status:-1,_result:g},_init:H}},react_production.memo=function(g,T){return{$$typeof:h,type:g,compare:T===void 0?null:T}},react_production.startTransition=function(g){var T=C.T,I={};C.T=I;try{var N=g(),G=C.S;G!==null&&G(I,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(x,O)}catch(j){O(j)}finally{C.T=T}},react_production.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},react_production.use=function(g){return C.H.use(g)},react_production.useActionState=function(g,T,I){return C.H.useActionState(g,T,I)},react_production.useCallback=function(g,T){return C.H.useCallback(g,T)},react_production.useContext=function(g){return C.H.useContext(g)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(g,T){return C.H.useDeferredValue(g,T)},react_production.useEffect=function(g,T,I){var N=C.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return N.useEffect(g,T)},react_production.useId=function(){return C.H.useId()},react_production.useImperativeHandle=function(g,T,I){return C.H.useImperativeHandle(g,T,I)},react_production.useInsertionEffect=function(g,T){return C.H.useInsertionEffect(g,T)},react_production.useLayoutEffect=function(g,T){return C.H.useLayoutEffect(g,T)},react_production.useMemo=function(g,T){return C.H.useMemo(g,T)},react_production.useOptimistic=function(g,T){return C.H.useOptimistic(g,T)},react_production.useReducer=function(g,T,I){return C.H.useReducer(g,T,I)},react_production.useRef=function(g){return C.H.useRef(g)},react_production.useState=function(g){return C.H.useState(g)},react_production.useSyncExternalStore=function(g,T,I){return C.H.useSyncExternalStore(g,T,I)},react_production.useTransition=function(){return C.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact(),client$1={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(o){function a(V,H){var O=V.length;V.push(H);t:for(;0<O;){var x=O-1>>>1,g=V[x];if(0<l(g,H))V[x]=H,V[O]=g,O=x;else break t}}function r(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var H=V[0],O=V.pop();if(O!==H){V[0]=O;t:for(var x=0,g=V.length,T=g>>>1;x<T;){var I=2*(x+1)-1,N=V[I],G=I+1,j=V[G];if(0>l(N,O))G<g&&0>l(j,N)?(V[x]=j,V[G]=O,x=G):(V[x]=N,V[I]=O,x=I);else if(G<g&&0>l(j,O))V[x]=j,V[G]=O,x=G;else break t}}return H}function l(V,H){var O=V.sortIndex-H.sortIndex;return O!==0?O:V.id-H.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;o.unstable_now=function(){return m.now()}}else{var S=Date,w=S.now();o.unstable_now=function(){return S.now()-w}}var R=[],h=[],u=1,d=null,A=3,_=!1,p=!1,b=!1,E=!1,y=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function U(V){for(var H=r(h);H!==null;){if(H.callback===null)s(h);else if(H.startTime<=V)s(h),H.sortIndex=H.expirationTime,a(R,H);else break;H=r(h)}}function C(V){if(b=!1,U(V),!p)if(r(R)!==null)p=!0,k||(k=!0,_t());else{var H=r(h);H!==null&&At(C,H.startTime-V)}}var k=!1,$=-1,Y=5,X=-1;function J(){return E?!0:!(o.unstable_now()-X<Y)}function tt(){if(E=!1,k){var V=o.unstable_now();X=V;var H=!0;try{t:{p=!1,b&&(b=!1,P($),$=-1),_=!0;var O=A;try{e:{for(U(V),d=r(R);d!==null&&!(d.expirationTime>V&&J());){var x=d.callback;if(typeof x=="function"){d.callback=null,A=d.priorityLevel;var g=x(d.expirationTime<=V);if(V=o.unstable_now(),typeof g=="function"){d.callback=g,U(V),H=!0;break e}d===r(R)&&s(R),U(V)}else s(R);d=r(R)}if(d!==null)H=!0;else{var T=r(h);T!==null&&At(C,T.startTime-V),H=!1}}break t}finally{d=null,A=O,_=!1}H=void 0}}finally{H?_t():k=!1}}}var _t;if(typeof B=="function")_t=function(){B(tt)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,yt=mt.port2;mt.port1.onmessage=tt,_t=function(){yt.postMessage(null)}}else _t=function(){y(tt,0)};function At(V,H){$=y(function(){V(o.unstable_now())},H)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(V){V.callback=null},o.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},o.unstable_getCurrentPriorityLevel=function(){return A},o.unstable_next=function(V){switch(A){case 1:case 2:case 3:var H=3;break;default:H=A}var O=A;A=H;try{return V()}finally{A=O}},o.unstable_requestPaint=function(){E=!0},o.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var O=A;A=V;try{return H()}finally{A=O}},o.unstable_scheduleCallback=function(V,H,O){var x=o.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?x+O:x):O=x,V){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return g=O+g,V={id:u++,callback:H,priorityLevel:V,startTime:O,expirationTime:g,sortIndex:-1},O>x?(V.sortIndex=O,a(h,V),r(R)===null&&V===r(h)&&(b?(P($),$=-1):b=!0,At(C,O-x))):(V.sortIndex=g,a(R,V),p||_||(p=!0,k||(k=!0,_t()))),V},o.unstable_shouldYield=J,o.unstable_wrapCallback=function(V){var H=A;return function(){var O=A;A=H;try{return V.apply(this,arguments)}finally{A=O}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var o=requireReact();function a(R){var h="https://react.dev/errors/"+R;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)h+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+R+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function m(R,h,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:d==null?null:""+d,children:R,containerInfo:h,implementation:u}}var S=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(R,h){if(R==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(R,h){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return m(R,h,null,u)},reactDom_production.flushSync=function(R){var h=S.T,u=s.p;try{if(S.T=null,s.p=2,R)return R()}finally{S.T=h,s.p=u,s.d.f()}},reactDom_production.preconnect=function(R,h){typeof R=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(R,h))},reactDom_production.prefetchDNS=function(R){typeof R=="string"&&s.d.D(R)},reactDom_production.preinit=function(R,h){if(typeof R=="string"&&h&&typeof h.as=="string"){var u=h.as,d=w(u,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;u==="style"?s.d.S(R,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:d,integrity:A,fetchPriority:_}):u==="script"&&s.d.X(R,{crossOrigin:d,integrity:A,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},reactDom_production.preinitModule=function(R,h){if(typeof R=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var u=w(h.as,h.crossOrigin);s.d.M(R,{crossOrigin:u,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(R)},reactDom_production.preload=function(R,h){if(typeof R=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var u=h.as,d=w(u,h.crossOrigin);s.d.L(R,u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},reactDom_production.preloadModule=function(R,h){if(typeof R=="string")if(h){var u=w(h.as,h.crossOrigin);s.d.m(R,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:u,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(R)},reactDom_production.requestFormReset=function(R){s.d.r(R)},reactDom_production.unstable_batchedUpdates=function(R,h){return R(h)},reactDom_production.useFormState=function(R,h,u){return S.H.useFormState(R,h,u)},reactDom_production.useFormStatus=function(){return S.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var o=requireScheduler(),a=requireReact(),r=requireReactDom();function s(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w(t){if(m(t)!==t)throw Error(s(188))}function R(t){var e=t.alternate;if(!e){if(e=m(t),e===null)throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return w(c),t;if(f===i)return w(c),e;f=f.sibling}throw Error(s(188))}if(n.return!==i.return)n=c,i=f;else{for(var M=!1,L=c.child;L;){if(L===n){M=!0,n=c,i=f;break}if(L===i){M=!0,i=c,n=f;break}L=L.sibling}if(!M){for(L=f.child;L;){if(L===n){M=!0,n=f,i=c;break}if(L===i){M=!0,i=f,n=c;break}L=L.sibling}if(!M)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?t:e}function h(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=h(t),e!==null)return e;t=t.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function _t(t){return t===null||typeof t!="object"?null:(t=tt&&t[tt]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Symbol.for("react.client.reference");function yt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===mt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case p:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case B:return(t.displayName||"Context")+".Provider";case P:return(t._context.displayName||"Context")+".Consumer";case U:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return e=t.displayName||null,e!==null?e:yt(t.type)||"Memo";case Y:e=t._payload,t=t._init;try{return yt(t(e))}catch{}}return null}var At=Array.isArray,V=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},x=[],g=-1;function T(t){return{current:t}}function I(t){0>g||(t.current=x[g],x[g]=null,g--)}function N(t,e){g++,x[g]=t.current,t.current=e}var G=T(null),j=T(null),v=T(null),D=T(null);function F(t,e){switch(N(v,e),N(j,t),N(G,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Ch(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Ch(e),t=Rh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}I(G),N(G,t)}function z(){I(G),I(j),I(v)}function q(t){t.memoizedState!==null&&N(D,t);var e=G.current,n=Rh(e,t.type);e!==n&&(N(j,t),N(G,n))}function W(t){j.current===t&&(I(G),I(j)),D.current===t&&(I(D),Gs._currentValue=O)}var Q=Object.prototype.hasOwnProperty,ot=o.unstable_scheduleCallback,St=o.unstable_cancelCallback,ct=o.unstable_shouldYield,ht=o.unstable_requestPaint,ut=o.unstable_now,ft=o.unstable_getCurrentPriorityLevel,bt=o.unstable_ImmediatePriority,Et=o.unstable_UserBlockingPriority,Rt=o.unstable_NormalPriority,Tt=o.unstable_LowPriority,Dt=o.unstable_IdlePriority,Ft=o.log,zt=o.unstable_setDisableYieldValue,ue=null,Gt=null;function xe(t){if(typeof Ft=="function"&&zt(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ue,t)}catch{}}var qt=Math.clz32?Math.clz32:sr,Ke=Math.log,Za=Math.LN2;function sr(t){return t>>>=0,t===0?32:31-(Ke(t)/Za|0)|0}var ha=256,vt=4194304;function at(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nt(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var c=0,f=t.suspendedLanes,M=t.pingedLanes;t=t.warmLanes;var L=i&134217727;return L!==0?(i=L&~f,i!==0?c=at(i):(M&=L,M!==0?c=at(M):n||(n=L&~t,n!==0&&(c=at(n))))):(L=i&~f,L!==0?c=at(L):M!==0?c=at(M):n||(n=i&~t,n!==0&&(c=at(n)))),c===0?0:e!==0&&e!==c&&(e&f)===0&&(f=c&-c,n=e&-e,f>=n||f===32&&(n&4194048)!==0)?e:c}function xt(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function jt(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ie(){var t=ha;return ha<<=1,(ha&4194048)===0&&(ha=256),t}function re(){var t=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),t}function tn(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ue(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function on(t,e,n,i,c,f){var M=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var L=t.entanglements,K=t.expirationTimes,it=t.hiddenUpdates;for(n=M&~n;0<n;){var dt=31-qt(n),gt=1<<dt;L[dt]=0,K[dt]=-1;var rt=it[dt];if(rt!==null)for(it[dt]=null,dt=0;dt<rt.length;dt++){var lt=rt[dt];lt!==null&&(lt.lane&=-536870913)}n&=~gt}i!==0&&ye(t,i,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(M&~e))}function ye(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-qt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function ln(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-qt(n),c=1<<i;c&e|t[i]&e&&(t[i]|=e),n&=~c}}function Be(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ne(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:Xh(t.type))}function da(t,e){var n=H.p;try{return H.p=t,e()}finally{H.p=n}}var Pe=Math.random().toString(36).slice(2),oe="__reactFiber$"+Pe,fe="__reactProps$"+Pe,je="__reactContainer$"+Pe,be="__reactEvents$"+Pe,Yn="__reactListeners$"+Pe,Ja="__reactHandles$"+Pe,fl="__reactResources$"+Pe,ts="__reactMarker$"+Pe;function ir(t){delete t[oe],delete t[fe],delete t[be],delete t[Yn],delete t[Ja]}function fa(t){var e=t[oe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[je]||n[oe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ph(t);t!==null;){if(n=t[oe])return n;t=Ph(t)}return e}t=n,n=t.parentNode}return null}function pa(t){if(t=t[oe]||t[je]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function es(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(s(33))}function ma(t){var e=t[fl];return e||(e=t[fl]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function pe(t){t[ts]=!0}var pl=new Set,ml={};function Vn(t,e){ga(t,e),ga(t+"Capture",e)}function ga(t,e){for(ml[t]=e,t=0;t<e.length;t++)pl.add(e[t])}var Qh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gl={},_l={};function Zh(t){return Q.call(_l,t)?!0:Q.call(gl,t)?!1:Qh.test(t)?_l[t]=!0:(gl[t]=!0,!1)}function Vs(t,e,n){if(Zh(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ws(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function cn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var rr,yl;function ya(t){if(rr===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rr=e&&e[1]||"",yl=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rr+t+yl}var or=!1;function lr(t,e){if(!t||or)return"";or=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(lt){var rt=lt}Reflect.construct(t,[],gt)}else{try{gt.call()}catch(lt){rt=lt}t.call(gt.prototype)}}else{try{throw Error()}catch(lt){rt=lt}(gt=t())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(lt){if(lt&&rt&&typeof lt.stack=="string")return[lt.stack,rt.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=i.DetermineComponentFrameRoot(),M=f[0],L=f[1];if(M&&L){var K=M.split(`
`),it=L.split(`
`);for(c=i=0;i<K.length&&!K[i].includes("DetermineComponentFrameRoot");)i++;for(;c<it.length&&!it[c].includes("DetermineComponentFrameRoot");)c++;if(i===K.length||c===it.length)for(i=K.length-1,c=it.length-1;1<=i&&0<=c&&K[i]!==it[c];)c--;for(;1<=i&&0<=c;i--,c--)if(K[i]!==it[c]){if(i!==1||c!==1)do if(i--,c--,0>c||K[i]!==it[c]){var dt=`
`+K[i].replace(" at new "," at ");return t.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",t.displayName)),dt}while(1<=i&&0<=c);break}}}finally{or=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ya(n):""}function Jh(t){switch(t.tag){case 26:case 27:case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 15:return lr(t.type,!1);case 11:return lr(t.type.render,!1);case 1:return lr(t.type,!0);case 31:return ya("Activity");default:return""}}function bl(t){try{var e="";do e+=Jh(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function He(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vl(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function td(t){var e=vl(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,f=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return c.call(this)},set:function(M){i=""+M,f.call(this,M)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(M){i=""+M},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ks(t){t._valueTracker||(t._valueTracker=td(t))}function Al(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=vl(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ed=/[\n"\\]/g;function ze(t){return t.replace(ed,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function cr(t,e,n,i,c,f,M,L){t.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?t.type=M:t.removeAttribute("type"),e!=null?M==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+He(e)):t.value!==""+He(e)&&(t.value=""+He(e)):M!=="submit"&&M!=="reset"||t.removeAttribute("value"),e!=null?ur(t,M,He(e)):n!=null?ur(t,M,He(n)):i!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?t.name=""+He(L):t.removeAttribute("name")}function Sl(t,e,n,i,c,f,M,L){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),e!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||e!=null))return;n=n!=null?""+He(n):"",e=e!=null?""+He(e):n,L||e===t.value||(t.value=e),t.defaultValue=e}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=L?t.checked:!!i,t.defaultChecked=!!i,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(t.name=M)}function ur(t,e,n){e==="number"&&Qs(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ba(t,e,n,i){if(t=t.options,e){e={};for(var c=0;c<n.length;c++)e["$"+n[c]]=!0;for(n=0;n<t.length;n++)c=e.hasOwnProperty("$"+t[n].value),t[n].selected!==c&&(t[n].selected=c),c&&i&&(t[n].defaultSelected=!0)}else{for(n=""+He(n),e=null,c=0;c<t.length;c++){if(t[c].value===n){t[c].selected=!0,i&&(t[c].defaultSelected=!0);return}e!==null||t[c].disabled||(e=t[c])}e!==null&&(e.selected=!0)}}function El(t,e,n){if(e!=null&&(e=""+He(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+He(n):""}function xl(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(s(92));if(At(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=He(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cl(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||nd.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Rl(t,e,n){if(e!=null&&typeof e!="object")throw Error(s(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var c in e)i=e[c],e.hasOwnProperty(c)&&n[c]!==i&&Cl(t,c,i)}else for(var f in e)e.hasOwnProperty(f)&&Cl(t,f,e[f])}function hr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(t){return sd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var dr=null;function fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,Sa=null;function wl(t){var e=pa(t);if(e&&(t=e.stateNode)){var n=t[fe]||null;t:switch(t=e.stateNode,e.type){case"input":if(cr(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ze(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var c=i[fe]||null;if(!c)throw Error(s(90));cr(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Al(i)}break t;case"textarea":El(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&ba(t,!!n.multiple,e,!1)}}}var pr=!1;function Tl(t,e,n){if(pr)return t(e,n);pr=!0;try{var i=t(e);return i}finally{if(pr=!1,(Aa!==null||Sa!==null)&&(Ii(),Aa&&(e=Aa,t=Sa,Sa=Aa=null,wl(e),t)))for(e=0;e<t.length;e++)wl(t[e])}}function ns(t,e){var n=t.stateNode;if(n===null)return null;var i=n[fe]||null;if(i===null)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(s(231,e,typeof n));return n}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mr=!1;if(un)try{var as={};Object.defineProperty(as,"passive",{get:function(){mr=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{mr=!1}var Cn=null,gr=null,Js=null;function Ml(){if(Js)return Js;var t,e=gr,n=e.length,i,c="value"in Cn?Cn.value:Cn.textContent,f=c.length;for(t=0;t<n&&e[t]===c[t];t++);var M=n-t;for(i=1;i<=M&&e[n-i]===c[f-i];i++);return Js=c.slice(t,1<i?1-i:void 0)}function ti(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ei(){return!0}function Pl(){return!1}function Re(t){function e(n,i,c,f,M){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=f,this.target=M,this.currentTarget=null;for(var L in t)t.hasOwnProperty(L)&&(n=t[L],this[L]=n?n(f):f[L]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ei:Pl,this.isPropagationStopped=Pl,this}return u(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),e}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=Re(Wn),ss=u({},Wn,{view:0,detail:0}),id=Re(ss),_r,yr,is,ai=u({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==is&&(is&&t.type==="mousemove"?(_r=t.screenX-is.screenX,yr=t.screenY-is.screenY):yr=_r=0,is=t),_r)},movementY:function(t){return"movementY"in t?t.movementY:yr}}),Ol=Re(ai),rd=u({},ai,{dataTransfer:0}),od=Re(rd),ld=u({},ss,{relatedTarget:0}),br=Re(ld),cd=u({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),ud=Re(cd),hd=u({},Wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dd=Re(hd),fd=u({},Wn,{data:0}),Dl=Re(fd),pd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gd[t])?!!e[t]:!1}function vr(){return _d}var yd=u({},ss,{key:function(t){if(t.key){var e=pd[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?md[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(t){return t.type==="keypress"?ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bd=Re(yd),vd=u({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Re(vd),Ad=u({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),Sd=Re(Ad),Ed=u({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xd=Re(Ed),Cd=u({},ai,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rd=Re(Cd),wd=u({},Wn,{newState:0,oldState:0}),Td=Re(wd),Md=[9,13,27,32],Ar=un&&"CompositionEvent"in window,rs=null;un&&"documentMode"in document&&(rs=document.documentMode);var Pd=un&&"TextEvent"in window&&!rs,kl=un&&(!Ar||rs&&8<rs&&11>=rs),Ll=" ",Nl=!1;function Il(t,e){switch(t){case"keyup":return Md.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ea=!1;function Od(t,e){switch(t){case"compositionend":return Ul(e);case"keypress":return e.which!==32?null:(Nl=!0,Ll);case"textInput":return t=e.data,t===Ll&&Nl?null:t;default:return null}}function Dd(t,e){if(Ea)return t==="compositionend"||!Ar&&Il(t,e)?(t=Ml(),Js=gr=Cn=null,Ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kl&&e.locale!=="ko"?null:e.data;default:return null}}var Fd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fd[t.type]:e==="textarea"}function jl(t,e,n,i){Aa?Sa?Sa.push(i):Sa=[i]:Aa=i,e=Gi(e,"onChange"),0<e.length&&(n=new ni("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var os=null,ls=null;function kd(t){vh(t,0)}function si(t){var e=es(t);if(Al(e))return t}function Hl(t,e){if(t==="change")return e}var zl=!1;if(un){var Sr;if(un){var Er="oninput"in document;if(!Er){var Gl=document.createElement("div");Gl.setAttribute("oninput","return;"),Er=typeof Gl.oninput=="function"}Sr=Er}else Sr=!1;zl=Sr&&(!document.documentMode||9<document.documentMode)}function ql(){os&&(os.detachEvent("onpropertychange",Xl),ls=os=null)}function Xl(t){if(t.propertyName==="value"&&si(ls)){var e=[];jl(e,ls,t,fr(t)),Tl(kd,e)}}function Ld(t,e,n){t==="focusin"?(ql(),os=e,ls=n,os.attachEvent("onpropertychange",Xl)):t==="focusout"&&ql()}function Nd(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return si(ls)}function Id(t,e){if(t==="click")return si(e)}function Ud(t,e){if(t==="input"||t==="change")return si(e)}function Bd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Oe=typeof Object.is=="function"?Object.is:Bd;function cs(t,e){if(Oe(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!Q.call(e,c)||!Oe(t[c],e[c]))return!1}return!0}function $l(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yl(t,e){var n=$l(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=$l(n)}}function Vl(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vl(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wl(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Qs(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qs(t.document)}return e}function xr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var jd=un&&"documentMode"in document&&11>=document.documentMode,xa=null,Cr=null,us=null,Rr=!1;function Kl(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rr||xa==null||xa!==Qs(i)||(i=xa,"selectionStart"in i&&xr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),us&&cs(us,i)||(us=i,i=Gi(Cr,"onSelect"),0<i.length&&(e=new ni("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xa)))}function Kn(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionrun:Kn("Transition","TransitionRun"),transitionstart:Kn("Transition","TransitionStart"),transitioncancel:Kn("Transition","TransitionCancel"),transitionend:Kn("Transition","TransitionEnd")},wr={},Ql={};un&&(Ql=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Qn(t){if(wr[t])return wr[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ql)return wr[t]=e[n];return t}var Zl=Qn("animationend"),Jl=Qn("animationiteration"),tc=Qn("animationstart"),Hd=Qn("transitionrun"),zd=Qn("transitionstart"),Gd=Qn("transitioncancel"),ec=Qn("transitionend"),nc=new Map,Tr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tr.push("scrollEnd");function Qe(t,e){nc.set(t,e),Vn(e,[t])}var ac=new WeakMap;function Ge(t,e){if(typeof t=="object"&&t!==null){var n=ac.get(t);return n!==void 0?n:(e={value:t,source:e,stack:bl(e)},ac.set(t,e),e)}return{value:t,source:e,stack:bl(e)}}var qe=[],Ra=0,Mr=0;function ii(){for(var t=Ra,e=Mr=Ra=0;e<t;){var n=qe[e];qe[e++]=null;var i=qe[e];qe[e++]=null;var c=qe[e];qe[e++]=null;var f=qe[e];if(qe[e++]=null,i!==null&&c!==null){var M=i.pending;M===null?c.next=c:(c.next=M.next,M.next=c),i.pending=c}f!==0&&sc(n,c,f)}}function ri(t,e,n,i){qe[Ra++]=t,qe[Ra++]=e,qe[Ra++]=n,qe[Ra++]=i,Mr|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Pr(t,e,n,i){return ri(t,e,n,i),oi(t)}function wa(t,e){return ri(t,null,null,e),oi(t)}function sc(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var c=!1,f=t.return;f!==null;)f.childLanes|=n,i=f.alternate,i!==null&&(i.childLanes|=n),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&e!==null&&(c=31-qt(n),t=f.hiddenUpdates,i=t[c],i===null?t[c]=[e]:i.push(e),e.lane=n|536870912),f):null}function oi(t){if(50<Ls)throw Ls=0,Io=null,Error(s(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ta={};function qd(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function De(t,e,n,i){return new qd(t,e,n,i)}function Or(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hn(t,e){var n=t.alternate;return n===null?(n=De(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ic(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function li(t,e,n,i,c,f){var M=0;if(i=t,typeof t=="function")Or(t)&&(M=1);else if(typeof t=="string")M=Yf(t,n,G.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case X:return t=De(31,n,e,c),t.elementType=X,t.lanes=f,t;case p:return Zn(n.children,c,f,e);case b:M=8,c|=24;break;case E:return t=De(12,n,e,c|2),t.elementType=E,t.lanes=f,t;case C:return t=De(13,n,e,c),t.elementType=C,t.lanes=f,t;case k:return t=De(19,n,e,c),t.elementType=k,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y:case B:M=10;break t;case P:M=9;break t;case U:M=11;break t;case $:M=14;break t;case Y:M=16,i=null;break t}M=29,n=Error(s(130,t===null?"null":typeof t,"")),i=null}return e=De(M,n,e,c),e.elementType=t,e.type=i,e.lanes=f,e}function Zn(t,e,n,i){return t=De(7,t,i,e),t.lanes=n,t}function Dr(t,e,n){return t=De(6,t,null,e),t.lanes=n,t}function Fr(t,e,n){return e=De(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ma=[],Pa=0,ci=null,ui=0,Xe=[],$e=0,Jn=null,dn=1,fn="";function ta(t,e){Ma[Pa++]=ui,Ma[Pa++]=ci,ci=t,ui=e}function rc(t,e,n){Xe[$e++]=dn,Xe[$e++]=fn,Xe[$e++]=Jn,Jn=t;var i=dn;t=fn;var c=32-qt(i)-1;i&=~(1<<c),n+=1;var f=32-qt(e)+c;if(30<f){var M=c-c%5;f=(i&(1<<M)-1).toString(32),i>>=M,c-=M,dn=1<<32-qt(e)+c|n<<c|i,fn=f+t}else dn=1<<f|n<<c|i,fn=t}function kr(t){t.return!==null&&(ta(t,1),rc(t,1,0))}function Lr(t){for(;t===ci;)ci=Ma[--Pa],Ma[Pa]=null,ui=Ma[--Pa],Ma[Pa]=null;for(;t===Jn;)Jn=Xe[--$e],Xe[$e]=null,fn=Xe[--$e],Xe[$e]=null,dn=Xe[--$e],Xe[$e]=null}var Ce=null,te=null,Ht=!1,ea=null,en=!1,Nr=Error(s(519));function na(t){var e=Error(s(418,""));throw fs(Ge(e,t)),Nr}function oc(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[oe]=t,e[fe]=i,n){case"dialog":It("cancel",e),It("close",e);break;case"iframe":case"object":case"embed":It("load",e);break;case"video":case"audio":for(n=0;n<Is.length;n++)It(Is[n],e);break;case"source":It("error",e);break;case"img":case"image":case"link":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"input":It("invalid",e),Sl(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ks(e);break;case"select":It("invalid",e);break;case"textarea":It("invalid",e),xl(e,i.value,i.defaultValue,i.children),Ks(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||xh(e.textContent,n)?(i.popover!=null&&(It("beforetoggle",e),It("toggle",e)),i.onScroll!=null&&It("scroll",e),i.onScrollEnd!=null&&It("scrollend",e),i.onClick!=null&&(e.onclick=qi),e=!0):e=!1,e||na(t)}function lc(t){for(Ce=t.return;Ce;)switch(Ce.tag){case 5:case 13:en=!1;return;case 27:case 3:en=!0;return;default:Ce=Ce.return}}function hs(t){if(t!==Ce)return!1;if(!Ht)return lc(t),Ht=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Jo(t.type,t.memoizedProps)),n=!n),n&&te&&na(t),lc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){te=Je(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}te=null}}else e===27?(e=te,Hn(t.type)?(t=al,al=null,te=t):te=e):te=Ce?Je(t.stateNode.nextSibling):null;return!0}function ds(){te=Ce=null,Ht=!1}function cc(){var t=ea;return t!==null&&(Me===null?Me=t:Me.push.apply(Me,t),ea=null),t}function fs(t){ea===null?ea=[t]:ea.push(t)}var Ir=T(null),aa=null,pn=null;function Rn(t,e,n){N(Ir,e._currentValue),e._currentValue=n}function mn(t){t._currentValue=Ir.current,I(Ir)}function Ur(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Br(t,e,n,i){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var M=c.child;f=f.firstContext;t:for(;f!==null;){var L=f;f=c;for(var K=0;K<e.length;K++)if(L.context===e[K]){f.lanes|=n,L=f.alternate,L!==null&&(L.lanes|=n),Ur(f.return,n,t),i||(M=null);break t}f=L.next}}else if(c.tag===18){if(M=c.return,M===null)throw Error(s(341));M.lanes|=n,f=M.alternate,f!==null&&(f.lanes|=n),Ur(M,n,t),M=null}else M=c.child;if(M!==null)M.return=c;else for(M=c;M!==null;){if(M===t){M=null;break}if(c=M.sibling,c!==null){c.return=M.return,M=c;break}M=M.return}c=M}}function ps(t,e,n,i){t=null;for(var c=e,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var M=c.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var L=c.type;Oe(c.pendingProps.value,M.value)||(t!==null?t.push(L):t=[L])}}else if(c===D.current){if(M=c.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Gs):t=[Gs])}c=c.return}t!==null&&Br(e,t,n,i),e.flags|=262144}function hi(t){for(t=t.firstContext;t!==null;){if(!Oe(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){aa=t,pn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ee(t){return uc(aa,t)}function di(t,e){return aa===null&&sa(t),uc(t,e)}function uc(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},pn===null){if(t===null)throw Error(s(308));pn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else pn=pn.next=e;return n}var Xd=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},$d=o.unstable_scheduleCallback,Yd=o.unstable_NormalPriority,he={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jr(){return{controller:new Xd,data:new Map,refCount:0}}function ms(t){t.refCount--,t.refCount===0&&$d(Yd,function(){t.controller.abort()})}var gs=null,Hr=0,Oa=0,Da=null;function Vd(t,e){if(gs===null){var n=gs=[];Hr=0,Oa=qo(),Da={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Hr++,e.then(hc,hc),e}function hc(){if(--Hr===0&&gs!==null){Da!==null&&(Da.status="fulfilled");var t=gs;gs=null,Oa=0,Da=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Wd(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var c=0;c<n.length;c++)(0,n[c])(e)},function(c){for(i.status="rejected",i.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),i}var dc=V.S;V.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Vd(t,e),dc!==null&&dc(t,e)};var ia=T(null);function zr(){var t=ia.current;return t!==null?t:Qt.pooledCache}function fi(t,e){e===null?N(ia,ia.current):N(ia,e.pool)}function fc(){var t=zr();return t===null?null:{parent:he._currentValue,pool:t}}var _s=Error(s(460)),pc=Error(s(474)),pi=Error(s(542)),Gr={then:function(){}};function mc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function mi(){}function gc(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(mi,mi),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,yc(t),t;default:if(typeof e.status=="string")e.then(mi,mi);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var c=e;c.status="fulfilled",c.value=i}},function(i){if(e.status==="pending"){var c=e;c.status="rejected",c.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,yc(t),t}throw ys=e,_s}}var ys=null;function _c(){if(ys===null)throw Error(s(459));var t=ys;return ys=null,t}function yc(t){if(t===_s||t===pi)throw Error(s(483))}var wn=!1;function qr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Tn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(Xt&2)!==0){var c=i.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),i.pending=e,e=oi(t),sc(t,null,n),e}return ri(t,i,e,n),oi(t)}function bs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ln(t,n)}}function $r(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var M={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=M:f=f.next=M,n=n.next}while(n!==null);f===null?c=f=e:f=f.next=e}else c=f=e;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Yr=!1;function vs(){if(Yr){var t=Da;if(t!==null)throw t}}function As(t,e,n,i){Yr=!1;var c=t.updateQueue;wn=!1;var f=c.firstBaseUpdate,M=c.lastBaseUpdate,L=c.shared.pending;if(L!==null){c.shared.pending=null;var K=L,it=K.next;K.next=null,M===null?f=it:M.next=it,M=K;var dt=t.alternate;dt!==null&&(dt=dt.updateQueue,L=dt.lastBaseUpdate,L!==M&&(L===null?dt.firstBaseUpdate=it:L.next=it,dt.lastBaseUpdate=K))}if(f!==null){var gt=c.baseState;M=0,dt=it=K=null,L=f;do{var rt=L.lane&-536870913,lt=rt!==L.lane;if(lt?(Ut&rt)===rt:(i&rt)===rt){rt!==0&&rt===Oa&&(Yr=!0),dt!==null&&(dt=dt.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Ot=t,Mt=L;rt=e;var Wt=n;switch(Mt.tag){case 1:if(Ot=Mt.payload,typeof Ot=="function"){gt=Ot.call(Wt,gt,rt);break t}gt=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Mt.payload,rt=typeof Ot=="function"?Ot.call(Wt,gt,rt):Ot,rt==null)break t;gt=u({},gt,rt);break t;case 2:wn=!0}}rt=L.callback,rt!==null&&(t.flags|=64,lt&&(t.flags|=8192),lt=c.callbacks,lt===null?c.callbacks=[rt]:lt.push(rt))}else lt={lane:rt,tag:L.tag,payload:L.payload,callback:L.callback,next:null},dt===null?(it=dt=lt,K=gt):dt=dt.next=lt,M|=rt;if(L=L.next,L===null){if(L=c.shared.pending,L===null)break;lt=L,L=lt.next,lt.next=null,c.lastBaseUpdate=lt,c.shared.pending=null}}while(!0);dt===null&&(K=gt),c.baseState=K,c.firstBaseUpdate=it,c.lastBaseUpdate=dt,f===null&&(c.shared.lanes=0),In|=M,t.lanes=M,t.memoizedState=gt}}function bc(t,e){if(typeof t!="function")throw Error(s(191,t));t.call(e)}function vc(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)bc(n[t],e)}var Fa=T(null),gi=T(0);function Ac(t,e){t=Sn,N(gi,t),N(Fa,e),Sn=t|e.baseLanes}function Vr(){N(gi,Sn),N(Fa,Fa.current)}function Wr(){Sn=gi.current,I(Fa),I(gi)}var Pn=0,kt=null,Yt=null,le=null,_i=!1,ka=!1,ra=!1,yi=0,Ss=0,La=null,Kd=0;function ae(){throw Error(s(321))}function Kr(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Oe(t[n],e[n]))return!1;return!0}function Qr(t,e,n,i,c,f){return Pn=f,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,V.H=t===null||t.memoizedState===null?su:iu,ra=!1,f=n(i,c),ra=!1,ka&&(f=Ec(e,n,i,c)),Sc(t),f}function Sc(t){V.H=xi;var e=Yt!==null&&Yt.next!==null;if(Pn=0,le=Yt=kt=null,_i=!1,Ss=0,La=null,e)throw Error(s(300));t===null||me||(t=t.dependencies,t!==null&&hi(t)&&(me=!0))}function Ec(t,e,n,i){kt=t;var c=0;do{if(ka&&(La=null),Ss=0,ka=!1,25<=c)throw Error(s(301));if(c+=1,le=Yt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}V.H=af,f=e(n,i)}while(ka);return f}function Qd(){var t=V.H,e=t.useState()[0];return e=typeof e.then=="function"?Es(e):e,t=t.useState()[0],(Yt!==null?Yt.memoizedState:null)!==t&&(kt.flags|=1024),e}function Zr(){var t=yi!==0;return yi=0,t}function Jr(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function to(t){if(_i){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}_i=!1}Pn=0,le=Yt=kt=null,ka=!1,Ss=yi=0,La=null}function we(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?kt.memoizedState=le=t:le=le.next=t,le}function ce(){if(Yt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=le===null?kt.memoizedState:le.next;if(e!==null)le=e,Yt=t;else{if(t===null)throw kt.alternate===null?Error(s(467)):Error(s(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},le===null?kt.memoizedState=le=t:le=le.next=t}return le}function eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Es(t){var e=Ss;return Ss+=1,La===null&&(La=[]),t=gc(La,t,e),e=kt,(le===null?e.memoizedState:le.next)===null&&(e=e.alternate,V.H=e===null||e.memoizedState===null?su:iu),t}function bi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Es(t);if(t.$$typeof===B)return Ee(t)}throw Error(s(438,String(t)))}function no(t){var e=null,n=kt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=kt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(c){return c.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=eo(),kt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=J;return e.index++,n}function gn(t,e){return typeof e=="function"?e(t):e}function vi(t){var e=ce();return ao(e,Yt,t)}function ao(t,e,n){var i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=n;var c=t.baseQueue,f=i.pending;if(f!==null){if(c!==null){var M=c.next;c.next=f.next,f.next=M}e.baseQueue=c=f,i.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{e=c.next;var L=M=null,K=null,it=e,dt=!1;do{var gt=it.lane&-536870913;if(gt!==it.lane?(Ut&gt)===gt:(Pn&gt)===gt){var rt=it.revertLane;if(rt===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),gt===Oa&&(dt=!0);else if((Pn&rt)===rt){it=it.next,rt===Oa&&(dt=!0);continue}else gt={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},K===null?(L=K=gt,M=f):K=K.next=gt,kt.lanes|=rt,In|=rt;gt=it.action,ra&&n(f,gt),f=it.hasEagerState?it.eagerState:n(f,gt)}else rt={lane:gt,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},K===null?(L=K=rt,M=f):K=K.next=rt,kt.lanes|=gt,In|=gt;it=it.next}while(it!==null&&it!==e);if(K===null?M=f:K.next=L,!Oe(f,t.memoizedState)&&(me=!0,dt&&(n=Da,n!==null)))throw n;t.memoizedState=f,t.baseState=M,t.baseQueue=K,i.lastRenderedState=f}return c===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function so(t){var e=ce(),n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,c=n.pending,f=e.memoizedState;if(c!==null){n.pending=null;var M=c=c.next;do f=t(f,M.action),M=M.next;while(M!==c);Oe(f,e.memoizedState)||(me=!0),e.memoizedState=f,e.baseQueue===null&&(e.baseState=f),n.lastRenderedState=f}return[f,i]}function xc(t,e,n){var i=kt,c=ce(),f=Ht;if(f){if(n===void 0)throw Error(s(407));n=n()}else n=e();var M=!Oe((Yt||c).memoizedState,n);M&&(c.memoizedState=n,me=!0),c=c.queue;var L=wc.bind(null,i,c,t);if(xs(2048,8,L,[t]),c.getSnapshot!==e||M||le!==null&&le.memoizedState.tag&1){if(i.flags|=2048,Na(9,Ai(),Rc.bind(null,i,c,n,e),null),Qt===null)throw Error(s(349));f||(Pn&124)!==0||Cc(i,e,n)}return n}function Cc(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e=eo(),kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rc(t,e,n,i){e.value=n,e.getSnapshot=i,Tc(e)&&Mc(t)}function wc(t,e,n){return n(function(){Tc(e)&&Mc(t)})}function Tc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Oe(t,n)}catch{return!0}}function Mc(t){var e=wa(t,2);e!==null&&Ie(e,t,2)}function io(t){var e=we();if(typeof t=="function"){var n=t;if(t=n(),ra){xe(!0);try{n()}finally{xe(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:t},e}function Pc(t,e,n,i){return t.baseState=n,ao(t,Yt,typeof i=="function"?i:gn)}function Zd(t,e,n,i,c){if(Ei(t))throw Error(s(485));if(t=e.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){f.listeners.push(M)}};V.T!==null?n(!0):f.isTransition=!1,i(f),n=e.pending,n===null?(f.next=e.pending=f,Oc(e,f)):(f.next=n.next,e.pending=n.next=f)}}function Oc(t,e){var n=e.action,i=e.payload,c=t.state;if(e.isTransition){var f=V.T,M={};V.T=M;try{var L=n(c,i),K=V.S;K!==null&&K(M,L),Dc(t,e,L)}catch(it){ro(t,e,it)}finally{V.T=f}}else try{f=n(c,i),Dc(t,e,f)}catch(it){ro(t,e,it)}}function Dc(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Fc(t,e,i)},function(i){return ro(t,e,i)}):Fc(t,e,n)}function Fc(t,e,n){e.status="fulfilled",e.value=n,kc(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Oc(t,n)))}function ro(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,kc(e),e=e.next;while(e!==i)}t.action=null}function kc(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Lc(t,e){return e}function Nc(t,e){if(Ht){var n=Qt.formState;if(n!==null){t:{var i=kt;if(Ht){if(te){e:{for(var c=te,f=en;c.nodeType!==8;){if(!f){c=null;break e}if(c=Je(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){te=Je(c.nextSibling),i=c.data==="F!";break t}}na(i)}i=!1}i&&(e=n[0])}}return n=we(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:e},n.queue=i,n=eu.bind(null,kt,i),i.dispatch=n,i=io(!1),f=ho.bind(null,kt,!1,i.queue),i=we(),c={state:e,dispatch:null,action:t,pending:null},i.queue=c,n=Zd.bind(null,kt,c,f,n),c.dispatch=n,i.memoizedState=t,[e,n,!1]}function Ic(t){var e=ce();return Uc(e,Yt,t)}function Uc(t,e,n){if(e=ao(t,e,Lc)[0],t=vi(gn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Es(e)}catch(M){throw M===_s?pi:M}else i=e;e=ce();var c=e.queue,f=c.dispatch;return n!==e.memoizedState&&(kt.flags|=2048,Na(9,Ai(),Jd.bind(null,c,n),null)),[i,f,t]}function Jd(t,e){t.action=e}function Bc(t){var e=ce(),n=Yt;if(n!==null)return Uc(e,n,t);ce(),e=e.memoizedState,n=ce();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Na(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=kt.updateQueue,e===null&&(e=eo(),kt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Ai(){return{destroy:void 0,resource:void 0}}function jc(){return ce().memoizedState}function Si(t,e,n,i){var c=we();i=i===void 0?null:i,kt.flags|=t,c.memoizedState=Na(1|e,Ai(),n,i)}function xs(t,e,n,i){var c=ce();i=i===void 0?null:i;var f=c.memoizedState.inst;Yt!==null&&i!==null&&Kr(i,Yt.memoizedState.deps)?c.memoizedState=Na(e,f,n,i):(kt.flags|=t,c.memoizedState=Na(1|e,f,n,i))}function Hc(t,e){Si(8390656,8,t,e)}function zc(t,e){xs(2048,8,t,e)}function Gc(t,e){return xs(4,2,t,e)}function qc(t,e){return xs(4,4,t,e)}function Xc(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $c(t,e,n){n=n!=null?n.concat([t]):null,xs(4,4,Xc.bind(null,e,t),n)}function oo(){}function Yc(t,e){var n=ce();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Kr(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Vc(t,e){var n=ce();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Kr(e,i[1]))return i[0];if(i=t(),ra){xe(!0);try{t()}finally{xe(!1)}}return n.memoizedState=[i,e],i}function lo(t,e,n){return n===void 0||(Pn&1073741824)!==0?t.memoizedState=e:(t.memoizedState=n,t=Qu(),kt.lanes|=t,In|=t,n)}function Wc(t,e,n,i){return Oe(n,e)?n:Fa.current!==null?(t=lo(t,n,i),Oe(t,e)||(me=!0),t):(Pn&42)===0?(me=!0,t.memoizedState=n):(t=Qu(),kt.lanes|=t,In|=t,e)}function Kc(t,e,n,i,c){var f=H.p;H.p=f!==0&&8>f?f:8;var M=V.T,L={};V.T=L,ho(t,!1,e,n);try{var K=c(),it=V.S;if(it!==null&&it(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var dt=Wd(K,i);Cs(t,e,dt,Ne(t))}else Cs(t,e,i,Ne(t))}catch(gt){Cs(t,e,{then:function(){},status:"rejected",reason:gt},Ne())}finally{H.p=f,V.T=M}}function tf(){}function co(t,e,n,i){if(t.tag!==5)throw Error(s(476));var c=Qc(t).queue;Kc(t,c,e,O,n===null?tf:function(){return Zc(t),n(i)})}function Qc(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:O},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Zc(t){var e=Qc(t).next.queue;Cs(t,e,{},Ne())}function uo(){return Ee(Gs)}function Jc(){return ce().memoizedState}function tu(){return ce().memoizedState}function ef(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ne();t=Tn(n);var i=Mn(e,t,n);i!==null&&(Ie(i,e,n),bs(i,e,n)),e={cache:jr()},t.payload=e;return}e=e.return}}function nf(t,e,n){var i=Ne();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ei(t)?nu(e,n):(n=Pr(t,e,n,i),n!==null&&(Ie(n,t,i),au(n,e,i)))}function eu(t,e,n){var i=Ne();Cs(t,e,n,i)}function Cs(t,e,n,i){var c={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ei(t))nu(e,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=e.lastRenderedReducer,f!==null))try{var M=e.lastRenderedState,L=f(M,n);if(c.hasEagerState=!0,c.eagerState=L,Oe(L,M))return ri(t,e,c,0),Qt===null&&ii(),!1}catch{}finally{}if(n=Pr(t,e,c,i),n!==null)return Ie(n,t,i),au(n,e,i),!0}return!1}function ho(t,e,n,i){if(i={lane:2,revertLane:qo(),action:i,hasEagerState:!1,eagerState:null,next:null},Ei(t)){if(e)throw Error(s(479))}else e=Pr(t,n,i,2),e!==null&&Ie(e,t,2)}function Ei(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function nu(t,e){ka=_i=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function au(t,e,n){if((n&4194048)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ln(t,n)}}var xi={readContext:Ee,use:bi,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useLayoutEffect:ae,useInsertionEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useSyncExternalStore:ae,useId:ae,useHostTransitionStatus:ae,useFormState:ae,useActionState:ae,useOptimistic:ae,useMemoCache:ae,useCacheRefresh:ae},su={readContext:Ee,use:bi,useCallback:function(t,e){return we().memoizedState=[t,e===void 0?null:e],t},useContext:Ee,useEffect:Hc,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Si(4194308,4,Xc.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Si(4194308,4,t,e)},useInsertionEffect:function(t,e){Si(4,2,t,e)},useMemo:function(t,e){var n=we();e=e===void 0?null:e;var i=t();if(ra){xe(!0);try{t()}finally{xe(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=we();if(n!==void 0){var c=n(e);if(ra){xe(!0);try{n(e)}finally{xe(!1)}}}else c=e;return i.memoizedState=i.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},i.queue=t,t=t.dispatch=nf.bind(null,kt,t),[i.memoizedState,t]},useRef:function(t){var e=we();return t={current:t},e.memoizedState=t},useState:function(t){t=io(t);var e=t.queue,n=eu.bind(null,kt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:oo,useDeferredValue:function(t,e){var n=we();return lo(n,t,e)},useTransition:function(){var t=io(!1);return t=Kc.bind(null,kt,t.queue,!0,!1),we().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=kt,c=we();if(Ht){if(n===void 0)throw Error(s(407));n=n()}else{if(n=e(),Qt===null)throw Error(s(349));(Ut&124)!==0||Cc(i,e,n)}c.memoizedState=n;var f={value:n,getSnapshot:e};return c.queue=f,Hc(wc.bind(null,i,f,t),[t]),i.flags|=2048,Na(9,Ai(),Rc.bind(null,i,f,n,e),null),n},useId:function(){var t=we(),e=Qt.identifierPrefix;if(Ht){var n=fn,i=dn;n=(i&~(1<<32-qt(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=yi++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=Kd++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:uo,useFormState:Nc,useActionState:Nc,useOptimistic:function(t){var e=we();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ho.bind(null,kt,!0,n),n.dispatch=e,[t,e]},useMemoCache:no,useCacheRefresh:function(){return we().memoizedState=ef.bind(null,kt)}},iu={readContext:Ee,use:bi,useCallback:Yc,useContext:Ee,useEffect:zc,useImperativeHandle:$c,useInsertionEffect:Gc,useLayoutEffect:qc,useMemo:Vc,useReducer:vi,useRef:jc,useState:function(){return vi(gn)},useDebugValue:oo,useDeferredValue:function(t,e){var n=ce();return Wc(n,Yt.memoizedState,t,e)},useTransition:function(){var t=vi(gn)[0],e=ce().memoizedState;return[typeof t=="boolean"?t:Es(t),e]},useSyncExternalStore:xc,useId:Jc,useHostTransitionStatus:uo,useFormState:Ic,useActionState:Ic,useOptimistic:function(t,e){var n=ce();return Pc(n,Yt,t,e)},useMemoCache:no,useCacheRefresh:tu},af={readContext:Ee,use:bi,useCallback:Yc,useContext:Ee,useEffect:zc,useImperativeHandle:$c,useInsertionEffect:Gc,useLayoutEffect:qc,useMemo:Vc,useReducer:so,useRef:jc,useState:function(){return so(gn)},useDebugValue:oo,useDeferredValue:function(t,e){var n=ce();return Yt===null?lo(n,t,e):Wc(n,Yt.memoizedState,t,e)},useTransition:function(){var t=so(gn)[0],e=ce().memoizedState;return[typeof t=="boolean"?t:Es(t),e]},useSyncExternalStore:xc,useId:Jc,useHostTransitionStatus:uo,useFormState:Bc,useActionState:Bc,useOptimistic:function(t,e){var n=ce();return Yt!==null?Pc(n,Yt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:no,useCacheRefresh:tu},Ia=null,Rs=0;function Ci(t){var e=Rs;return Rs+=1,Ia===null&&(Ia=[]),gc(Ia,t,e)}function ws(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ri(t,e){throw e.$$typeof===d?Error(s(525)):(t=Object.prototype.toString.call(e),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ru(t){var e=t._init;return e(t._payload)}function ou(t){function e(et,Z){if(t){var st=et.deletions;st===null?(et.deletions=[Z],et.flags|=16):st.push(Z)}}function n(et,Z){if(!t)return null;for(;Z!==null;)e(et,Z),Z=Z.sibling;return null}function i(et){for(var Z=new Map;et!==null;)et.key!==null?Z.set(et.key,et):Z.set(et.index,et),et=et.sibling;return Z}function c(et,Z){return et=hn(et,Z),et.index=0,et.sibling=null,et}function f(et,Z,st){return et.index=st,t?(st=et.alternate,st!==null?(st=st.index,st<Z?(et.flags|=67108866,Z):st):(et.flags|=67108866,Z)):(et.flags|=1048576,Z)}function M(et){return t&&et.alternate===null&&(et.flags|=67108866),et}function L(et,Z,st,pt){return Z===null||Z.tag!==6?(Z=Dr(st,et.mode,pt),Z.return=et,Z):(Z=c(Z,st),Z.return=et,Z)}function K(et,Z,st,pt){var Ct=st.type;return Ct===p?dt(et,Z,st.props.children,pt,st.key):Z!==null&&(Z.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Y&&ru(Ct)===Z.type)?(Z=c(Z,st.props),ws(Z,st),Z.return=et,Z):(Z=li(st.type,st.key,st.props,null,et.mode,pt),ws(Z,st),Z.return=et,Z)}function it(et,Z,st,pt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==st.containerInfo||Z.stateNode.implementation!==st.implementation?(Z=Fr(st,et.mode,pt),Z.return=et,Z):(Z=c(Z,st.children||[]),Z.return=et,Z)}function dt(et,Z,st,pt,Ct){return Z===null||Z.tag!==7?(Z=Zn(st,et.mode,pt,Ct),Z.return=et,Z):(Z=c(Z,st),Z.return=et,Z)}function gt(et,Z,st){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Dr(""+Z,et.mode,st),Z.return=et,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return st=li(Z.type,Z.key,Z.props,null,et.mode,st),ws(st,Z),st.return=et,st;case _:return Z=Fr(Z,et.mode,st),Z.return=et,Z;case Y:var pt=Z._init;return Z=pt(Z._payload),gt(et,Z,st)}if(At(Z)||_t(Z))return Z=Zn(Z,et.mode,st,null),Z.return=et,Z;if(typeof Z.then=="function")return gt(et,Ci(Z),st);if(Z.$$typeof===B)return gt(et,di(et,Z),st);Ri(et,Z)}return null}function rt(et,Z,st,pt){var Ct=Z!==null?Z.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Ct!==null?null:L(et,Z,""+st,pt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case A:return st.key===Ct?K(et,Z,st,pt):null;case _:return st.key===Ct?it(et,Z,st,pt):null;case Y:return Ct=st._init,st=Ct(st._payload),rt(et,Z,st,pt)}if(At(st)||_t(st))return Ct!==null?null:dt(et,Z,st,pt,null);if(typeof st.then=="function")return rt(et,Z,Ci(st),pt);if(st.$$typeof===B)return rt(et,Z,di(et,st),pt);Ri(et,st)}return null}function lt(et,Z,st,pt,Ct){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return et=et.get(st)||null,L(Z,et,""+pt,Ct);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case A:return et=et.get(pt.key===null?st:pt.key)||null,K(Z,et,pt,Ct);case _:return et=et.get(pt.key===null?st:pt.key)||null,it(Z,et,pt,Ct);case Y:var Lt=pt._init;return pt=Lt(pt._payload),lt(et,Z,st,pt,Ct)}if(At(pt)||_t(pt))return et=et.get(st)||null,dt(Z,et,pt,Ct,null);if(typeof pt.then=="function")return lt(et,Z,st,Ci(pt),Ct);if(pt.$$typeof===B)return lt(et,Z,st,di(Z,pt),Ct);Ri(Z,pt)}return null}function Ot(et,Z,st,pt){for(var Ct=null,Lt=null,wt=Z,Pt=Z=0,_e=null;wt!==null&&Pt<st.length;Pt++){wt.index>Pt?(_e=wt,wt=null):_e=wt.sibling;var Bt=rt(et,wt,st[Pt],pt);if(Bt===null){wt===null&&(wt=_e);break}t&&wt&&Bt.alternate===null&&e(et,wt),Z=f(Bt,Z,Pt),Lt===null?Ct=Bt:Lt.sibling=Bt,Lt=Bt,wt=_e}if(Pt===st.length)return n(et,wt),Ht&&ta(et,Pt),Ct;if(wt===null){for(;Pt<st.length;Pt++)wt=gt(et,st[Pt],pt),wt!==null&&(Z=f(wt,Z,Pt),Lt===null?Ct=wt:Lt.sibling=wt,Lt=wt);return Ht&&ta(et,Pt),Ct}for(wt=i(wt);Pt<st.length;Pt++)_e=lt(wt,et,Pt,st[Pt],pt),_e!==null&&(t&&_e.alternate!==null&&wt.delete(_e.key===null?Pt:_e.key),Z=f(_e,Z,Pt),Lt===null?Ct=_e:Lt.sibling=_e,Lt=_e);return t&&wt.forEach(function($n){return e(et,$n)}),Ht&&ta(et,Pt),Ct}function Mt(et,Z,st,pt){if(st==null)throw Error(s(151));for(var Ct=null,Lt=null,wt=Z,Pt=Z=0,_e=null,Bt=st.next();wt!==null&&!Bt.done;Pt++,Bt=st.next()){wt.index>Pt?(_e=wt,wt=null):_e=wt.sibling;var $n=rt(et,wt,Bt.value,pt);if($n===null){wt===null&&(wt=_e);break}t&&wt&&$n.alternate===null&&e(et,wt),Z=f($n,Z,Pt),Lt===null?Ct=$n:Lt.sibling=$n,Lt=$n,wt=_e}if(Bt.done)return n(et,wt),Ht&&ta(et,Pt),Ct;if(wt===null){for(;!Bt.done;Pt++,Bt=st.next())Bt=gt(et,Bt.value,pt),Bt!==null&&(Z=f(Bt,Z,Pt),Lt===null?Ct=Bt:Lt.sibling=Bt,Lt=Bt);return Ht&&ta(et,Pt),Ct}for(wt=i(wt);!Bt.done;Pt++,Bt=st.next())Bt=lt(wt,et,Pt,Bt.value,pt),Bt!==null&&(t&&Bt.alternate!==null&&wt.delete(Bt.key===null?Pt:Bt.key),Z=f(Bt,Z,Pt),Lt===null?Ct=Bt:Lt.sibling=Bt,Lt=Bt);return t&&wt.forEach(function(ip){return e(et,ip)}),Ht&&ta(et,Pt),Ct}function Wt(et,Z,st,pt){if(typeof st=="object"&&st!==null&&st.type===p&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case A:t:{for(var Ct=st.key;Z!==null;){if(Z.key===Ct){if(Ct=st.type,Ct===p){if(Z.tag===7){n(et,Z.sibling),pt=c(Z,st.props.children),pt.return=et,et=pt;break t}}else if(Z.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Y&&ru(Ct)===Z.type){n(et,Z.sibling),pt=c(Z,st.props),ws(pt,st),pt.return=et,et=pt;break t}n(et,Z);break}else e(et,Z);Z=Z.sibling}st.type===p?(pt=Zn(st.props.children,et.mode,pt,st.key),pt.return=et,et=pt):(pt=li(st.type,st.key,st.props,null,et.mode,pt),ws(pt,st),pt.return=et,et=pt)}return M(et);case _:t:{for(Ct=st.key;Z!==null;){if(Z.key===Ct)if(Z.tag===4&&Z.stateNode.containerInfo===st.containerInfo&&Z.stateNode.implementation===st.implementation){n(et,Z.sibling),pt=c(Z,st.children||[]),pt.return=et,et=pt;break t}else{n(et,Z);break}else e(et,Z);Z=Z.sibling}pt=Fr(st,et.mode,pt),pt.return=et,et=pt}return M(et);case Y:return Ct=st._init,st=Ct(st._payload),Wt(et,Z,st,pt)}if(At(st))return Ot(et,Z,st,pt);if(_t(st)){if(Ct=_t(st),typeof Ct!="function")throw Error(s(150));return st=Ct.call(st),Mt(et,Z,st,pt)}if(typeof st.then=="function")return Wt(et,Z,Ci(st),pt);if(st.$$typeof===B)return Wt(et,Z,di(et,st),pt);Ri(et,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Z!==null&&Z.tag===6?(n(et,Z.sibling),pt=c(Z,st),pt.return=et,et=pt):(n(et,Z),pt=Dr(st,et.mode,pt),pt.return=et,et=pt),M(et)):n(et,Z)}return function(et,Z,st,pt){try{Rs=0;var Ct=Wt(et,Z,st,pt);return Ia=null,Ct}catch(wt){if(wt===_s||wt===pi)throw wt;var Lt=De(29,wt,null,et.mode);return Lt.lanes=pt,Lt.return=et,Lt}finally{}}}var Ua=ou(!0),lu=ou(!1),Ye=T(null),nn=null;function On(t){var e=t.alternate;N(de,de.current&1),N(Ye,t),nn===null&&(e===null||Fa.current!==null||e.memoizedState!==null)&&(nn=t)}function cu(t){if(t.tag===22){if(N(de,de.current),N(Ye,t),nn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(nn=t)}}else Dn()}function Dn(){N(de,de.current),N(Ye,Ye.current)}function _n(t){I(Ye),nn===t&&(nn=null),I(de)}var de=T(0);function wi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||nl(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function fo(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:u({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var po={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ne(),c=Tn(i);c.payload=e,n!=null&&(c.callback=n),e=Mn(t,c,i),e!==null&&(Ie(e,t,i),bs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ne(),c=Tn(i);c.tag=1,c.payload=e,n!=null&&(c.callback=n),e=Mn(t,c,i),e!==null&&(Ie(e,t,i),bs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),i=Tn(n);i.tag=2,e!=null&&(i.callback=e),e=Mn(t,i,n),e!==null&&(Ie(e,t,n),bs(e,t,n))}};function uu(t,e,n,i,c,f,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,f,M):e.prototype&&e.prototype.isPureReactComponent?!cs(n,i)||!cs(c,f):!0}function hu(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&po.enqueueReplaceState(e,e.state,null)}function oa(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=u({},n));for(var c in t)n[c]===void 0&&(n[c]=t[c])}return n}var Ti=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function du(t){Ti(t)}function fu(t){console.error(t)}function pu(t){Ti(t)}function Mi(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function mu(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function mo(t,e,n){return n=Tn(n),n.tag=3,n.payload={element:null},n.callback=function(){Mi(t,e)},n}function gu(t){return t=Tn(t),t.tag=3,t}function _u(t,e,n,i){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;t.payload=function(){return c(f)},t.callback=function(){mu(e,n,i)}}var M=n.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(t.callback=function(){mu(e,n,i),typeof c!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var L=i.stack;this.componentDidCatch(i.value,{componentStack:L!==null?L:""})})}function sf(t,e,n,i,c){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&ps(e,n,c,!0),n=Ye.current,n!==null){switch(n.tag){case 13:return nn===null?Bo():n.alternate===null&&ee===0&&(ee=3),n.flags&=-257,n.flags|=65536,n.lanes=c,i===Gr?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Ho(t,i,c)),!1;case 22:return n.flags|=65536,i===Gr?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Ho(t,i,c)),!1}throw Error(s(435,n.tag))}return Ho(t,i,c),Bo(),!1}if(Ht)return e=Ye.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=c,i!==Nr&&(t=Error(s(422),{cause:i}),fs(Ge(t,n)))):(i!==Nr&&(e=Error(s(423),{cause:i}),fs(Ge(e,n))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,i=Ge(i,n),c=mo(t.stateNode,i,c),$r(t,c),ee!==4&&(ee=2)),!1;var f=Error(s(520),{cause:i});if(f=Ge(f,n),ks===null?ks=[f]:ks.push(f),ee!==4&&(ee=2),e===null)return!0;i=Ge(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=c&-c,n.lanes|=t,t=mo(n.stateNode,i,t),$r(n,t),!1;case 1:if(e=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Un===null||!Un.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=gu(c),_u(c,t,n,i),$r(n,c),!1}n=n.return}while(n!==null);return!1}var yu=Error(s(461)),me=!1;function ve(t,e,n,i){e.child=t===null?lu(e,null,n,i):Ua(e,t.child,n,i)}function bu(t,e,n,i,c){n=n.render;var f=e.ref;if("ref"in i){var M={};for(var L in i)L!=="ref"&&(M[L]=i[L])}else M=i;return sa(e),i=Qr(t,e,n,M,f,c),L=Zr(),t!==null&&!me?(Jr(t,e,c),yn(t,e,c)):(Ht&&L&&kr(e),e.flags|=1,ve(t,e,i,c),e.child)}function vu(t,e,n,i,c){if(t===null){var f=n.type;return typeof f=="function"&&!Or(f)&&f.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=f,Au(t,e,f,i,c)):(t=li(n.type,null,i,e,e.mode,c),t.ref=e.ref,t.return=e,e.child=t)}if(f=t.child,!Eo(t,c)){var M=f.memoizedProps;if(n=n.compare,n=n!==null?n:cs,n(M,i)&&t.ref===e.ref)return yn(t,e,c)}return e.flags|=1,t=hn(f,i),t.ref=e.ref,t.return=e,e.child=t}function Au(t,e,n,i,c){if(t!==null){var f=t.memoizedProps;if(cs(f,i)&&t.ref===e.ref)if(me=!1,e.pendingProps=i=f,Eo(t,c))(t.flags&131072)!==0&&(me=!0);else return e.lanes=t.lanes,yn(t,e,c)}return go(t,e,n,i,c)}function Su(t,e,n){var i=e.pendingProps,c=i.children,f=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if((e.flags&128)!==0){if(i=f!==null?f.baseLanes|n:n,t!==null){for(c=e.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;e.childLanes=f&~i}else e.childLanes=0,e.child=null;return Eu(t,e,i,n)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&fi(e,f!==null?f.cachePool:null),f!==null?Ac(e,f):Vr(),cu(e);else return e.lanes=e.childLanes=536870912,Eu(t,e,f!==null?f.baseLanes|n:n,n)}else f!==null?(fi(e,f.cachePool),Ac(e,f),Dn(),e.memoizedState=null):(t!==null&&fi(e,null),Vr(),Dn());return ve(t,e,c,n),e.child}function Eu(t,e,n,i){var c=zr();return c=c===null?null:{parent:he._currentValue,pool:c},e.memoizedState={baseLanes:n,cachePool:c},t!==null&&fi(e,null),Vr(),cu(e),t!==null&&ps(t,e,i,!0),null}function Pi(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function go(t,e,n,i,c){return sa(e),n=Qr(t,e,n,i,void 0,c),i=Zr(),t!==null&&!me?(Jr(t,e,c),yn(t,e,c)):(Ht&&i&&kr(e),e.flags|=1,ve(t,e,n,c),e.child)}function xu(t,e,n,i,c,f){return sa(e),e.updateQueue=null,n=Ec(e,i,n,c),Sc(t),i=Zr(),t!==null&&!me?(Jr(t,e,f),yn(t,e,f)):(Ht&&i&&kr(e),e.flags|=1,ve(t,e,n,f),e.child)}function Cu(t,e,n,i,c){if(sa(e),e.stateNode===null){var f=Ta,M=n.contextType;typeof M=="object"&&M!==null&&(f=Ee(M)),f=new n(i,f),e.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=po,e.stateNode=f,f._reactInternals=e,f=e.stateNode,f.props=i,f.state=e.memoizedState,f.refs={},qr(e),M=n.contextType,f.context=typeof M=="object"&&M!==null?Ee(M):Ta,f.state=e.memoizedState,M=n.getDerivedStateFromProps,typeof M=="function"&&(fo(e,n,M,i),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(M=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),M!==f.state&&po.enqueueReplaceState(f,f.state,null),As(e,i,f,c),vs(),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){f=e.stateNode;var L=e.memoizedProps,K=oa(n,L);f.props=K;var it=f.context,dt=n.contextType;M=Ta,typeof dt=="object"&&dt!==null&&(M=Ee(dt));var gt=n.getDerivedStateFromProps;dt=typeof gt=="function"||typeof f.getSnapshotBeforeUpdate=="function",L=e.pendingProps!==L,dt||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(L||it!==M)&&hu(e,f,i,M),wn=!1;var rt=e.memoizedState;f.state=rt,As(e,i,f,c),vs(),it=e.memoizedState,L||rt!==it||wn?(typeof gt=="function"&&(fo(e,n,gt,i),it=e.memoizedState),(K=wn||uu(e,n,K,i,rt,it,M))?(dt||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=it),f.props=i,f.state=it,f.context=M,i=K):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,Xr(t,e),M=e.memoizedProps,dt=oa(n,M),f.props=dt,gt=e.pendingProps,rt=f.context,it=n.contextType,K=Ta,typeof it=="object"&&it!==null&&(K=Ee(it)),L=n.getDerivedStateFromProps,(it=typeof L=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(M!==gt||rt!==K)&&hu(e,f,i,K),wn=!1,rt=e.memoizedState,f.state=rt,As(e,i,f,c),vs();var lt=e.memoizedState;M!==gt||rt!==lt||wn||t!==null&&t.dependencies!==null&&hi(t.dependencies)?(typeof L=="function"&&(fo(e,n,L,i),lt=e.memoizedState),(dt=wn||uu(e,n,dt,i,rt,lt,K)||t!==null&&t.dependencies!==null&&hi(t.dependencies))?(it||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,lt,K),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,lt,K)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||M===t.memoizedProps&&rt===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&rt===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=lt),f.props=i,f.state=lt,f.context=K,i=dt):(typeof f.componentDidUpdate!="function"||M===t.memoizedProps&&rt===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&rt===t.memoizedState||(e.flags|=1024),i=!1)}return f=i,Pi(t,e),i=(e.flags&128)!==0,f||i?(f=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:f.render(),e.flags|=1,t!==null&&i?(e.child=Ua(e,t.child,null,c),e.child=Ua(e,null,n,c)):ve(t,e,n,c),e.memoizedState=f.state,t=e.child):t=yn(t,e,c),t}function Ru(t,e,n,i){return ds(),e.flags|=256,ve(t,e,n,i),e.child}var _o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yo(t){return{baseLanes:t,cachePool:fc()}}function bo(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ve),t}function wu(t,e,n){var i=e.pendingProps,c=!1,f=(e.flags&128)!==0,M;if((M=f)||(M=t!==null&&t.memoizedState===null?!1:(de.current&2)!==0),M&&(c=!0,e.flags&=-129),M=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ht){if(c?On(e):Dn(),Ht){var L=te,K;if(K=L){t:{for(K=L,L=en;K.nodeType!==8;){if(!L){L=null;break t}if(K=Je(K.nextSibling),K===null){L=null;break t}}L=K}L!==null?(e.memoizedState={dehydrated:L,treeContext:Jn!==null?{id:dn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},K=De(18,null,null,0),K.stateNode=L,K.return=e,e.child=K,Ce=e,te=null,K=!0):K=!1}K||na(e)}if(L=e.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return nl(L)?e.lanes=32:e.lanes=536870912,null;_n(e)}return L=i.children,i=i.fallback,c?(Dn(),c=e.mode,L=Oi({mode:"hidden",children:L},c),i=Zn(i,c,n,null),L.return=e,i.return=e,L.sibling=i,e.child=L,c=e.child,c.memoizedState=yo(n),c.childLanes=bo(t,M,n),e.memoizedState=_o,i):(On(e),vo(e,L))}if(K=t.memoizedState,K!==null&&(L=K.dehydrated,L!==null)){if(f)e.flags&256?(On(e),e.flags&=-257,e=Ao(t,e,n)):e.memoizedState!==null?(Dn(),e.child=t.child,e.flags|=128,e=null):(Dn(),c=i.fallback,L=e.mode,i=Oi({mode:"visible",children:i.children},L),c=Zn(c,L,n,null),c.flags|=2,i.return=e,c.return=e,i.sibling=c,e.child=i,Ua(e,t.child,null,n),i=e.child,i.memoizedState=yo(n),i.childLanes=bo(t,M,n),e.memoizedState=_o,e=c);else if(On(e),nl(L)){if(M=L.nextSibling&&L.nextSibling.dataset,M)var it=M.dgst;M=it,i=Error(s(419)),i.stack="",i.digest=M,fs({value:i,source:null,stack:null}),e=Ao(t,e,n)}else if(me||ps(t,e,n,!1),M=(n&t.childLanes)!==0,me||M){if(M=Qt,M!==null&&(i=n&-n,i=(i&42)!==0?1:Be(i),i=(i&(M.suspendedLanes|n))!==0?0:i,i!==0&&i!==K.retryLane))throw K.retryLane=i,wa(t,i),Ie(M,t,i),yu;L.data==="$?"||Bo(),e=Ao(t,e,n)}else L.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=K.treeContext,te=Je(L.nextSibling),Ce=e,Ht=!0,ea=null,en=!1,t!==null&&(Xe[$e++]=dn,Xe[$e++]=fn,Xe[$e++]=Jn,dn=t.id,fn=t.overflow,Jn=e),e=vo(e,i.children),e.flags|=4096);return e}return c?(Dn(),c=i.fallback,L=e.mode,K=t.child,it=K.sibling,i=hn(K,{mode:"hidden",children:i.children}),i.subtreeFlags=K.subtreeFlags&65011712,it!==null?c=hn(it,c):(c=Zn(c,L,n,null),c.flags|=2),c.return=e,i.return=e,i.sibling=c,e.child=i,i=c,c=e.child,L=t.child.memoizedState,L===null?L=yo(n):(K=L.cachePool,K!==null?(it=he._currentValue,K=K.parent!==it?{parent:it,pool:it}:K):K=fc(),L={baseLanes:L.baseLanes|n,cachePool:K}),c.memoizedState=L,c.childLanes=bo(t,M,n),e.memoizedState=_o,i):(On(e),n=t.child,t=n.sibling,n=hn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(M=e.deletions,M===null?(e.deletions=[t],e.flags|=16):M.push(t)),e.child=n,e.memoizedState=null,n)}function vo(t,e){return e=Oi({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Oi(t,e){return t=De(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ao(t,e,n){return Ua(e,t.child,null,n),t=vo(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tu(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ur(t.return,e,n)}function So(t,e,n,i,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(f.isBackwards=e,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=c)}function Mu(t,e,n){var i=e.pendingProps,c=i.revealOrder,f=i.tail;if(ve(t,e,i.children,n),i=de.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tu(t,n,e);else if(t.tag===19)Tu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(N(de,i),c){case"forwards":for(n=e.child,c=null;n!==null;)t=n.alternate,t!==null&&wi(t)===null&&(c=n),n=n.sibling;n=c,n===null?(c=e.child,e.child=null):(c=n.sibling,n.sibling=null),So(e,!1,c,n,f);break;case"backwards":for(n=null,c=e.child,e.child=null;c!==null;){if(t=c.alternate,t!==null&&wi(t)===null){e.child=c;break}t=c.sibling,c.sibling=n,n=c,c=t}So(e,!0,n,null,f);break;case"together":So(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),In|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(ps(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(s(153));if(e.child!==null){for(t=e.child,n=hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eo(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&hi(t)))}function rf(t,e,n){switch(e.tag){case 3:F(e,e.stateNode.containerInfo),Rn(e,he,t.memoizedState.cache),ds();break;case 27:case 5:q(e);break;case 4:F(e,e.stateNode.containerInfo);break;case 10:Rn(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(On(e),e.flags|=128,null):(n&e.child.childLanes)!==0?wu(t,e,n):(On(e),t=yn(t,e,n),t!==null?t.sibling:null);On(e);break;case 19:var c=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(ps(t,e,n,!1),i=(n&e.childLanes)!==0),c){if(i)return Mu(t,e,n);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),N(de,de.current),i)break;return null;case 22:case 23:return e.lanes=0,Su(t,e,n);case 24:Rn(e,he,t.memoizedState.cache)}return yn(t,e,n)}function Pu(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)me=!0;else{if(!Eo(t,n)&&(e.flags&128)===0)return me=!1,rf(t,e,n);me=(t.flags&131072)!==0}else me=!1,Ht&&(e.flags&1048576)!==0&&rc(e,ui,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var i=e.elementType,c=i._init;if(i=c(i._payload),e.type=i,typeof i=="function")Or(i)?(t=oa(i,t),e.tag=1,e=Cu(null,e,i,t,n)):(e.tag=0,e=go(null,e,i,t,n));else{if(i!=null){if(c=i.$$typeof,c===U){e.tag=11,e=bu(null,e,i,t,n);break t}else if(c===$){e.tag=14,e=vu(null,e,i,t,n);break t}}throw e=yt(i)||i,Error(s(306,e,""))}}return e;case 0:return go(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,c=oa(i,e.pendingProps),Cu(t,e,i,c,n);case 3:t:{if(F(e,e.stateNode.containerInfo),t===null)throw Error(s(387));i=e.pendingProps;var f=e.memoizedState;c=f.element,Xr(t,e),As(e,i,null,n);var M=e.memoizedState;if(i=M.cache,Rn(e,he,i),i!==f.cache&&Br(e,[he],n,!0),vs(),i=M.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:M.cache},e.updateQueue.baseState=f,e.memoizedState=f,e.flags&256){e=Ru(t,e,i,n);break t}else if(i!==c){c=Ge(Error(s(424)),e),fs(c),e=Ru(t,e,i,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(te=Je(t.firstChild),Ce=e,Ht=!0,ea=null,en=!0,n=lu(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ds(),i===c){e=yn(t,e,n);break t}ve(t,e,i,n)}e=e.child}return e;case 26:return Pi(t,e),t===null?(n=kh(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ht||(n=e.type,t=e.pendingProps,i=Xi(v.current).createElement(n),i[oe]=e,i[fe]=t,Se(i,n,t),pe(i),e.stateNode=i):e.memoizedState=kh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return q(e),t===null&&Ht&&(i=e.stateNode=Oh(e.type,e.pendingProps,v.current),Ce=e,en=!0,c=te,Hn(e.type)?(al=c,te=Je(i.firstChild)):te=c),ve(t,e,e.pendingProps.children,n),Pi(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ht&&((c=i=te)&&(i=kf(i,e.type,e.pendingProps,en),i!==null?(e.stateNode=i,Ce=e,te=Je(i.firstChild),en=!1,c=!0):c=!1),c||na(e)),q(e),c=e.type,f=e.pendingProps,M=t!==null?t.memoizedProps:null,i=f.children,Jo(c,f)?i=null:M!==null&&Jo(c,M)&&(e.flags|=32),e.memoizedState!==null&&(c=Qr(t,e,Qd,null,null,n),Gs._currentValue=c),Pi(t,e),ve(t,e,i,n),e.child;case 6:return t===null&&Ht&&((t=n=te)&&(n=Lf(n,e.pendingProps,en),n!==null?(e.stateNode=n,Ce=e,te=null,t=!0):t=!1),t||na(e)),null;case 13:return wu(t,e,n);case 4:return F(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ua(e,null,i,n):ve(t,e,i,n),e.child;case 11:return bu(t,e,e.type,e.pendingProps,n);case 7:return ve(t,e,e.pendingProps,n),e.child;case 8:return ve(t,e,e.pendingProps.children,n),e.child;case 12:return ve(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Rn(e,e.type,i.value),ve(t,e,i.children,n),e.child;case 9:return c=e.type._context,i=e.pendingProps.children,sa(e),c=Ee(c),i=i(c),e.flags|=1,ve(t,e,i,n),e.child;case 14:return vu(t,e,e.type,e.pendingProps,n);case 15:return Au(t,e,e.type,e.pendingProps,n);case 19:return Mu(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=Oi(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=hn(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Su(t,e,n);case 24:return sa(e),i=Ee(he),t===null?(c=zr(),c===null&&(c=Qt,f=jr(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),e.memoizedState={parent:i,cache:c},qr(e),Rn(e,he,c)):((t.lanes&n)!==0&&(Xr(t,e),As(e,null,null,n),vs()),c=t.memoizedState,f=e.memoizedState,c.parent!==i?(c={parent:i,cache:i},e.memoizedState=c,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=c),Rn(e,he,i)):(i=f.cache,Rn(e,he,i),i!==c.cache&&Br(e,[he],n,!0))),ve(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(s(156,e.tag))}function bn(t){t.flags|=4}function Ou(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Bh(e)){if(e=Ye.current,e!==null&&((Ut&4194048)===Ut?nn!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||e!==nn))throw ys=Gr,pc;t.flags|=8192}}function Di(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?re():536870912,t.lanes|=e,za|=e)}function Ts(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var c=t.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function of(t,e,n){var i=e.pendingProps;switch(Lr(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return Jt(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),mn(he),z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hs(e)?bn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,cc())),Jt(e),null;case 26:return n=e.memoizedState,t===null?(bn(e),n!==null?(Jt(e),Ou(e,n)):(Jt(e),e.flags&=-16777217)):n?n!==t.memoizedState?(bn(e),Jt(e),Ou(e,n)):(Jt(e),e.flags&=-16777217):(t.memoizedProps!==i&&bn(e),Jt(e),e.flags&=-16777217),null;case 27:W(e),n=v.current;var c=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&bn(e);else{if(!i){if(e.stateNode===null)throw Error(s(166));return Jt(e),null}t=G.current,hs(e)?oc(e):(t=Oh(c,i,n),e.stateNode=t,bn(e))}return Jt(e),null;case 5:if(W(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&bn(e);else{if(!i){if(e.stateNode===null)throw Error(s(166));return Jt(e),null}if(t=G.current,hs(e))oc(e);else{switch(c=Xi(v.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?c.createElement("select",{is:i.is}):c.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?c.createElement(n,{is:i.is}):c.createElement(n)}}t[oe]=e,t[fe]=i;t:for(c=e.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break t;for(;c.sibling===null;){if(c.return===null||c.return===e)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}e.stateNode=t;t:switch(Se(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&bn(e)}}return Jt(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&bn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(s(166));if(t=v.current,hs(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,c=Ce,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}t[oe]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||xh(t.nodeValue,n)),t||na(e)}else t=Xi(t).createTextNode(i),t[oe]=e,e.stateNode=t}return Jt(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=hs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(s(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[oe]=e}else ds(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Jt(e),c=!1}else c=cc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return e.flags&256?(_n(e),e):(_n(e),null)}if(_n(e),(e.flags&128)!==0)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool);var f=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Di(e,e.updateQueue),Jt(e),null;case 4:return z(),t===null&&Vo(e.stateNode.containerInfo),Jt(e),null;case 10:return mn(e.type),Jt(e),null;case 19:if(I(de),c=e.memoizedState,c===null)return Jt(e),null;if(i=(e.flags&128)!==0,f=c.rendering,f===null)if(i)Ts(c,!1);else{if(ee!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(f=wi(t),f!==null){for(e.flags|=128,Ts(c,!1),t=f.updateQueue,e.updateQueue=t,Di(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ic(n,t),n=n.sibling;return N(de,de.current&1|2),e.child}t=t.sibling}c.tail!==null&&ut()>Li&&(e.flags|=128,i=!0,Ts(c,!1),e.lanes=4194304)}else{if(!i)if(t=wi(f),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Di(e,t),Ts(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Ht)return Jt(e),null}else 2*ut()-c.renderingStartTime>Li&&n!==536870912&&(e.flags|=128,i=!0,Ts(c,!1),e.lanes=4194304);c.isBackwards?(f.sibling=e.child,e.child=f):(t=c.last,t!==null?t.sibling=f:e.child=f,c.last=f)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=ut(),e.sibling=null,t=de.current,N(de,i?t&1|2:t&1),e):(Jt(e),null);case 22:case 23:return _n(e),Wr(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?(n&536870912)!==0&&(e.flags&128)===0&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),n=e.updateQueue,n!==null&&Di(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&I(ia),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),mn(he),Jt(e),null;case 25:return null;case 30:return null}throw Error(s(156,e.tag))}function lf(t,e){switch(Lr(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mn(he),z(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return W(e),null;case 13:if(_n(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(s(340));ds()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return I(de),null;case 4:return z(),null;case 10:return mn(e.type),null;case 22:case 23:return _n(e),Wr(),t!==null&&I(ia),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return mn(he),null;case 25:return null;default:return null}}function Du(t,e){switch(Lr(e),e.tag){case 3:mn(he),z();break;case 26:case 27:case 5:W(e);break;case 4:z();break;case 13:_n(e);break;case 19:I(de);break;case 10:mn(e.type);break;case 22:case 23:_n(e),Wr(),t!==null&&I(ia);break;case 24:mn(he)}}function Ms(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var c=i.next;n=c;do{if((n.tag&t)===t){i=void 0;var f=n.create,M=n.inst;i=f(),M.destroy=i}n=n.next}while(n!==c)}}catch(L){Kt(e,e.return,L)}}function Fn(t,e,n){try{var i=e.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&t)===t){var M=i.inst,L=M.destroy;if(L!==void 0){M.destroy=void 0,c=e;var K=n,it=L;try{it()}catch(dt){Kt(c,K,dt)}}}i=i.next}while(i!==f)}}catch(dt){Kt(e,e.return,dt)}}function Fu(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{vc(e,n)}catch(i){Kt(t,t.return,i)}}}function ku(t,e,n){n.props=oa(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Kt(t,e,i)}}function Ps(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(c){Kt(t,e,c)}}function an(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(c){Kt(t,e,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Kt(t,e,c)}else n.current=null}function Lu(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(c){Kt(t,t.return,c)}}function xo(t,e,n){try{var i=t.stateNode;Mf(i,t.type,n,e),i[fe]=e}catch(c){Kt(t,t.return,c)}}function Nu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hn(t.type)||t.tag===4}function Co(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Nu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hn(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ro(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qi));else if(i!==4&&(i===27&&Hn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ro(t,e,n),t=t.sibling;t!==null;)Ro(t,e,n),t=t.sibling}function Fi(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Hn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Fi(t,e,n),t=t.sibling;t!==null;)Fi(t,e,n),t=t.sibling}function Iu(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,c=e.attributes;c.length;)e.removeAttributeNode(c[0]);Se(e,i,n),e[oe]=t,e[fe]=n}catch(f){Kt(t,t.return,f)}}var vn=!1,se=!1,wo=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,ge=null;function cf(t,e){if(t=t.containerInfo,Qo=Qi,t=Wl(t),xr(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break t}var M=0,L=-1,K=-1,it=0,dt=0,gt=t,rt=null;e:for(;;){for(var lt;gt!==n||c!==0&&gt.nodeType!==3||(L=M+c),gt!==f||i!==0&&gt.nodeType!==3||(K=M+i),gt.nodeType===3&&(M+=gt.nodeValue.length),(lt=gt.firstChild)!==null;)rt=gt,gt=lt;for(;;){if(gt===t)break e;if(rt===n&&++it===c&&(L=M),rt===f&&++dt===i&&(K=M),(lt=gt.nextSibling)!==null)break;gt=rt,rt=gt.parentNode}gt=lt}n=L===-1||K===-1?null:{start:L,end:K}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zo={focusedElem:t,selectionRange:n},Qi=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){switch(e=ge,f=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,n=e,c=f.memoizedProps,f=f.memoizedState,i=n.stateNode;try{var Ot=oa(n.type,c,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(Ot,f),i.__reactInternalSnapshotBeforeUpdate=t}catch(Mt){Kt(n,n.return,Mt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)el(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":el(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}}function Bu(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:kn(t,n),i&4&&Ms(5,n);break;case 1:if(kn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(M){Kt(n,n.return,M)}else{var c=oa(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(c,e,t.__reactInternalSnapshotBeforeUpdate)}catch(M){Kt(n,n.return,M)}}i&64&&Fu(n),i&512&&Ps(n,n.return);break;case 3:if(kn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{vc(t,e)}catch(M){Kt(n,n.return,M)}}break;case 27:e===null&&i&4&&Iu(n);case 26:case 5:kn(t,n),e===null&&i&4&&Lu(n),i&512&&Ps(n,n.return);break;case 12:kn(t,n);break;case 13:kn(t,n),i&4&&zu(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=yf.bind(null,n),Nf(t,n))));break;case 22:if(i=n.memoizedState!==null||vn,!i){e=e!==null&&e.memoizedState!==null||se,c=vn;var f=se;vn=i,(se=e)&&!f?Ln(t,n,(n.subtreeFlags&8772)!==0):kn(t,n),vn=c,se=f}break;case 30:break;default:kn(t,n)}}function ju(t){var e=t.alternate;e!==null&&(t.alternate=null,ju(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ir(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Zt=null,Te=!1;function An(t,e,n){for(n=n.child;n!==null;)Hu(t,e,n),n=n.sibling}function Hu(t,e,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ue,n)}catch{}switch(n.tag){case 26:se||an(n,e),An(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:se||an(n,e);var i=Zt,c=Te;Hn(n.type)&&(Zt=n.stateNode,Te=!1),An(t,e,n),Bs(n.stateNode),Zt=i,Te=c;break;case 5:se||an(n,e);case 6:if(i=Zt,c=Te,Zt=null,An(t,e,n),Zt=i,Te=c,Zt!==null)if(Te)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(n.stateNode)}catch(f){Kt(n,e,f)}else try{Zt.removeChild(n.stateNode)}catch(f){Kt(n,e,f)}break;case 18:Zt!==null&&(Te?(t=Zt,Mh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ys(t)):Mh(Zt,n.stateNode));break;case 4:i=Zt,c=Te,Zt=n.stateNode.containerInfo,Te=!0,An(t,e,n),Zt=i,Te=c;break;case 0:case 11:case 14:case 15:se||Fn(2,n,e),se||Fn(4,n,e),An(t,e,n);break;case 1:se||(an(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ku(n,e,i)),An(t,e,n);break;case 21:An(t,e,n);break;case 22:se=(i=se)||n.memoizedState!==null,An(t,e,n),se=i;break;default:An(t,e,n)}}function zu(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ys(t)}catch(n){Kt(e,e.return,n)}}function uf(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Uu),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Uu),e;default:throw Error(s(435,t.tag))}}function To(t,e){var n=uf(t);e.forEach(function(i){var c=bf.bind(null,t,i);n.has(i)||(n.add(i),i.then(c,c))})}function Fe(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i],f=t,M=e,L=M;t:for(;L!==null;){switch(L.tag){case 27:if(Hn(L.type)){Zt=L.stateNode,Te=!1;break t}break;case 5:Zt=L.stateNode,Te=!1;break t;case 3:case 4:Zt=L.stateNode.containerInfo,Te=!0;break t}L=L.return}if(Zt===null)throw Error(s(160));Hu(f,M,c),Zt=null,Te=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Gu(e,t),e=e.sibling}var Ze=null;function Gu(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fe(e,t),ke(t),i&4&&(Fn(3,t,t.return),Ms(3,t),Fn(5,t,t.return));break;case 1:Fe(e,t),ke(t),i&512&&(se||n===null||an(n,n.return)),i&64&&vn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var c=Ze;if(Fe(e,t),ke(t),i&512&&(se||n===null||an(n,n.return)),i&4){var f=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){t:{i=t.type,n=t.memoizedProps,c=c.ownerDocument||c;e:switch(i){case"title":f=c.getElementsByTagName("title")[0],(!f||f[ts]||f[oe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(i),c.head.insertBefore(f,c.querySelector("head > title"))),Se(f,i,n),f[oe]=t,pe(f),i=f;break t;case"link":var M=Ih("link","href",c).get(i+(n.href||""));if(M){for(var L=0;L<M.length;L++)if(f=M[L],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){M.splice(L,1);break e}}f=c.createElement(i),Se(f,i,n),c.head.appendChild(f);break;case"meta":if(M=Ih("meta","content",c).get(i+(n.content||""))){for(L=0;L<M.length;L++)if(f=M[L],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){M.splice(L,1);break e}}f=c.createElement(i),Se(f,i,n),c.head.appendChild(f);break;default:throw Error(s(468,i))}f[oe]=t,pe(f),i=f}t.stateNode=i}else Uh(c,t.type,t.stateNode);else t.stateNode=Nh(c,i,t.memoizedProps);else f!==i?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,i===null?Uh(c,t.type,t.stateNode):Nh(c,i,t.memoizedProps)):i===null&&t.stateNode!==null&&xo(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fe(e,t),ke(t),i&512&&(se||n===null||an(n,n.return)),n!==null&&i&4&&xo(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fe(e,t),ke(t),i&512&&(se||n===null||an(n,n.return)),t.flags&32){c=t.stateNode;try{va(c,"")}catch(lt){Kt(t,t.return,lt)}}i&4&&t.stateNode!=null&&(c=t.memoizedProps,xo(t,c,n!==null?n.memoizedProps:c)),i&1024&&(wo=!0);break;case 6:if(Fe(e,t),ke(t),i&4){if(t.stateNode===null)throw Error(s(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(lt){Kt(t,t.return,lt)}}break;case 3:if(Vi=null,c=Ze,Ze=$i(e.containerInfo),Fe(e,t),Ze=c,ke(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ys(e.containerInfo)}catch(lt){Kt(t,t.return,lt)}wo&&(wo=!1,qu(t));break;case 4:i=Ze,Ze=$i(t.stateNode.containerInfo),Fe(e,t),ke(t),Ze=i;break;case 12:Fe(e,t),ke(t);break;case 13:Fe(e,t),ke(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ko=ut()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,To(t,i)));break;case 22:c=t.memoizedState!==null;var K=n!==null&&n.memoizedState!==null,it=vn,dt=se;if(vn=it||c,se=dt||K,Fe(e,t),se=dt,vn=it,ke(t),i&8192)t:for(e=t.stateNode,e._visibility=c?e._visibility&-2:e._visibility|1,c&&(n===null||K||vn||se||la(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){K=n=e;try{if(f=K.stateNode,c)M=f.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{L=K.stateNode;var gt=K.memoizedProps.style,rt=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;L.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(lt){Kt(K,K.return,lt)}}}else if(e.tag===6){if(n===null){K=e;try{K.stateNode.nodeValue=c?"":K.memoizedProps}catch(lt){Kt(K,K.return,lt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,To(t,n))));break;case 19:Fe(e,t),ke(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,To(t,i)));break;case 30:break;case 21:break;default:Fe(e,t),ke(t)}}function ke(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Nu(i)){n=i;break}i=i.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,f=Co(t);Fi(t,f,c);break;case 5:var M=n.stateNode;n.flags&32&&(va(M,""),n.flags&=-33);var L=Co(t);Fi(t,L,M);break;case 3:case 4:var K=n.stateNode.containerInfo,it=Co(t);Ro(t,it,K);break;default:throw Error(s(161))}}catch(dt){Kt(t,t.return,dt)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qu(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;qu(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function kn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Bu(t,e.alternate,e),e=e.sibling}function la(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Fn(4,e,e.return),la(e);break;case 1:an(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ku(e,e.return,n),la(e);break;case 27:Bs(e.stateNode);case 26:case 5:an(e,e.return),la(e);break;case 22:e.memoizedState===null&&la(e);break;case 30:la(e);break;default:la(e)}t=t.sibling}}function Ln(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,c=t,f=e,M=f.flags;switch(f.tag){case 0:case 11:case 15:Ln(c,f,n),Ms(4,f);break;case 1:if(Ln(c,f,n),i=f,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(it){Kt(i,i.return,it)}if(i=f,c=i.updateQueue,c!==null){var L=i.stateNode;try{var K=c.shared.hiddenCallbacks;if(K!==null)for(c.shared.hiddenCallbacks=null,c=0;c<K.length;c++)bc(K[c],L)}catch(it){Kt(i,i.return,it)}}n&&M&64&&Fu(f),Ps(f,f.return);break;case 27:Iu(f);case 26:case 5:Ln(c,f,n),n&&i===null&&M&4&&Lu(f),Ps(f,f.return);break;case 12:Ln(c,f,n);break;case 13:Ln(c,f,n),n&&M&4&&zu(c,f);break;case 22:f.memoizedState===null&&Ln(c,f,n),Ps(f,f.return);break;case 30:break;default:Ln(c,f,n)}e=e.sibling}}function Mo(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ms(n))}function Po(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ms(t))}function sn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xu(t,e,n,i),e=e.sibling}function Xu(t,e,n,i){var c=e.flags;switch(e.tag){case 0:case 11:case 15:sn(t,e,n,i),c&2048&&Ms(9,e);break;case 1:sn(t,e,n,i);break;case 3:sn(t,e,n,i),c&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ms(t)));break;case 12:if(c&2048){sn(t,e,n,i),t=e.stateNode;try{var f=e.memoizedProps,M=f.id,L=f.onPostCommit;typeof L=="function"&&L(M,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){Kt(e,e.return,K)}}else sn(t,e,n,i);break;case 13:sn(t,e,n,i);break;case 23:break;case 22:f=e.stateNode,M=e.alternate,e.memoizedState!==null?f._visibility&2?sn(t,e,n,i):Os(t,e):f._visibility&2?sn(t,e,n,i):(f._visibility|=2,Ba(t,e,n,i,(e.subtreeFlags&10256)!==0)),c&2048&&Mo(M,e);break;case 24:sn(t,e,n,i),c&2048&&Po(e.alternate,e);break;default:sn(t,e,n,i)}}function Ba(t,e,n,i,c){for(c=c&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var f=t,M=e,L=n,K=i,it=M.flags;switch(M.tag){case 0:case 11:case 15:Ba(f,M,L,K,c),Ms(8,M);break;case 23:break;case 22:var dt=M.stateNode;M.memoizedState!==null?dt._visibility&2?Ba(f,M,L,K,c):Os(f,M):(dt._visibility|=2,Ba(f,M,L,K,c)),c&&it&2048&&Mo(M.alternate,M);break;case 24:Ba(f,M,L,K,c),c&&it&2048&&Po(M.alternate,M);break;default:Ba(f,M,L,K,c)}e=e.sibling}}function Os(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,c=i.flags;switch(i.tag){case 22:Os(n,i),c&2048&&Mo(i.alternate,i);break;case 24:Os(n,i),c&2048&&Po(i.alternate,i);break;default:Os(n,i)}e=e.sibling}}var Ds=8192;function ja(t){if(t.subtreeFlags&Ds)for(t=t.child;t!==null;)$u(t),t=t.sibling}function $u(t){switch(t.tag){case 26:ja(t),t.flags&Ds&&t.memoizedState!==null&&Wf(Ze,t.memoizedState,t.memoizedProps);break;case 5:ja(t);break;case 3:case 4:var e=Ze;Ze=$i(t.stateNode.containerInfo),ja(t),Ze=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Ds,Ds=16777216,ja(t),Ds=e):ja(t));break;default:ja(t)}}function Yu(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Fs(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ge=i,Wu(i,t)}Yu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vu(t),t=t.sibling}function Vu(t){switch(t.tag){case 0:case 11:case 15:Fs(t),t.flags&2048&&Fn(9,t,t.return);break;case 3:Fs(t);break;case 12:Fs(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ki(t)):Fs(t);break;default:Fs(t)}}function ki(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ge=i,Wu(i,t)}Yu(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Fn(8,e,e.return),ki(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,ki(e));break;default:ki(e)}t=t.sibling}}function Wu(t,e){for(;ge!==null;){var n=ge;switch(n.tag){case 0:case 11:case 15:Fn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ms(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ge=i;else t:for(n=t;ge!==null;){i=ge;var c=i.sibling,f=i.return;if(ju(i),i===n){ge=null;break t}if(c!==null){c.return=f,ge=c;break t}ge=f}}}var hf={getCacheForType:function(t){var e=Ee(he),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},df=typeof WeakMap=="function"?WeakMap:Map,Xt=0,Qt=null,Nt=null,Ut=0,$t=0,Le=null,Nn=!1,Ha=!1,Oo=!1,Sn=0,ee=0,In=0,ca=0,Do=0,Ve=0,za=0,ks=null,Me=null,Fo=!1,ko=0,Li=1/0,Ni=null,Un=null,Ae=0,Bn=null,Ga=null,qa=0,Lo=0,No=null,Ku=null,Ls=0,Io=null;function Ne(){if((Xt&2)!==0&&Ut!==0)return Ut&-Ut;if(V.T!==null){var t=Oa;return t!==0?t:qo()}return ne()}function Qu(){Ve===0&&(Ve=(Ut&536870912)===0||Ht?ie():536870912);var t=Ye.current;return t!==null&&(t.flags|=32),Ve}function Ie(t,e,n){(t===Qt&&($t===2||$t===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),jn(t,Ut,Ve,!1)),Ue(t,n),((Xt&2)===0||t!==Qt)&&(t===Qt&&((Xt&2)===0&&(ca|=n),ee===4&&jn(t,Ut,Ve,!1)),rn(t))}function Zu(t,e,n){if((Xt&6)!==0)throw Error(s(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||xt(t,e),c=i?mf(t,e):jo(t,e,!0),f=i;do{if(c===0){Ha&&!i&&jn(t,e,0,!1);break}else{if(n=t.current.alternate,f&&!ff(n)){c=jo(t,e,!1),f=!1;continue}if(c===2){if(f=e,t.errorRecoveryDisabledLanes&f)var M=0;else M=t.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){e=M;t:{var L=t;c=ks;var K=L.current.memoizedState.isDehydrated;if(K&&(Xa(L,M).flags|=256),M=jo(L,M,!1),M!==2){if(Oo&&!K){L.errorRecoveryDisabledLanes|=f,ca|=f,c=4;break t}f=Me,Me=c,f!==null&&(Me===null?Me=f:Me.push.apply(Me,f))}c=M}if(f=!1,c!==2)continue}}if(c===1){Xa(t,0),jn(t,e,0,!0);break}t:{switch(i=t,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((e&4194048)!==e)break;case 6:jn(i,e,Ve,!Nn);break t;case 2:Me=null;break;case 3:case 5:break;default:throw Error(s(329))}if((e&62914560)===e&&(c=ko+300-ut(),10<c)){if(jn(i,e,Ve,!Nn),nt(i,0,!0)!==0)break t;i.timeoutHandle=wh(Ju.bind(null,i,n,Me,Ni,Fo,e,Ve,ca,za,Nn,f,2,-0,0),c);break t}Ju(i,n,Me,Ni,Fo,e,Ve,ca,za,Nn,f,0,-0,0)}}break}while(!0);rn(t)}function Ju(t,e,n,i,c,f,M,L,K,it,dt,gt,rt,lt){if(t.timeoutHandle=-1,gt=e.subtreeFlags,(gt&8192||(gt&16785408)===16785408)&&(zs={stylesheets:null,count:0,unsuspend:Vf},$u(e),gt=Kf(),gt!==null)){t.cancelPendingCommit=gt(rh.bind(null,t,e,f,n,i,c,M,L,K,dt,1,rt,lt)),jn(t,f,M,!it);return}rh(t,e,f,n,i,c,M,L,K)}function ff(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var c=n[i],f=c.getSnapshot;c=c.value;try{if(!Oe(f(),c))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jn(t,e,n,i){e&=~Do,e&=~ca,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var c=e;0<c;){var f=31-qt(c),M=1<<f;i[f]=-1,c&=~M}n!==0&&ye(t,n,e)}function Ii(){return(Xt&6)===0?(Ns(0),!1):!0}function Uo(){if(Nt!==null){if($t===0)var t=Nt.return;else t=Nt,pn=aa=null,to(t),Ia=null,Rs=0,t=Nt;for(;t!==null;)Du(t.alternate,t),t=t.return;Nt=null}}function Xa(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Of(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Uo(),Qt=t,Nt=n=hn(t.current,null),Ut=e,$t=0,Le=null,Nn=!1,Ha=xt(t,e),Oo=!1,za=Ve=Do=ca=In=ee=0,Me=ks=null,Fo=!1,(e&8)!==0&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var c=31-qt(i),f=1<<c;e|=t[c],i&=~f}return Sn=e,ii(),n}function th(t,e){kt=null,V.H=xi,e===_s||e===pi?(e=_c(),$t=3):e===pc?(e=_c(),$t=4):$t=e===yu?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Le=e,Nt===null&&(ee=1,Mi(t,Ge(e,t.current)))}function eh(){var t=V.H;return V.H=xi,t===null?xi:t}function nh(){var t=V.A;return V.A=hf,t}function Bo(){ee=4,Nn||(Ut&4194048)!==Ut&&Ye.current!==null||(Ha=!0),(In&134217727)===0&&(ca&134217727)===0||Qt===null||jn(Qt,Ut,Ve,!1)}function jo(t,e,n){var i=Xt;Xt|=2;var c=eh(),f=nh();(Qt!==t||Ut!==e)&&(Ni=null,Xa(t,e)),e=!1;var M=ee;t:do try{if($t!==0&&Nt!==null){var L=Nt,K=Le;switch($t){case 8:Uo(),M=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(e=!0);var it=$t;if($t=0,Le=null,$a(t,L,K,it),n&&Ha){M=0;break t}break;default:it=$t,$t=0,Le=null,$a(t,L,K,it)}}pf(),M=ee;break}catch(dt){th(t,dt)}while(!0);return e&&t.shellSuspendCounter++,pn=aa=null,Xt=i,V.H=c,V.A=f,Nt===null&&(Qt=null,Ut=0,ii()),M}function pf(){for(;Nt!==null;)ah(Nt)}function mf(t,e){var n=Xt;Xt|=2;var i=eh(),c=nh();Qt!==t||Ut!==e?(Ni=null,Li=ut()+500,Xa(t,e)):Ha=xt(t,e);t:do try{if($t!==0&&Nt!==null){e=Nt;var f=Le;e:switch($t){case 1:$t=0,Le=null,$a(t,e,f,1);break;case 2:case 9:if(mc(f)){$t=0,Le=null,sh(e);break}e=function(){$t!==2&&$t!==9||Qt!==t||($t=7),rn(t)},f.then(e,e);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:mc(f)?($t=0,Le=null,sh(e)):($t=0,Le=null,$a(t,e,f,7));break;case 5:var M=null;switch(Nt.tag){case 26:M=Nt.memoizedState;case 5:case 27:var L=Nt;if(!M||Bh(M)){$t=0,Le=null;var K=L.sibling;if(K!==null)Nt=K;else{var it=L.return;it!==null?(Nt=it,Ui(it)):Nt=null}break e}}$t=0,Le=null,$a(t,e,f,5);break;case 6:$t=0,Le=null,$a(t,e,f,6);break;case 8:Uo(),ee=6;break t;default:throw Error(s(462))}}gf();break}catch(dt){th(t,dt)}while(!0);return pn=aa=null,V.H=i,V.A=c,Xt=n,Nt!==null?0:(Qt=null,Ut=0,ii(),ee)}function gf(){for(;Nt!==null&&!ct();)ah(Nt)}function ah(t){var e=Pu(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?Ui(t):Nt=e}function sh(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=xu(n,e,e.pendingProps,e.type,void 0,Ut);break;case 11:e=xu(n,e,e.pendingProps,e.type.render,e.ref,Ut);break;case 5:to(e);default:Du(n,e),e=Nt=ic(e,Sn),e=Pu(n,e,Sn)}t.memoizedProps=t.pendingProps,e===null?Ui(t):Nt=e}function $a(t,e,n,i){pn=aa=null,to(e),Ia=null,Rs=0;var c=e.return;try{if(sf(t,c,e,n,Ut)){ee=1,Mi(t,Ge(n,t.current)),Nt=null;return}}catch(f){if(c!==null)throw Nt=c,f;ee=1,Mi(t,Ge(n,t.current)),Nt=null;return}e.flags&32768?(Ht||i===1?t=!0:Ha||(Ut&536870912)!==0?t=!1:(Nn=t=!0,(i===2||i===9||i===3||i===6)&&(i=Ye.current,i!==null&&i.tag===13&&(i.flags|=16384))),ih(e,t)):Ui(e)}function Ui(t){var e=t;do{if((e.flags&32768)!==0){ih(e,Nn);return}t=e.return;var n=of(e.alternate,e,Sn);if(n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);ee===0&&(ee=5)}function ih(t,e){do{var n=lf(t.alternate,t);if(n!==null){n.flags&=32767,Nt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Nt=t;return}Nt=t=n}while(t!==null);ee=6,Nt=null}function rh(t,e,n,i,c,f,M,L,K){t.cancelPendingCommit=null;do Bi();while(Ae!==0);if((Xt&6)!==0)throw Error(s(327));if(e!==null){if(e===t.current)throw Error(s(177));if(f=e.lanes|e.childLanes,f|=Mr,on(t,n,f,M,L,K),t===Qt&&(Nt=Qt=null,Ut=0),Ga=e,Bn=t,qa=n,Lo=f,No=c,Ku=i,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vf(Rt,function(){return hh(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||i){i=V.T,V.T=null,c=H.p,H.p=2,M=Xt,Xt|=4;try{cf(t,e,n)}finally{Xt=M,H.p=c,V.T=i}}Ae=1,oh(),lh(),ch()}}function oh(){if(Ae===1){Ae=0;var t=Bn,e=Ga,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=V.T,V.T=null;var i=H.p;H.p=2;var c=Xt;Xt|=4;try{Gu(e,t);var f=Zo,M=Wl(t.containerInfo),L=f.focusedElem,K=f.selectionRange;if(M!==L&&L&&L.ownerDocument&&Vl(L.ownerDocument.documentElement,L)){if(K!==null&&xr(L)){var it=K.start,dt=K.end;if(dt===void 0&&(dt=it),"selectionStart"in L)L.selectionStart=it,L.selectionEnd=Math.min(dt,L.value.length);else{var gt=L.ownerDocument||document,rt=gt&&gt.defaultView||window;if(rt.getSelection){var lt=rt.getSelection(),Ot=L.textContent.length,Mt=Math.min(K.start,Ot),Wt=K.end===void 0?Mt:Math.min(K.end,Ot);!lt.extend&&Mt>Wt&&(M=Wt,Wt=Mt,Mt=M);var et=Yl(L,Mt),Z=Yl(L,Wt);if(et&&Z&&(lt.rangeCount!==1||lt.anchorNode!==et.node||lt.anchorOffset!==et.offset||lt.focusNode!==Z.node||lt.focusOffset!==Z.offset)){var st=gt.createRange();st.setStart(et.node,et.offset),lt.removeAllRanges(),Mt>Wt?(lt.addRange(st),lt.extend(Z.node,Z.offset)):(st.setEnd(Z.node,Z.offset),lt.addRange(st))}}}}for(gt=[],lt=L;lt=lt.parentNode;)lt.nodeType===1&&gt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<gt.length;L++){var pt=gt[L];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}Qi=!!Qo,Zo=Qo=null}finally{Xt=c,H.p=i,V.T=n}}t.current=e,Ae=2}}function lh(){if(Ae===2){Ae=0;var t=Bn,e=Ga,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=V.T,V.T=null;var i=H.p;H.p=2;var c=Xt;Xt|=4;try{Bu(t,e.alternate,e)}finally{Xt=c,H.p=i,V.T=n}}Ae=3}}function ch(){if(Ae===4||Ae===3){Ae=0,ht();var t=Bn,e=Ga,n=qa,i=Ku;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Ae=5:(Ae=0,Ga=Bn=null,uh(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(Un=null),xn(n),e=e.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ue,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=V.T,c=H.p,H.p=2,V.T=null;try{for(var f=t.onRecoverableError,M=0;M<i.length;M++){var L=i[M];f(L.value,{componentStack:L.stack})}}finally{V.T=e,H.p=c}}(qa&3)!==0&&Bi(),rn(t),c=t.pendingLanes,(n&4194090)!==0&&(c&42)!==0?t===Io?Ls++:(Ls=0,Io=t):Ls=0,Ns(0)}}function uh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ms(e)))}function Bi(t){return oh(),lh(),ch(),hh()}function hh(){if(Ae!==5)return!1;var t=Bn,e=Lo;Lo=0;var n=xn(qa),i=V.T,c=H.p;try{H.p=32>n?32:n,V.T=null,n=No,No=null;var f=Bn,M=qa;if(Ae=0,Ga=Bn=null,qa=0,(Xt&6)!==0)throw Error(s(331));var L=Xt;if(Xt|=4,Vu(f.current),Xu(f,f.current,M,n),Xt=L,Ns(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ue,f)}catch{}return!0}finally{H.p=c,V.T=i,uh(t,e)}}function dh(t,e,n){e=Ge(n,e),e=mo(t.stateNode,e,2),t=Mn(t,e,2),t!==null&&(Ue(t,2),rn(t))}function Kt(t,e,n){if(t.tag===3)dh(t,t,n);else for(;e!==null;){if(e.tag===3){dh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Un===null||!Un.has(i))){t=Ge(n,t),n=gu(2),i=Mn(e,n,2),i!==null&&(_u(n,i,e,t),Ue(i,2),rn(i));break}}e=e.return}}function Ho(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new df;var c=new Set;i.set(e,c)}else c=i.get(e),c===void 0&&(c=new Set,i.set(e,c));c.has(n)||(Oo=!0,c.add(n),t=_f.bind(null,t,e,n),e.then(t,t))}function _f(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Qt===t&&(Ut&n)===n&&(ee===4||ee===3&&(Ut&62914560)===Ut&&300>ut()-ko?(Xt&2)===0&&Xa(t,0):Do|=n,za===Ut&&(za=0)),rn(t)}function fh(t,e){e===0&&(e=re()),t=wa(t,e),t!==null&&(Ue(t,e),rn(t))}function yf(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fh(t,n)}function bf(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,c=t.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(s(314))}i!==null&&i.delete(e),fh(t,n)}function vf(t,e){return ot(t,e)}var ji=null,Ya=null,zo=!1,Hi=!1,Go=!1,ua=0;function rn(t){t!==Ya&&t.next===null&&(Ya===null?ji=Ya=t:Ya=Ya.next=t),Hi=!0,zo||(zo=!0,Sf())}function Ns(t,e){if(!Go&&Hi){Go=!0;do for(var n=!1,i=ji;i!==null;){if(t!==0){var c=i.pendingLanes;if(c===0)var f=0;else{var M=i.suspendedLanes,L=i.pingedLanes;f=(1<<31-qt(42|t)+1)-1,f&=c&~(M&~L),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,_h(i,f))}else f=Ut,f=nt(i,i===Qt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(f&3)===0||xt(i,f)||(n=!0,_h(i,f));i=i.next}while(n);Go=!1}}function Af(){ph()}function ph(){Hi=zo=!1;var t=0;ua!==0&&(Pf()&&(t=ua),ua=0);for(var e=ut(),n=null,i=ji;i!==null;){var c=i.next,f=mh(i,e);f===0?(i.next=null,n===null?ji=c:n.next=c,c===null&&(Ya=n)):(n=i,(t!==0||(f&3)!==0)&&(Hi=!0)),i=c}Ns(t)}function mh(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var M=31-qt(f),L=1<<M,K=c[M];K===-1?((L&n)===0||(L&i)!==0)&&(c[M]=jt(L,e)):K<=e&&(t.expiredLanes|=L),f&=~L}if(e=Qt,n=Ut,n=nt(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&($t===2||$t===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&St(i),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||xt(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&St(i),xn(n)){case 2:case 8:n=Et;break;case 32:n=Rt;break;case 268435456:n=Dt;break;default:n=Rt}return i=gh.bind(null,t),n=ot(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&St(i),t.callbackPriority=2,t.callbackNode=null,2}function gh(t,e){if(Ae!==0&&Ae!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var i=Ut;return i=nt(t,t===Qt?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Zu(t,i,e),mh(t,ut()),t.callbackNode!=null&&t.callbackNode===n?gh.bind(null,t):null)}function _h(t,e){if(Bi())return null;Zu(t,e,!0)}function Sf(){Df(function(){(Xt&6)!==0?ot(bt,Af):ph()})}function qo(){return ua===0&&(ua=ie()),ua}function yh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Zs(""+t)}function bh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Ef(t,e,n,i,c){if(e==="submit"&&n&&n.stateNode===c){var f=yh((c[fe]||null).action),M=i.submitter;M&&(e=(e=M[fe]||null)?yh(e.formAction):M.getAttribute("formAction"),e!==null&&(f=e,M=null));var L=new ni("action","action",null,i,c);t.push({event:L,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ua!==0){var K=M?bh(c,M):new FormData(c);co(n,{pending:!0,data:K,method:c.method,action:f},null,K)}}else typeof f=="function"&&(L.preventDefault(),K=M?bh(c,M):new FormData(c),co(n,{pending:!0,data:K,method:c.method,action:f},f,K))},currentTarget:c}]})}}for(var Xo=0;Xo<Tr.length;Xo++){var $o=Tr[Xo],xf=$o.toLowerCase(),Cf=$o[0].toUpperCase()+$o.slice(1);Qe(xf,"on"+Cf)}Qe(Zl,"onAnimationEnd"),Qe(Jl,"onAnimationIteration"),Qe(tc,"onAnimationStart"),Qe("dblclick","onDoubleClick"),Qe("focusin","onFocus"),Qe("focusout","onBlur"),Qe(Hd,"onTransitionRun"),Qe(zd,"onTransitionStart"),Qe(Gd,"onTransitionCancel"),Qe(ec,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Is));function vh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],c=i.event;i=i.listeners;t:{var f=void 0;if(e)for(var M=i.length-1;0<=M;M--){var L=i[M],K=L.instance,it=L.currentTarget;if(L=L.listener,K!==f&&c.isPropagationStopped())break t;f=L,c.currentTarget=it;try{f(c)}catch(dt){Ti(dt)}c.currentTarget=null,f=K}else for(M=0;M<i.length;M++){if(L=i[M],K=L.instance,it=L.currentTarget,L=L.listener,K!==f&&c.isPropagationStopped())break t;f=L,c.currentTarget=it;try{f(c)}catch(dt){Ti(dt)}c.currentTarget=null,f=K}}}}function It(t,e){var n=e[be];n===void 0&&(n=e[be]=new Set);var i=t+"__bubble";n.has(i)||(Ah(e,t,2,!1),n.add(i))}function Yo(t,e,n){var i=0;e&&(i|=4),Ah(n,t,i,e)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[zi]){t[zi]=!0,pl.forEach(function(n){n!=="selectionchange"&&(Rf.has(n)||Yo(n,!1,t),Yo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zi]||(e[zi]=!0,Yo("selectionchange",!1,e))}}function Ah(t,e,n,i){switch(Xh(e)){case 2:var c=Jf;break;case 8:c=tp;break;default:c=ll}n=c.bind(null,e,n,t),c=void 0,!mr||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),i?c!==void 0?t.addEventListener(e,n,{capture:!0,passive:c}):t.addEventListener(e,n,!0):c!==void 0?t.addEventListener(e,n,{passive:c}):t.addEventListener(e,n,!1)}function Wo(t,e,n,i,c){var f=i;if((e&1)===0&&(e&2)===0&&i!==null)t:for(;;){if(i===null)return;var M=i.tag;if(M===3||M===4){var L=i.stateNode.containerInfo;if(L===c)break;if(M===4)for(M=i.return;M!==null;){var K=M.tag;if((K===3||K===4)&&M.stateNode.containerInfo===c)return;M=M.return}for(;L!==null;){if(M=fa(L),M===null)return;if(K=M.tag,K===5||K===6||K===26||K===27){i=f=M;continue t}L=L.parentNode}}i=i.return}Tl(function(){var it=f,dt=fr(n),gt=[];t:{var rt=nc.get(t);if(rt!==void 0){var lt=ni,Ot=t;switch(t){case"keypress":if(ti(n)===0)break t;case"keydown":case"keyup":lt=bd;break;case"focusin":Ot="focus",lt=br;break;case"focusout":Ot="blur",lt=br;break;case"beforeblur":case"afterblur":lt=br;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Sd;break;case Zl:case Jl:case tc:lt=ud;break;case ec:lt=xd;break;case"scroll":case"scrollend":lt=id;break;case"wheel":lt=Rd;break;case"copy":case"cut":case"paste":lt=dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Fl;break;case"toggle":case"beforetoggle":lt=Td}var Mt=(e&4)!==0,Wt=!Mt&&(t==="scroll"||t==="scrollend"),et=Mt?rt!==null?rt+"Capture":null:rt;Mt=[];for(var Z=it,st;Z!==null;){var pt=Z;if(st=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||st===null||et===null||(pt=ns(Z,et),pt!=null&&Mt.push(Us(Z,pt,st))),Wt)break;Z=Z.return}0<Mt.length&&(rt=new lt(rt,Ot,null,n,dt),gt.push({event:rt,listeners:Mt}))}}if((e&7)===0){t:{if(rt=t==="mouseover"||t==="pointerover",lt=t==="mouseout"||t==="pointerout",rt&&n!==dr&&(Ot=n.relatedTarget||n.fromElement)&&(fa(Ot)||Ot[je]))break t;if((lt||rt)&&(rt=dt.window===dt?dt:(rt=dt.ownerDocument)?rt.defaultView||rt.parentWindow:window,lt?(Ot=n.relatedTarget||n.toElement,lt=it,Ot=Ot?fa(Ot):null,Ot!==null&&(Wt=m(Ot),Mt=Ot.tag,Ot!==Wt||Mt!==5&&Mt!==27&&Mt!==6)&&(Ot=null)):(lt=null,Ot=it),lt!==Ot)){if(Mt=Ol,pt="onMouseLeave",et="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Mt=Fl,pt="onPointerLeave",et="onPointerEnter",Z="pointer"),Wt=lt==null?rt:es(lt),st=Ot==null?rt:es(Ot),rt=new Mt(pt,Z+"leave",lt,n,dt),rt.target=Wt,rt.relatedTarget=st,pt=null,fa(dt)===it&&(Mt=new Mt(et,Z+"enter",Ot,n,dt),Mt.target=st,Mt.relatedTarget=Wt,pt=Mt),Wt=pt,lt&&Ot)e:{for(Mt=lt,et=Ot,Z=0,st=Mt;st;st=Va(st))Z++;for(st=0,pt=et;pt;pt=Va(pt))st++;for(;0<Z-st;)Mt=Va(Mt),Z--;for(;0<st-Z;)et=Va(et),st--;for(;Z--;){if(Mt===et||et!==null&&Mt===et.alternate)break e;Mt=Va(Mt),et=Va(et)}Mt=null}else Mt=null;lt!==null&&Sh(gt,rt,lt,Mt,!1),Ot!==null&&Wt!==null&&Sh(gt,Wt,Ot,Mt,!0)}}t:{if(rt=it?es(it):window,lt=rt.nodeName&&rt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&rt.type==="file")var Ct=Hl;else if(Bl(rt))if(zl)Ct=Ud;else{Ct=Nd;var Lt=Ld}else lt=rt.nodeName,!lt||lt.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?it&&hr(it.elementType)&&(Ct=Hl):Ct=Id;if(Ct&&(Ct=Ct(t,it))){jl(gt,Ct,n,dt);break t}Lt&&Lt(t,rt,it),t==="focusout"&&it&&rt.type==="number"&&it.memoizedProps.value!=null&&ur(rt,"number",rt.value)}switch(Lt=it?es(it):window,t){case"focusin":(Bl(Lt)||Lt.contentEditable==="true")&&(xa=Lt,Cr=it,us=null);break;case"focusout":us=Cr=xa=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Kl(gt,n,dt);break;case"selectionchange":if(jd)break;case"keydown":case"keyup":Kl(gt,n,dt)}var wt;if(Ar)t:{switch(t){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ea?Il(t,n)&&(Pt="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Pt="onCompositionStart");Pt&&(kl&&n.locale!=="ko"&&(Ea||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ea&&(wt=Ml()):(Cn=dt,gr="value"in Cn?Cn.value:Cn.textContent,Ea=!0)),Lt=Gi(it,Pt),0<Lt.length&&(Pt=new Dl(Pt,t,null,n,dt),gt.push({event:Pt,listeners:Lt}),wt?Pt.data=wt:(wt=Ul(n),wt!==null&&(Pt.data=wt)))),(wt=Pd?Od(t,n):Dd(t,n))&&(Pt=Gi(it,"onBeforeInput"),0<Pt.length&&(Lt=new Dl("onBeforeInput","beforeinput",null,n,dt),gt.push({event:Lt,listeners:Pt}),Lt.data=wt)),Ef(gt,t,it,n,dt)}vh(gt,e)})}function Us(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gi(t,e){for(var n=e+"Capture",i=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=ns(t,n),c!=null&&i.unshift(Us(t,c,f)),c=ns(t,e),c!=null&&i.push(Us(t,c,f))),t.tag===3)return i;t=t.return}return[]}function Va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sh(t,e,n,i,c){for(var f=e._reactName,M=[];n!==null&&n!==i;){var L=n,K=L.alternate,it=L.stateNode;if(L=L.tag,K!==null&&K===i)break;L!==5&&L!==26&&L!==27||it===null||(K=it,c?(it=ns(n,f),it!=null&&M.unshift(Us(n,it,K))):c||(it=ns(n,f),it!=null&&M.push(Us(n,it,K)))),n=n.return}M.length!==0&&t.push({event:e,listeners:M})}var wf=/\r\n?/g,Tf=/\u0000|\uFFFD/g;function Eh(t){return(typeof t=="string"?t:""+t).replace(wf,`
`).replace(Tf,"")}function xh(t,e){return e=Eh(e),Eh(t)===e}function qi(){}function Vt(t,e,n,i,c,f){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||va(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&va(t,""+i);break;case"className":Ws(t,"class",i);break;case"tabIndex":Ws(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(t,n,i);break;case"style":Rl(t,i,f);break;case"data":if(e!=="object"){Ws(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Zs(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(e!=="input"&&Vt(t,e,"name",c.name,c,null),Vt(t,e,"formEncType",c.formEncType,c,null),Vt(t,e,"formMethod",c.formMethod,c,null),Vt(t,e,"formTarget",c.formTarget,c,null)):(Vt(t,e,"encType",c.encType,c,null),Vt(t,e,"method",c.method,c,null),Vt(t,e,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Zs(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=qi);break;case"onScroll":i!=null&&It("scroll",t);break;case"onScrollEnd":i!=null&&It("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(s(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Zs(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":It("beforetoggle",t),It("toggle",t),Vs(t,"popover",i);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Vs(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=ad.get(n)||n,Vs(t,n,i))}}function Ko(t,e,n,i,c,f){switch(n){case"style":Rl(t,i,f);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(s(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=n}}break;case"children":typeof i=="string"?va(t,i):(typeof i=="number"||typeof i=="bigint")&&va(t,""+i);break;case"onScroll":i!=null&&It("scroll",t);break;case"onScrollEnd":i!=null&&It("scrollend",t);break;case"onClick":i!=null&&(t.onclick=qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ml.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),e=n.slice(2,c?n.length-7:void 0),f=t[fe]||null,f=f!=null?f[n]:null,typeof f=="function"&&t.removeEventListener(e,f,c),typeof i=="function")){typeof f!="function"&&f!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,c);break t}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Vs(t,n,i)}}}function Se(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",t),It("load",t);var i=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var M=n[f];if(M!=null)switch(f){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,e));default:Vt(t,e,f,M,n,null)}}c&&Vt(t,e,"srcSet",n.srcSet,n,null),i&&Vt(t,e,"src",n.src,n,null);return;case"input":It("invalid",t);var L=f=M=c=null,K=null,it=null;for(i in n)if(n.hasOwnProperty(i)){var dt=n[i];if(dt!=null)switch(i){case"name":c=dt;break;case"type":M=dt;break;case"checked":K=dt;break;case"defaultChecked":it=dt;break;case"value":f=dt;break;case"defaultValue":L=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,e));break;default:Vt(t,e,i,dt,n,null)}}Sl(t,f,L,K,it,M,c,!1),Ks(t);return;case"select":It("invalid",t),i=M=f=null;for(c in n)if(n.hasOwnProperty(c)&&(L=n[c],L!=null))switch(c){case"value":f=L;break;case"defaultValue":M=L;break;case"multiple":i=L;default:Vt(t,e,c,L,n,null)}e=f,n=M,t.multiple=!!i,e!=null?ba(t,!!i,e,!1):n!=null&&ba(t,!!i,n,!0);return;case"textarea":It("invalid",t),f=c=i=null;for(M in n)if(n.hasOwnProperty(M)&&(L=n[M],L!=null))switch(M){case"value":i=L;break;case"defaultValue":c=L;break;case"children":f=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:Vt(t,e,M,L,n,null)}xl(t,i,c,f),Ks(t);return;case"option":for(K in n)if(n.hasOwnProperty(K)&&(i=n[K],i!=null))switch(K){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Vt(t,e,K,i,n,null)}return;case"dialog":It("beforetoggle",t),It("toggle",t),It("cancel",t),It("close",t);break;case"iframe":case"object":It("load",t);break;case"video":case"audio":for(i=0;i<Is.length;i++)It(Is[i],t);break;case"image":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"embed":case"source":case"link":It("error",t),It("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in n)if(n.hasOwnProperty(it)&&(i=n[it],i!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,e));default:Vt(t,e,it,i,n,null)}return;default:if(hr(e)){for(dt in n)n.hasOwnProperty(dt)&&(i=n[dt],i!==void 0&&Ko(t,e,dt,i,n,void 0));return}}for(L in n)n.hasOwnProperty(L)&&(i=n[L],i!=null&&Vt(t,e,L,i,n,null))}function Mf(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,M=null,L=null,K=null,it=null,dt=null;for(lt in n){var gt=n[lt];if(n.hasOwnProperty(lt)&&gt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":K=gt;default:i.hasOwnProperty(lt)||Vt(t,e,lt,null,i,gt)}}for(var rt in i){var lt=i[rt];if(gt=n[rt],i.hasOwnProperty(rt)&&(lt!=null||gt!=null))switch(rt){case"type":f=lt;break;case"name":c=lt;break;case"checked":it=lt;break;case"defaultChecked":dt=lt;break;case"value":M=lt;break;case"defaultValue":L=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(s(137,e));break;default:lt!==gt&&Vt(t,e,rt,lt,i,gt)}}cr(t,M,L,K,it,dt,f,c);return;case"select":lt=M=L=rt=null;for(f in n)if(K=n[f],n.hasOwnProperty(f)&&K!=null)switch(f){case"value":break;case"multiple":lt=K;default:i.hasOwnProperty(f)||Vt(t,e,f,null,i,K)}for(c in i)if(f=i[c],K=n[c],i.hasOwnProperty(c)&&(f!=null||K!=null))switch(c){case"value":rt=f;break;case"defaultValue":L=f;break;case"multiple":M=f;default:f!==K&&Vt(t,e,c,f,i,K)}e=L,n=M,i=lt,rt!=null?ba(t,!!n,rt,!1):!!i!=!!n&&(e!=null?ba(t,!!n,e,!0):ba(t,!!n,n?[]:"",!1));return;case"textarea":lt=rt=null;for(L in n)if(c=n[L],n.hasOwnProperty(L)&&c!=null&&!i.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Vt(t,e,L,null,i,c)}for(M in i)if(c=i[M],f=n[M],i.hasOwnProperty(M)&&(c!=null||f!=null))switch(M){case"value":rt=c;break;case"defaultValue":lt=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&Vt(t,e,M,c,i,f)}El(t,rt,lt);return;case"option":for(var Ot in n)if(rt=n[Ot],n.hasOwnProperty(Ot)&&rt!=null&&!i.hasOwnProperty(Ot))switch(Ot){case"selected":t.selected=!1;break;default:Vt(t,e,Ot,null,i,rt)}for(K in i)if(rt=i[K],lt=n[K],i.hasOwnProperty(K)&&rt!==lt&&(rt!=null||lt!=null))switch(K){case"selected":t.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Vt(t,e,K,rt,i,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in n)rt=n[Mt],n.hasOwnProperty(Mt)&&rt!=null&&!i.hasOwnProperty(Mt)&&Vt(t,e,Mt,null,i,rt);for(it in i)if(rt=i[it],lt=n[it],i.hasOwnProperty(it)&&rt!==lt&&(rt!=null||lt!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,e));break;default:Vt(t,e,it,rt,i,lt)}return;default:if(hr(e)){for(var Wt in n)rt=n[Wt],n.hasOwnProperty(Wt)&&rt!==void 0&&!i.hasOwnProperty(Wt)&&Ko(t,e,Wt,void 0,i,rt);for(dt in i)rt=i[dt],lt=n[dt],!i.hasOwnProperty(dt)||rt===lt||rt===void 0&&lt===void 0||Ko(t,e,dt,rt,i,lt);return}}for(var et in n)rt=n[et],n.hasOwnProperty(et)&&rt!=null&&!i.hasOwnProperty(et)&&Vt(t,e,et,null,i,rt);for(gt in i)rt=i[gt],lt=n[gt],!i.hasOwnProperty(gt)||rt===lt||rt==null&&lt==null||Vt(t,e,gt,rt,i,lt)}var Qo=null,Zo=null;function Xi(t){return t.nodeType===9?t:t.ownerDocument}function Ch(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Jo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tl=null;function Pf(){var t=window.event;return t&&t.type==="popstate"?t===tl?!1:(tl=t,!0):(tl=null,!1)}var wh=typeof setTimeout=="function"?setTimeout:void 0,Of=typeof clearTimeout=="function"?clearTimeout:void 0,Th=typeof Promise=="function"?Promise:void 0,Df=typeof queueMicrotask=="function"?queueMicrotask:typeof Th<"u"?function(t){return Th.resolve(null).then(t).catch(Ff)}:wh;function Ff(t){setTimeout(function(){throw t})}function Hn(t){return t==="head"}function Mh(t,e){var n=e,i=0,c=0;do{var f=n.nextSibling;if(t.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(0<i&&8>i){n=i;var M=t.ownerDocument;if(n&1&&Bs(M.documentElement),n&2&&Bs(M.body),n&4)for(n=M.head,Bs(n),M=n.firstChild;M;){var L=M.nextSibling,K=M.nodeName;M[ts]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&M.rel.toLowerCase()==="stylesheet"||n.removeChild(M),M=L}}if(c===0){t.removeChild(f),Ys(e);return}c--}else n==="$"||n==="$?"||n==="$!"?c++:i=n.charCodeAt(0)-48;else i=0;n=f}while(n);Ys(e)}function el(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":el(n),ir(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function kf(t,e,n,i){for(;t.nodeType===1;){var c=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[ts])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Je(t.nextSibling),t===null)break}return null}function Lf(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Je(t.nextSibling),t===null))return null;return t}function nl(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Nf(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Je(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var al=null;function Ph(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function Oh(t,e,n){switch(e=Xi(n),t){case"html":if(t=e.documentElement,!t)throw Error(s(452));return t;case"head":if(t=e.head,!t)throw Error(s(453));return t;case"body":if(t=e.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Bs(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ir(t)}var We=new Map,Dh=new Set;function $i(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var En=H.d;H.d={f:If,r:Uf,D:Bf,C:jf,L:Hf,m:zf,X:qf,S:Gf,M:Xf};function If(){var t=En.f(),e=Ii();return t||e}function Uf(t){var e=pa(t);e!==null&&e.tag===5&&e.type==="form"?Zc(e):En.r(t)}var Wa=typeof document>"u"?null:document;function Fh(t,e,n){var i=Wa;if(i&&typeof e=="string"&&e){var c=ze(e);c='link[rel="'+t+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Dh.has(c)||(Dh.add(c),t={rel:t,crossOrigin:n,href:e},i.querySelector(c)===null&&(e=i.createElement("link"),Se(e,"link",t),pe(e),i.head.appendChild(e)))}}function Bf(t){En.D(t),Fh("dns-prefetch",t,null)}function jf(t,e){En.C(t,e),Fh("preconnect",t,e)}function Hf(t,e,n){En.L(t,e,n);var i=Wa;if(i&&t&&e){var c='link[rel="preload"][as="'+ze(e)+'"]';e==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+ze(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+ze(n.imageSizes)+'"]')):c+='[href="'+ze(t)+'"]';var f=c;switch(e){case"style":f=Ka(t);break;case"script":f=Qa(t)}We.has(f)||(t=u({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),We.set(f,t),i.querySelector(c)!==null||e==="style"&&i.querySelector(js(f))||e==="script"&&i.querySelector(Hs(f))||(e=i.createElement("link"),Se(e,"link",t),pe(e),i.head.appendChild(e)))}}function zf(t,e){En.m(t,e);var n=Wa;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",c='link[rel="modulepreload"][as="'+ze(i)+'"][href="'+ze(t)+'"]',f=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Qa(t)}if(!We.has(f)&&(t=u({rel:"modulepreload",href:t},e),We.set(f,t),n.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Hs(f)))return}i=n.createElement("link"),Se(i,"link",t),pe(i),n.head.appendChild(i)}}}function Gf(t,e,n){En.S(t,e,n);var i=Wa;if(i&&t){var c=ma(i).hoistableStyles,f=Ka(t);e=e||"default";var M=c.get(f);if(!M){var L={loading:0,preload:null};if(M=i.querySelector(js(f)))L.loading=5;else{t=u({rel:"stylesheet",href:t,"data-precedence":e},n),(n=We.get(f))&&sl(t,n);var K=M=i.createElement("link");pe(K),Se(K,"link",t),K._p=new Promise(function(it,dt){K.onload=it,K.onerror=dt}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Yi(M,e,i)}M={type:"stylesheet",instance:M,count:1,state:L},c.set(f,M)}}}function qf(t,e){En.X(t,e);var n=Wa;if(n&&t){var i=ma(n).hoistableScripts,c=Qa(t),f=i.get(c);f||(f=n.querySelector(Hs(c)),f||(t=u({src:t,async:!0},e),(e=We.get(c))&&il(t,e),f=n.createElement("script"),pe(f),Se(f,"link",t),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(c,f))}}function Xf(t,e){En.M(t,e);var n=Wa;if(n&&t){var i=ma(n).hoistableScripts,c=Qa(t),f=i.get(c);f||(f=n.querySelector(Hs(c)),f||(t=u({src:t,async:!0,type:"module"},e),(e=We.get(c))&&il(t,e),f=n.createElement("script"),pe(f),Se(f,"link",t),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(c,f))}}function kh(t,e,n,i){var c=(c=v.current)?$i(c):null;if(!c)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ka(n.href),n=ma(c).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ka(n.href);var f=ma(c).hoistableStyles,M=f.get(t);if(M||(c=c.ownerDocument||c,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,M),(f=c.querySelector(js(t)))&&!f._p&&(M.instance=f,M.state.loading=5),We.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},We.set(t,n),f||$f(c,t,n,M.state))),e&&i===null)throw Error(s(528,""));return M}if(e&&i!==null)throw Error(s(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Qa(n),n=ma(c).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ka(t){return'href="'+ze(t)+'"'}function js(t){return'link[rel="stylesheet"]['+t+"]"}function Lh(t){return u({},t,{"data-precedence":t.precedence,precedence:null})}function $f(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Se(e,"link",n),pe(e),t.head.appendChild(e))}function Qa(t){return'[src="'+ze(t)+'"]'}function Hs(t){return"script[async]"+t}function Nh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+ze(n.href)+'"]');if(i)return e.instance=i,pe(i),i;var c=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),pe(i),Se(i,"style",c),Yi(i,n.precedence,t),e.instance=i;case"stylesheet":c=Ka(n.href);var f=t.querySelector(js(c));if(f)return e.state.loading|=4,e.instance=f,pe(f),f;i=Lh(n),(c=We.get(c))&&sl(i,c),f=(t.ownerDocument||t).createElement("link"),pe(f);var M=f;return M._p=new Promise(function(L,K){M.onload=L,M.onerror=K}),Se(f,"link",i),e.state.loading|=4,Yi(f,n.precedence,t),e.instance=f;case"script":return f=Qa(n.src),(c=t.querySelector(Hs(f)))?(e.instance=c,pe(c),c):(i=n,(c=We.get(f))&&(i=u({},n),il(i,c)),t=t.ownerDocument||t,c=t.createElement("script"),pe(c),Se(c,"link",i),t.head.appendChild(c),e.instance=c);case"void":return null;default:throw Error(s(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(i=e.instance,e.state.loading|=4,Yi(i,n.precedence,t));return e.instance}function Yi(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,f=c,M=0;M<i.length;M++){var L=i[M];if(L.dataset.precedence===e)f=L;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function sl(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function il(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Vi=null;function Ih(t,e,n){if(Vi===null){var i=new Map,c=Vi=new Map;c.set(n,i)}else c=Vi,i=c.get(n),i||(i=new Map,c.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),c=0;c<n.length;c++){var f=n[c];if(!(f[ts]||f[oe]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var M=f.getAttribute(e)||"";M=t+M;var L=i.get(M);L?L.push(f):i.set(M,[f])}}return i}function Uh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Yf(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Bh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zs=null;function Vf(){}function Wf(t,e,n){if(zs===null)throw Error(s(475));var i=zs;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var c=Ka(n.href),f=t.querySelector(js(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Wi.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=f,pe(f);return}f=t.ownerDocument||t,n=Lh(n),(c=We.get(c))&&sl(n,c),f=f.createElement("link"),pe(f);var M=f;M._p=new Promise(function(L,K){M.onload=L,M.onerror=K}),Se(f,"link",n),e.instance=f}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(i.count++,e=Wi.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function Kf(){if(zs===null)throw Error(s(475));var t=zs;return t.stylesheets&&t.count===0&&rl(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&rl(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Wi(){if(this.count--,this.count===0){if(this.stylesheets)rl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ki=null;function rl(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ki=new Map,e.forEach(Qf,t),Ki=null,Wi.call(t))}function Qf(t,e){if(!(e.state.loading&4)){var n=Ki.get(t);if(n)var i=n.get(null);else{n=new Map,Ki.set(t,n);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var M=c[f];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(n.set(M.dataset.precedence,M),i=M)}i&&n.set(null,i)}c=e.instance,M=c.getAttribute("data-precedence"),f=n.get(M)||i,f===i&&n.set(null,c),n.set(M,c),this.count++,i=Wi.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),e.state.loading|=4}}var Gs={$$typeof:B,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Zf(t,e,n,i,c,f,M,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tn(0),this.hiddenUpdates=tn(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function jh(t,e,n,i,c,f,M,L,K,it,dt,gt){return t=new Zf(t,e,n,M,L,K,it,gt),e=1,f===!0&&(e|=24),f=De(3,null,null,e),t.current=f,f.stateNode=t,e=jr(),e.refCount++,t.pooledCache=e,e.refCount++,f.memoizedState={element:i,isDehydrated:n,cache:e},qr(f),t}function Hh(t){return t?(t=Ta,t):Ta}function zh(t,e,n,i,c,f){c=Hh(c),i.context===null?i.context=c:i.pendingContext=c,i=Tn(e),i.payload={element:n},f=f===void 0?null:f,f!==null&&(i.callback=f),n=Mn(t,i,e),n!==null&&(Ie(n,t,e),bs(n,t,e))}function Gh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ol(t,e){Gh(t,e),(t=t.alternate)&&Gh(t,e)}function qh(t){if(t.tag===13){var e=wa(t,67108864);e!==null&&Ie(e,t,67108864),ol(t,67108864)}}var Qi=!0;function Jf(t,e,n,i){var c=V.T;V.T=null;var f=H.p;try{H.p=2,ll(t,e,n,i)}finally{H.p=f,V.T=c}}function tp(t,e,n,i){var c=V.T;V.T=null;var f=H.p;try{H.p=8,ll(t,e,n,i)}finally{H.p=f,V.T=c}}function ll(t,e,n,i){if(Qi){var c=cl(i);if(c===null)Wo(t,e,i,Zi,n),$h(t,i);else if(np(c,t,e,n,i))i.stopPropagation();else if($h(t,i),e&4&&-1<ep.indexOf(t)){for(;c!==null;){var f=pa(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var M=at(f.pendingLanes);if(M!==0){var L=f;for(L.pendingLanes|=2,L.entangledLanes|=2;M;){var K=1<<31-qt(M);L.entanglements[1]|=K,M&=~K}rn(f),(Xt&6)===0&&(Li=ut()+500,Ns(0))}}break;case 13:L=wa(f,2),L!==null&&Ie(L,f,2),Ii(),ol(f,2)}if(f=cl(i),f===null&&Wo(t,e,i,Zi,n),f===c)break;c=f}c!==null&&i.stopPropagation()}else Wo(t,e,i,null,n)}}function cl(t){return t=fr(t),ul(t)}var Zi=null;function ul(t){if(Zi=null,t=fa(t),t!==null){var e=m(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=S(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Zi=t,null}function Xh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ft()){case bt:return 2;case Et:return 8;case Rt:case Tt:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var hl=!1,zn=null,Gn=null,qn=null,qs=new Map,Xs=new Map,Xn=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $h(t,e){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(e.pointerId)}}function $s(t,e,n,i,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:f,targetContainers:[c]},e!==null&&(e=pa(e),e!==null&&qh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),t)}function np(t,e,n,i,c){switch(e){case"focusin":return zn=$s(zn,t,e,n,i,c),!0;case"dragenter":return Gn=$s(Gn,t,e,n,i,c),!0;case"mouseover":return qn=$s(qn,t,e,n,i,c),!0;case"pointerover":var f=c.pointerId;return qs.set(f,$s(qs.get(f)||null,t,e,n,i,c)),!0;case"gotpointercapture":return f=c.pointerId,Xs.set(f,$s(Xs.get(f)||null,t,e,n,i,c)),!0}return!1}function Yh(t){var e=fa(t.target);if(e!==null){var n=m(e);if(n!==null){if(e=n.tag,e===13){if(e=S(n),e!==null){t.blockedOn=e,da(t.priority,function(){if(n.tag===13){var i=Ne();i=Be(i);var c=wa(n,i);c!==null&&Ie(c,n,i),ol(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ji(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cl(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);dr=i,n.target.dispatchEvent(i),dr=null}else return e=pa(n),e!==null&&qh(e),t.blockedOn=n,!1;e.shift()}return!0}function Vh(t,e,n){Ji(t)&&n.delete(e)}function ap(){hl=!1,zn!==null&&Ji(zn)&&(zn=null),Gn!==null&&Ji(Gn)&&(Gn=null),qn!==null&&Ji(qn)&&(qn=null),qs.forEach(Vh),Xs.forEach(Vh)}function tr(t,e){t.blockedOn===e&&(t.blockedOn=null,hl||(hl=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ap)))}var er=null;function Wh(t){er!==t&&(er=t,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){er===t&&(er=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],c=t[e+2];if(typeof i!="function"){if(ul(i||n)===null)continue;break}var f=pa(n);f!==null&&(t.splice(e,3),e-=3,co(f,{pending:!0,data:c,method:n.method,action:i},i,c))}}))}function Ys(t){function e(K){return tr(K,t)}zn!==null&&tr(zn,t),Gn!==null&&tr(Gn,t),qn!==null&&tr(qn,t),qs.forEach(e),Xs.forEach(e);for(var n=0;n<Xn.length;n++){var i=Xn[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)Yh(n),n.blockedOn===null&&Xn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var c=n[i],f=n[i+1],M=c[fe]||null;if(typeof f=="function")M||Wh(n);else if(M){var L=null;if(f&&f.hasAttribute("formAction")){if(c=f,M=f[fe]||null)L=M.formAction;else if(ul(c)!==null)continue}else L=M.action;typeof L=="function"?n[i+1]=L:(n.splice(i,3),i-=3),Wh(n)}}}function dl(t){this._internalRoot=t}nr.prototype.render=dl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(s(409));var n=e.current,i=Ne();zh(n,i,t,e,null,null)},nr.prototype.unmount=dl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zh(t.current,2,null,t,null,null),Ii(),e[je]=null}};function nr(t){this._internalRoot=t}nr.prototype.unstable_scheduleHydration=function(t){if(t){var e=ne();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&Yh(t)}};var Kh=a.version;if(Kh!=="19.1.1")throw Error(s(527,Kh,"19.1.1"));H.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=R(e),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var sp={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ar=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ar.isDisabled&&ar.supportsFiber)try{ue=ar.inject(sp),Gt=ar}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!l(t))throw Error(s(299));var n=!1,i="",c=du,f=fu,M=pu,L=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(c=e.onUncaughtError),e.onCaughtError!==void 0&&(f=e.onCaughtError),e.onRecoverableError!==void 0&&(M=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(L=e.unstable_transitionCallbacks)),e=jh(t,1,!1,null,null,n,i,c,f,M,L,null),t[je]=e.current,Vo(t),new dl(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!l(t))throw Error(s(299));var i=!1,c="",f=du,M=fu,L=pu,K=null,it=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(M=n.onCaughtError),n.onRecoverableError!==void 0&&(L=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(K=n.unstable_transitionCallbacks),n.formState!==void 0&&(it=n.formState)),e=jh(t,1,!0,e,n??null,i,c,f,M,L,K,it),e.context=Hh(null),n=e.current,i=Ne(),i=Be(i),c=Tn(i),c.callback=null,Mn(n,c,i),n=i,e.current.lanes=n,Ue(e,n),rn(e),t[je]=e.current,Vo(t),new nr(e)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client$1.exports;hasRequiredClient=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),client$1.exports=requireReactDomClient_production(),client$1.exports}var clientExports=requireClient();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(o={}){function a(s,l){let{pathname:m,search:S,hash:w}=s.location;return createLocation("",{pathname:m,search:S,hash:w},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:createPath(l)}return getUrlBasedHistory(a,r,null,o)}function invariant(o,a){if(o===!1||o===null||typeof o>"u")throw new Error(a)}function warning(o,a){if(!o){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(o,a){return{usr:o.state,key:o.key,idx:a}}function createLocation(o,a,r=null,s){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof a=="string"?parsePath(a):a,state:r,key:a&&a.key||s||createKey()}}function createPath({pathname:o="/",search:a="",hash:r=""}){return a&&a!=="?"&&(o+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function parsePath(o){let a={};if(o){let r=o.indexOf("#");r>=0&&(a.hash=o.substring(r),o=o.substring(0,r));let s=o.indexOf("?");s>=0&&(a.search=o.substring(s),o=o.substring(0,s)),o&&(a.pathname=o)}return a}function getUrlBasedHistory(o,a,r,s={}){let{window:l=document.defaultView,v5Compat:m=!1}=s,S=l.history,w="POP",R=null,h=u();h==null&&(h=0,S.replaceState({...S.state,idx:h},""));function u(){return(S.state||{idx:null}).idx}function d(){w="POP";let E=u(),y=E==null?null:E-h;h=E,R&&R({action:w,location:b.location,delta:y})}function A(E,y){w="PUSH";let P=createLocation(b.location,E,y);h=u()+1;let B=getHistoryState(P,h),U=b.createHref(P);try{S.pushState(B,"",U)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;l.location.assign(U)}m&&R&&R({action:w,location:b.location,delta:1})}function _(E,y){w="REPLACE";let P=createLocation(b.location,E,y);h=u();let B=getHistoryState(P,h),U=b.createHref(P);S.replaceState(B,"",U),m&&R&&R({action:w,location:b.location,delta:0})}function p(E){return createBrowserURLImpl(E)}let b={get action(){return w},get location(){return o(l,S)},listen(E){if(R)throw new Error("A history only accepts one active listener");return l.addEventListener(PopStateEventType,d),R=E,()=>{l.removeEventListener(PopStateEventType,d),R=null}},createHref(E){return a(l,E)},createURL:p,encodeLocation(E){let y=p(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:A,replace:_,go(E){return S.go(E)}};return b}function createBrowserURLImpl(o,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(r,"No window.location.(origin|href) available to create URL");let s=typeof o=="string"?o:createPath(o);return s=s.replace(/ $/,"%20"),!a&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function matchRoutes(o,a,r="/"){return matchRoutesImpl(o,a,r,!1)}function matchRoutesImpl(o,a,r,s){let l=typeof a=="string"?parsePath(a):a,m=stripBasename(l.pathname||"/",r);if(m==null)return null;let S=flattenRoutes(o);rankRouteBranches(S);let w=null;for(let R=0;w==null&&R<S.length;++R){let h=decodePath(m);w=matchRouteBranch(S[R],h,s)}return w}function flattenRoutes(o,a=[],r=[],s=""){let l=(m,S,w)=>{let R={relativePath:w===void 0?m.path||"":w,caseSensitive:m.caseSensitive===!0,childrenIndex:S,route:m};R.relativePath.startsWith("/")&&(invariant(R.relativePath.startsWith(s),`Absolute route path "${R.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(s.length));let h=joinPaths([s,R.relativePath]),u=r.concat(R);m.children&&m.children.length>0&&(invariant(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),flattenRoutes(m.children,a,u,h)),!(m.path==null&&!m.index)&&a.push({path:h,score:computeScore(h,m.index),routesMeta:u})};return o.forEach((m,S)=>{if(m.path===""||!m.path?.includes("?"))l(m,S);else for(let w of explodeOptionalSegments(m.path))l(m,S,w)}),a}function explodeOptionalSegments(o){let a=o.split("/");if(a.length===0)return[];let[r,...s]=a,l=r.endsWith("?"),m=r.replace(/\?$/,"");if(s.length===0)return l?[m,""]:[m];let S=explodeOptionalSegments(s.join("/")),w=[];return w.push(...S.map(R=>R===""?m:[m,R].join("/"))),l&&w.push(...S),w.map(R=>o.startsWith("/")&&R===""?"/":R)}function rankRouteBranches(o){o.sort((a,r)=>a.score!==r.score?r.score-a.score:compareIndexes(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,a){let r=o.split("/"),s=r.length;return r.some(isSplat)&&(s+=splatPenalty),a&&(s+=indexRouteValue),r.filter(l=>!isSplat(l)).reduce((l,m)=>l+(paramRe.test(m)?dynamicSegmentValue:m===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(o,a){return o.length===a.length&&o.slice(0,-1).every((s,l)=>s===a[l])?o[o.length-1]-a[a.length-1]:0}function matchRouteBranch(o,a,r=!1){let{routesMeta:s}=o,l={},m="/",S=[];for(let w=0;w<s.length;++w){let R=s[w],h=w===s.length-1,u=m==="/"?a:a.slice(m.length)||"/",d=matchPath({path:R.relativePath,caseSensitive:R.caseSensitive,end:h},u),A=R.route;if(!d&&h&&r&&!s[s.length-1].route.index&&(d=matchPath({path:R.relativePath,caseSensitive:R.caseSensitive,end:!1},u)),!d)return null;Object.assign(l,d.params),S.push({params:l,pathname:joinPaths([m,d.pathname]),pathnameBase:normalizePathname(joinPaths([m,d.pathnameBase])),route:A}),d.pathnameBase!=="/"&&(m=joinPaths([m,d.pathnameBase]))}return S}function matchPath(o,a){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,s]=compilePath(o.path,o.caseSensitive,o.end),l=a.match(r);if(!l)return null;let m=l[0],S=m.replace(/(.)\/+$/,"$1"),w=l.slice(1);return{params:s.reduce((h,{paramName:u,isOptional:d},A)=>{if(u==="*"){let p=w[A]||"";S=m.slice(0,m.length-p.length).replace(/(.)\/+$/,"$1")}const _=w[A];return d&&!_?h[u]=void 0:h[u]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:m,pathnameBase:S,pattern:o}}function compilePath(o,a=!1,r=!0){warning(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let s=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(S,w,R)=>(s.push({paramName:w,isOptional:R!=null}),R?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(s.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),s]}function decodePath(o){try{return o.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return warning(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),o}}function stripBasename(o,a){if(a==="/")return o;if(!o.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=o.charAt(r);return s&&s!=="/"?null:o.slice(r)||"/"}function resolvePath(o,a="/"){let{pathname:r,search:s="",hash:l=""}=typeof o=="string"?parsePath(o):o;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,a):a,search:normalizeSearch(s),hash:normalizeHash(l)}}function resolvePathname(o,a){let r=a.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(o,a,r,s){return`Cannot include a '${o}' character in a manually specified \`to.${a}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(o){return o.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function getResolveToMatches(o){let a=getPathContributingMatches(o);return a.map((r,s)=>s===a.length-1?r.pathname:r.pathnameBase)}function resolveTo(o,a,r,s=!1){let l;typeof o=="string"?l=parsePath(o):(l={...o},invariant(!l.pathname||!l.pathname.includes("?"),getInvalidPathError("?","pathname","search",l)),invariant(!l.pathname||!l.pathname.includes("#"),getInvalidPathError("#","pathname","hash",l)),invariant(!l.search||!l.search.includes("#"),getInvalidPathError("#","search","hash",l)));let m=o===""||l.pathname==="",S=m?"/":l.pathname,w;if(S==null)w=r;else{let d=a.length-1;if(!s&&S.startsWith("..")){let A=S.split("/");for(;A[0]==="..";)A.shift(),d-=1;l.pathname=A.join("/")}w=d>=0?a[d]:"/"}let R=resolvePath(l,w),h=S&&S!=="/"&&S.endsWith("/"),u=(m||S===".")&&r.endsWith("/");return!R.pathname.endsWith("/")&&(h||u)&&(R.pathname+="/"),R}var joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(o,{relative:a}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=reactExports.useContext(NavigationContext),{hash:l,pathname:m,search:S}=useResolvedPath(o,{relative:a}),w=m;return r!=="/"&&(w=m==="/"?r:joinPaths([r,m])),s.createHref({pathname:w,search:S,hash:l})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(o){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(o)}function useNavigate(){let{isDataRoute:o}=reactExports.useContext(RouteContext);return o?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let o=reactExports.useContext(DataRouterContext),{basename:a,navigator:r}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),m=JSON.stringify(getResolveToMatches(s)),S=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{S.current=!0}),reactExports.useCallback((R,h={})=>{if(warning(S.current,navigateEffectWarning),!S.current)return;if(typeof R=="number"){r.go(R);return}let u=resolveTo(R,JSON.parse(m),l,h.relative==="path");o==null&&a!=="/"&&(u.pathname=u.pathname==="/"?a:joinPaths([a,u.pathname])),(h.replace?r.replace:r.push)(u,h.state,h)},[a,r,m,l,o])}reactExports.createContext(null);function useResolvedPath(o,{relative:a}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),l=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(o,JSON.parse(l),s,a==="path"),[o,l,s,a])}function useRoutes(o,a){return useRoutesImpl(o,a)}function useRoutesImpl(o,a,r,s){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=reactExports.useContext(NavigationContext),{matches:m}=reactExports.useContext(RouteContext),S=m[m.length-1],w=S?S.params:{},R=S?S.pathname:"/",h=S?S.pathnameBase:"/",u=S&&S.route;{let y=u&&u.path||"";warningOnce(R,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let d=useLocation(),A;if(a){let y=typeof a=="string"?parsePath(a):a;invariant(h==="/"||y.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=d;let _=A.pathname||"/",p=_;if(h!=="/"){let y=h.replace(/^\//,"").split("/");p="/"+_.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=matchRoutes(o,{pathname:p});warning(u||b!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),warning(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=_renderMatches(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},w,y.params),pathname:joinPaths([h,l.encodeLocation?l.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?h:joinPaths([h,l.encodeLocation?l.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),m,r,s);return a&&E?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function DefaultErrorComponent(){let o=useRouteError(),a=isRouteErrorResponse(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},m={padding:"2px 4px",backgroundColor:s},S=null;return console.error("Error handled by React Router default ErrorBoundary:",o),S=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:m},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:m},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},a),r?reactExports.createElement("pre",{style:l},r):null,S)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,a){return a.location!==o.location||a.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:a.error,location:a.location,revalidation:o.revalidation||a.revalidation}}componentDidCatch(o,a){console.error("React Router caught the following error during render",o,a)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:o,match:a,children:r}){let s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),reactExports.createElement(RouteContext.Provider,{value:o},r)}function _renderMatches(o,a=[],r=null,s=null){if(o==null){if(!r)return null;if(r.errors)o=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let l=o,m=r?.errors;if(m!=null){let R=l.findIndex(h=>h.route.id&&m?.[h.route.id]!==void 0);invariant(R>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),l=l.slice(0,Math.min(l.length,R+1))}let S=!1,w=-1;if(r)for(let R=0;R<l.length;R++){let h=l[R];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(w=R),h.route.id){let{loaderData:u,errors:d}=r,A=h.route.loader&&!u.hasOwnProperty(h.route.id)&&(!d||d[h.route.id]===void 0);if(h.route.lazy||A){S=!0,w>=0?l=l.slice(0,w+1):l=[l[0]];break}}}return l.reduceRight((R,h,u)=>{let d,A=!1,_=null,p=null;r&&(d=m&&h.route.id?m[h.route.id]:void 0,_=h.route.errorElement||defaultErrorElement,S&&(w<0&&u===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,p=null):w===u&&(A=!0,p=h.route.hydrateFallbackElement||null)));let b=a.concat(l.slice(0,u+1)),E=()=>{let y;return d?y=_:A?y=p:h.route.Component?y=reactExports.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=R,reactExports.createElement(RenderedRoute,{match:h,routeContext:{outlet:R,matches:b,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:_,error:d,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}function getDataRouterConsoleError(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(o){let a=reactExports.useContext(DataRouterContext);return invariant(a,getDataRouterConsoleError(o)),a}function useDataRouterState(o){let a=reactExports.useContext(DataRouterStateContext);return invariant(a,getDataRouterConsoleError(o)),a}function useRouteContext(o){let a=reactExports.useContext(RouteContext);return invariant(a,getDataRouterConsoleError(o)),a}function useCurrentRouteId(o){let a=useRouteContext(o),r=a.matches[a.matches.length-1];return invariant(r.route.id,`${o} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let o=reactExports.useContext(RouteErrorContext),a=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return o!==void 0?o:a.errors?.[r]}function useNavigateStable(){let{router:o}=useDataRouterContext("useNavigate"),a=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{r.current=!0}),reactExports.useCallback(async(l,m={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof l=="number"?o.navigate(l):await o.navigate(l,{fromRouteId:a,...m}))},[o,a])}var alreadyWarned={};function warningOnce(o,a,r){!a&&!alreadyWarned[o]&&(alreadyWarned[o]=!0,warning(!1,r))}reactExports.memo(DataRoutes);function DataRoutes({routes:o,future:a,state:r}){return useRoutesImpl(o,void 0,r,a)}function Route(o){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:o="/",children:a=null,location:r,navigationType:s="POP",navigator:l,static:m=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let S=o.replace(/^\/*/,"/"),w=reactExports.useMemo(()=>({basename:S,navigator:l,static:m,future:{}}),[S,l,m]);typeof r=="string"&&(r=parsePath(r));let{pathname:R="/",search:h="",hash:u="",state:d=null,key:A="default"}=r,_=reactExports.useMemo(()=>{let p=stripBasename(R,S);return p==null?null:{location:{pathname:p,search:h,hash:u,state:d,key:A},navigationType:s}},[S,R,h,u,d,A,s]);return warning(_!=null,`<Router basename="${S}"> is not able to match the URL "${R}${h}${u}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:reactExports.createElement(NavigationContext.Provider,{value:w},reactExports.createElement(LocationContext.Provider,{children:a,value:_}))}function Routes({children:o,location:a}){return useRoutes(createRoutesFromChildren(o),a)}function createRoutesFromChildren(o,a=[]){let r=[];return reactExports.Children.forEach(o,(s,l)=>{if(!reactExports.isValidElement(s))return;let m=[...a,l];if(s.type===reactExports.Fragment){r.push.apply(r,createRoutesFromChildren(s.props.children,m));return}invariant(s.type===Route,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!s.props.index||!s.props.children,"An index route cannot have child routes.");let S={id:s.props.id||m.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(S.children=createRoutesFromChildren(s.props.children,m)),r.push(S)}),r}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(o){return o!=null&&typeof o.tagName=="string"}function isButtonElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="button"}function isFormElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="form"}function isInputElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="input"}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,a){return o.button===0&&(!a||a==="_self")&&!isModifiedEvent(o)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(o){return o!=null&&!supportedFormEncTypes.has(o)?(warning(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):o}function getFormSubmissionInfo(o,a){let r,s,l,m,S;if(isFormElement(o)){let w=o.getAttribute("action");s=w?stripBasename(w,a):null,r=o.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("enctype"))||defaultEncType,m=new FormData(o)}else if(isButtonElement(o)||isInputElement(o)&&(o.type==="submit"||o.type==="image")){let w=o.form;if(w==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let R=o.getAttribute("formaction")||w.getAttribute("action");if(s=R?stripBasename(R,a):null,r=o.getAttribute("formmethod")||w.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("formenctype"))||getFormEncType(w.getAttribute("enctype"))||defaultEncType,m=new FormData(w,o),!isFormDataSubmitterSupported()){let{name:h,type:u,value:d}=o;if(u==="image"){let A=h?`${h}.`:"";m.append(`${A}x`,"0"),m.append(`${A}y`,"0")}else h&&m.append(h,d)}}else{if(isHtmlElement(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,s=null,l=defaultEncType,S=o}return m&&l==="text/plain"&&(S=m,m=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:m,body:S}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(o,a){if(o===!1||o===null||typeof o>"u")throw new Error(a)}function singleFetchUrl(o,a,r){let s=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return s.pathname==="/"?s.pathname=`_root.${r}`:a&&stripBasename(s.pathname,a)==="/"?s.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function loadRouteModule(o,a){if(o.id in a)return a[o.id];try{let r=await import(o.module);return a[o.id]=r,r}catch(r){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function getKeyedPrefetchLinks(o,a,r){let s=await Promise.all(o.map(async l=>{let m=a.routes[l.route.id];if(m){let S=await loadRouteModule(m,r);return S.links?S.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function getNewMatchesForLinks(o,a,r,s,l,m){let S=(R,h)=>r[h]?R.route.id!==r[h].route.id:!0,w=(R,h)=>r[h].pathname!==R.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==R.params["*"];return m==="assets"?a.filter((R,h)=>S(R,h)||w(R,h)):m==="data"?a.filter((R,h)=>{let u=s.routes[R.route.id];if(!u||!u.hasLoader)return!1;if(S(R,h)||w(R,h))return!0;if(R.route.shouldRevalidate){let d=R.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:R.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function getModuleLinkHrefs(o,a,{includeHydrateFallback:r}={}){return dedupeHrefs(o.map(s=>{let l=a.routes[s.route.id];if(!l)return[];let m=[l.module];return l.clientActionModule&&(m=m.concat(l.clientActionModule)),l.clientLoaderModule&&(m=m.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(m=m.concat(l.hydrateFallbackModule)),l.imports&&(m=m.concat(l.imports)),m}).flat(1))}function dedupeHrefs(o){return[...new Set(o)]}function sortKeys(o){let a={},r=Object.keys(o).sort();for(let s of r)a[s]=o[s];return a}function dedupeLinkDescriptors(o,a){let r=new Set;return new Set(a),o.reduce((s,l)=>{let m=JSON.stringify(sortKeys(l));return r.has(m)||(r.add(m),s.push({key:m,link:l})),s},[])}function useDataRouterContext2(){let o=reactExports.useContext(DataRouterContext);return invariant2(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function useDataRouterStateContext(){let o=reactExports.useContext(DataRouterStateContext);return invariant2(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let o=reactExports.useContext(FrameworkContext);return invariant2(o,"You must render this element inside a <HydratedRouter> element"),o}function usePrefetchBehavior(o,a){let r=reactExports.useContext(FrameworkContext),[s,l]=reactExports.useState(!1),[m,S]=reactExports.useState(!1),{onFocus:w,onBlur:R,onMouseEnter:h,onMouseLeave:u,onTouchStart:d}=a,A=reactExports.useRef(null);reactExports.useEffect(()=>{if(o==="render"&&S(!0),o==="viewport"){let b=y=>{y.forEach(P=>{S(P.isIntersecting)})},E=new IntersectionObserver(b,{threshold:.5});return A.current&&E.observe(A.current),()=>{E.disconnect()}}},[o]),reactExports.useEffect(()=>{if(s){let b=setTimeout(()=>{S(!0)},100);return()=>{clearTimeout(b)}}},[s]);let _=()=>{l(!0)},p=()=>{l(!1),S(!1)};return r?o!=="intent"?[m,A,{}]:[m,A,{onFocus:composeEventHandlers(w,_),onBlur:composeEventHandlers(R,p),onMouseEnter:composeEventHandlers(h,_),onMouseLeave:composeEventHandlers(u,p),onTouchStart:composeEventHandlers(d,_)}]:[!1,A,{}]}function composeEventHandlers(o,a){return r=>{o&&o(r),r.defaultPrevented||a(r)}}function PrefetchPageLinks({page:o,...a}){let{router:r}=useDataRouterContext2(),s=reactExports.useMemo(()=>matchRoutes(r.routes,o,r.basename),[r.routes,o,r.basename]);return s?reactExports.createElement(PrefetchPageLinksImpl,{page:o,matches:s,...a}):null}function useKeyedPrefetchLinks(o){let{manifest:a,routeModules:r}=useFrameworkContext(),[s,l]=reactExports.useState([]);return reactExports.useEffect(()=>{let m=!1;return getKeyedPrefetchLinks(o,a,r).then(S=>{m||l(S)}),()=>{m=!0}},[o,a,r]),s}function PrefetchPageLinksImpl({page:o,matches:a,...r}){let s=useLocation(),{manifest:l,routeModules:m}=useFrameworkContext(),{basename:S}=useDataRouterContext2(),{loaderData:w,matches:R}=useDataRouterStateContext(),h=reactExports.useMemo(()=>getNewMatchesForLinks(o,a,R,l,s,"data"),[o,a,R,l,s]),u=reactExports.useMemo(()=>getNewMatchesForLinks(o,a,R,l,s,"assets"),[o,a,R,l,s]),d=reactExports.useMemo(()=>{if(o===s.pathname+s.search+s.hash)return[];let p=new Set,b=!1;if(a.forEach(y=>{let P=l.routes[y.route.id];!P||!P.hasLoader||(!h.some(B=>B.route.id===y.route.id)&&y.route.id in w&&m[y.route.id]?.shouldRevalidate||P.hasClientLoader?b=!0:p.add(y.route.id))}),p.size===0)return[];let E=singleFetchUrl(o,S,"data");return b&&p.size>0&&E.searchParams.set("_routes",a.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[E.pathname+E.search]},[S,w,s,l,h,a,o,m]),A=reactExports.useMemo(()=>getModuleLinkHrefs(u,l),[u,l]),_=useKeyedPrefetchLinks(u);return reactExports.createElement(reactExports.Fragment,null,d.map(p=>reactExports.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),A.map(p=>reactExports.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),_.map(({key:p,link:b})=>reactExports.createElement("link",{key:p,...b})))}function mergeRefs(...o){return a=>{o.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.7.1")}catch{}function BrowserRouter({basename:o,children:a,window:r}){let s=reactExports.useRef();s.current==null&&(s.current=createBrowserHistory({window:r,v5Compat:!0}));let l=s.current,[m,S]=reactExports.useState({action:l.action,location:l.location}),w=reactExports.useCallback(R=>{reactExports.startTransition(()=>S(R))},[S]);return reactExports.useLayoutEffect(()=>l.listen(w),[l,w]),reactExports.createElement(Router,{basename:o,children:a,location:m.location,navigationType:m.action,navigator:l})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:a,discover:r="render",prefetch:s="none",relative:l,reloadDocument:m,replace:S,state:w,target:R,to:h,preventScrollReset:u,viewTransition:d,...A},_){let{basename:p}=reactExports.useContext(NavigationContext),b=typeof h=="string"&&ABSOLUTE_URL_REGEX2.test(h),E,y=!1;if(typeof h=="string"&&b&&(E=h,isBrowser))try{let X=new URL(window.location.href),J=h.startsWith("//")?new URL(X.protocol+h):new URL(h),tt=stripBasename(J.pathname,p);J.origin===X.origin&&tt!=null?h=tt+J.search+J.hash:y=!0}catch{warning(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=useHref(h,{relative:l}),[B,U,C]=usePrefetchBehavior(s,A),k=useLinkClickHandler(h,{replace:S,state:w,target:R,preventScrollReset:u,relative:l,viewTransition:d});function $(X){a&&a(X),X.defaultPrevented||k(X)}let Y=reactExports.createElement("a",{...A,...C,href:E||P,onClick:y||m?a:$,ref:mergeRefs(_,U),target:R,"data-discover":!b&&r==="render"?"true":void 0});return B&&!b?reactExports.createElement(reactExports.Fragment,null,Y,reactExports.createElement(PrefetchPageLinks,{page:P})):Y});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:s="",end:l=!1,style:m,to:S,viewTransition:w,children:R,...h},u){let d=useResolvedPath(S,{relative:h.relative}),A=useLocation(),_=reactExports.useContext(DataRouterStateContext),{navigator:p,basename:b}=reactExports.useContext(NavigationContext),E=_!=null&&useViewTransitionState(d)&&w===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,P=A.pathname,B=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(P=P.toLowerCase(),B=B?B.toLowerCase():null,y=y.toLowerCase()),B&&b&&(B=stripBasename(B,b)||B);const U=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=P===y||!l&&P.startsWith(y)&&P.charAt(U)==="/",k=B!=null&&(B===y||!l&&B.startsWith(y)&&B.charAt(y.length)==="/"),$={isActive:C,isPending:k,isTransitioning:E},Y=C?a:void 0,X;typeof s=="function"?X=s($):X=[s,C?"active":null,k?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let J=typeof m=="function"?m($):m;return reactExports.createElement(Link,{...h,"aria-current":Y,className:X,ref:u,style:J,to:S,viewTransition:w},typeof R=="function"?R($):R)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:o="render",fetcherKey:a,navigate:r,reloadDocument:s,replace:l,state:m,method:S=defaultMethod,action:w,onSubmit:R,relative:h,preventScrollReset:u,viewTransition:d,...A},_)=>{let p=useSubmit(),b=useFormAction(w,{relative:h}),E=S.toLowerCase()==="get"?"get":"post",y=typeof w=="string"&&ABSOLUTE_URL_REGEX2.test(w),P=B=>{if(R&&R(B),B.defaultPrevented)return;B.preventDefault();let U=B.nativeEvent.submitter,C=U?.getAttribute("formmethod")||S;p(U||B.currentTarget,{fetcherKey:a,method:C,navigate:r,replace:l,state:m,relative:h,preventScrollReset:u,viewTransition:d})};return reactExports.createElement("form",{ref:_,method:E,action:b,onSubmit:s?R:P,...A,"data-discover":!y&&o==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(o){let a=reactExports.useContext(DataRouterContext);return invariant(a,getDataRouterConsoleError2(o)),a}function useLinkClickHandler(o,{target:a,replace:r,state:s,preventScrollReset:l,relative:m,viewTransition:S}={}){let w=useNavigate(),R=useLocation(),h=useResolvedPath(o,{relative:m});return reactExports.useCallback(u=>{if(shouldProcessLinkClick(u,a)){u.preventDefault();let d=r!==void 0?r:createPath(R)===createPath(h);w(o,{replace:d,state:s,preventScrollReset:l,relative:m,viewTransition:S})}},[R,w,h,r,s,a,o,l,m,S])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:o}=useDataRouterContext3("useSubmit"),{basename:a}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(s,l={})=>{let{action:m,method:S,encType:w,formData:R,body:h}=getFormSubmissionInfo(s,a);if(l.navigate===!1){let u=l.fetcherKey||getUniqueFetcherId();await o.fetch(u,r,l.action||m,{preventScrollReset:l.preventScrollReset,formData:R,body:h,formMethod:l.method||S,formEncType:l.encType||w,flushSync:l.flushSync})}else await o.navigate(l.action||m,{preventScrollReset:l.preventScrollReset,formData:R,body:h,formMethod:l.method||S,formEncType:l.encType||w,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[o,a,r])}function useFormAction(o,{relative:a}={}){let{basename:r}=reactExports.useContext(NavigationContext),s=reactExports.useContext(RouteContext);invariant(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),m={...useResolvedPath(o||".",{relative:a})},S=useLocation();if(o==null){m.search=S.search;let w=new URLSearchParams(m.search),R=w.getAll("index");if(R.some(u=>u==="")){w.delete("index"),R.filter(d=>d).forEach(d=>w.append("index",d));let u=w.toString();m.search=u?`?${u}`:""}}return(!o||o===".")&&l.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(m.pathname=m.pathname==="/"?r:joinPaths([r,m.pathname])),createPath(m)}function useViewTransitionState(o,{relative:a}={}){let r=reactExports.useContext(ViewTransitionContext);invariant(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),l=useResolvedPath(o,{relative:a});if(!r.isTransitioning)return!1;let m=stripBasename(r.currentLocation.pathname,s)||r.currentLocation.pathname,S=stripBasename(r.nextLocation.pathname,s)||r.nextLocation.pathname;return matchPath(l.pathname,S)!=null||matchPath(l.pathname,m)!=null}function Start(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen px-6 py-10 flex flex-col items-center justify-center text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Get Ready to Rehance Your Resume ⚡"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 max-w-2xl text-lg mb-12",children:"Whether you're aiming to fine-tune your existing resume or craft a brand-new one from scratch, Rehancer is here to guide you. Choose a path below: analyze and improve your current resume, or let our builder help you create a standout resume tailored to your dream job."}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 max-w-5xl w-full",children:[jsxRuntimeExports.jsxs("div",{className:"group bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden transition hover:scale-105 hover:border-green-500 hover:shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"📊 Resume Analyzer"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-md mb-6",children:"Upload your resume and let our AI scan, analyze, and enhance it based on your dream job. You'll get tailored feedback in seconds."}),jsxRuntimeExports.jsx(Link,{to:"/analyze",className:"inline-block bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-full transition",children:"Go"})]}),jsxRuntimeExports.jsxs("div",{className:"group bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden transition hover:scale-105 hover:border-green-500 hover:shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"🛠️ Resume Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-md mb-6",children:"Start fresh with our guided builder. It walks you step-by-step through crafting a polished resume tailored to your job goals."}),jsxRuntimeExports.jsx("button",{onClick:()=>alert("Resume Builder coming soon!"),className:"inline-block bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-full transition",children:"Go"})]})]})]})})}function __classPrivateFieldSet(o,a,r,s,l){if(typeof a=="function"?o!==a||!0:!a.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a.set(o,r),r}function __classPrivateFieldGet(o,a,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?o!==a||!s:!a.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(o):s?s.value:a.get(o)}let uuid4=function(){const{crypto:o}=globalThis;if(o?.randomUUID)return uuid4=o.randomUUID.bind(o),o.randomUUID();const a=new Uint8Array(1),r=o?()=>o.getRandomValues(a)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^r()&15>>+s/4).toString(16))};function isAbortError(o){return typeof o=="object"&&o!==null&&("name"in o&&o.name==="AbortError"||"message"in o&&String(o.message).includes("FetchRequestCanceledException"))}const castToError=o=>{if(o instanceof Error)return o;if(typeof o=="object"&&o!==null){try{if(Object.prototype.toString.call(o)==="[object Error]"){const a=new Error(o.message,o.cause?{cause:o.cause}:{});return o.stack&&(a.stack=o.stack),o.cause&&!a.cause&&(a.cause=o.cause),o.name&&(a.name=o.name),a}}catch{}try{return new Error(JSON.stringify(o))}catch{}}return new Error(o)};class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(a,r,s,l){super(`${APIError.makeMessage(a,r,s)}`),this.status=a,this.headers=l,this.requestID=l?.get("x-request-id"),this.error=r;const m=r;this.code=m?.code,this.param=m?.param,this.type=m?.type}static makeMessage(a,r,s){const l=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):s;return a&&l?`${a} ${l}`:a?`${a} status code (no body)`:l||"(no status code or body)"}static generate(a,r,s,l){if(!a||!l)return new APIConnectionError({message:s,cause:castToError(r)});const m=r?.error;return a===400?new BadRequestError(a,m,s,l):a===401?new AuthenticationError(a,m,s,l):a===403?new PermissionDeniedError(a,m,s,l):a===404?new NotFoundError(a,m,s,l):a===409?new ConflictError(a,m,s,l):a===422?new UnprocessableEntityError(a,m,s,l):a===429?new RateLimitError(a,m,s,l):a>=500?new InternalServerError(a,m,s,l):new APIError(a,m,s,l)}}class APIUserAbortError extends APIError{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:a,cause:r}){super(void 0,void 0,a||"Connection error.",void 0),r&&(this.cause=r)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:a}={}){super({message:a??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class InvalidWebhookSignatureError extends Error{constructor(a){super(a)}}const startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=o=>startsWithSchemeRegexp.test(o);let isArray=o=>(isArray=Array.isArray,isArray(o)),isReadonlyArray=isArray;function maybeObj(o){return typeof o!="object"?{}:o??{}}function isEmptyObj(o){if(!o)return!0;for(const a in o)return!1;return!0}function hasOwn(o,a){return Object.prototype.hasOwnProperty.call(o,a)}function isObj(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)}const validatePositiveInteger=(o,a)=>{if(typeof a!="number"||!Number.isInteger(a))throw new OpenAIError(`${o} must be an integer`);if(a<0)throw new OpenAIError(`${o} must be a positive integer`);return a},safeJSON=o=>{try{return JSON.parse(o)}catch{return}},sleep=o=>new Promise(a=>setTimeout(a,o)),VERSION="5.11.0",isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function getDetectedPlatform(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const getPlatformProperties=()=>{const o=getDetectedPlatform();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(globalThis.process.platform??"unknown"),"X-Stainless-Arch":normalizeArch(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const a=getBrowserInfo();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const o=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:a,pattern:r}of o){const s=r.exec(navigator.userAgent);if(s){const l=s[1]||0,m=s[2]||0,S=s[3]||0;return{browser:a,version:`${l}.${m}.${S}`}}}return null}const normalizeArch=o=>o==="x32"?"x32":o==="x86_64"||o==="x64"?"x64":o==="arm"?"arm":o==="aarch64"||o==="arm64"?"arm64":o?`other:${o}`:"unknown",normalizePlatform=o=>(o=o.toLowerCase(),o.includes("ios")?"iOS":o==="android"?"Android":o==="darwin"?"MacOS":o==="win32"?"Windows":o==="freebsd"?"FreeBSD":o==="openbsd"?"OpenBSD":o==="linux"?"Linux":o?`Other:${o}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties());function getDefaultFetch(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function makeReadableStream(...o){const a=globalThis.ReadableStream;if(typeof a>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new a(...o)}function ReadableStreamFrom(o){let a=Symbol.asyncIterator in o?o[Symbol.asyncIterator]():o[Symbol.iterator]();return makeReadableStream({start(){},async pull(r){const{done:s,value:l}=await a.next();s?r.close():r.enqueue(l)},async cancel(){await a.return?.()}})}function ReadableStreamToAsyncIterable(o){if(o[Symbol.asyncIterator])return o;const a=o.getReader();return{async next(){try{const r=await a.read();return r?.done&&a.releaseLock(),r}catch(r){throw a.releaseLock(),r}},async return(){const r=a.cancel();return a.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CancelReadableStream(o){if(o===null||typeof o!="object")return;if(o[Symbol.asyncIterator]){await o[Symbol.asyncIterator]().return?.();return}const a=o.getReader(),r=a.cancel();a.releaseLock(),await r}const FallbackEncoder=({headers:o,body:a})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(a)}),default_format="RFC3986",default_formatter=o=>String(o),formatters={RFC1738:o=>String(o).replace(/%20/g,"+"),RFC3986:default_formatter},RFC1738="RFC1738";let has=(o,a)=>(has=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),has(o,a));const hex_table=(()=>{const o=[];for(let a=0;a<256;++a)o.push("%"+((a<16?"0":"")+a.toString(16)).toUpperCase());return o})(),limit=1024,encode=(o,a,r,s,l)=>{if(o.length===0)return o;let m=o;if(typeof o=="symbol"?m=Symbol.prototype.toString.call(o):typeof o!="string"&&(m=String(o)),r==="iso-8859-1")return escape(m).replace(/%u[0-9a-f]{4}/gi,function(w){return"%26%23"+parseInt(w.slice(2),16)+"%3B"});let S="";for(let w=0;w<m.length;w+=limit){const R=m.length>=limit?m.slice(w,w+limit):m,h=[];for(let u=0;u<R.length;++u){let d=R.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||l===RFC1738&&(d===40||d===41)){h[h.length]=R.charAt(u);continue}if(d<128){h[h.length]=hex_table[d];continue}if(d<2048){h[h.length]=hex_table[192|d>>6]+hex_table[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=hex_table[224|d>>12]+hex_table[128|d>>6&63]+hex_table[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|R.charCodeAt(u)&1023),h[h.length]=hex_table[240|d>>18]+hex_table[128|d>>12&63]+hex_table[128|d>>6&63]+hex_table[128|d&63]}S+=h.join("")}return S};function is_buffer(o){return!o||typeof o!="object"?!1:!!(o.constructor&&o.constructor.isBuffer&&o.constructor.isBuffer(o))}function maybe_map(o,a){if(isArray(o)){const r=[];for(let s=0;s<o.length;s+=1)r.push(a(o[s]));return r}return a(o)}const array_prefix_generators={brackets(o){return String(o)+"[]"},comma:"comma",indices(o,a){return String(o)+"["+a+"]"},repeat(o){return String(o)}},push_to_array=function(o,a){Array.prototype.push.apply(o,isArray(a)?a:[a])};let toISOString;const defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:default_formatter,indices:!1,serializeDate(o){return(toISOString??(toISOString=Function.prototype.call.bind(Date.prototype.toISOString)))(o)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(o){return typeof o=="string"||typeof o=="number"||typeof o=="boolean"||typeof o=="symbol"||typeof o=="bigint"}const sentinel={};function inner_stringify(o,a,r,s,l,m,S,w,R,h,u,d,A,_,p,b,E,y){let P=o,B=y,U=0,C=!1;for(;(B=B.get(sentinel))!==void 0&&!C;){const J=B.get(o);if(U+=1,typeof J<"u"){if(J===U)throw new RangeError("Cyclic object value");C=!0}typeof B.get(sentinel)>"u"&&(U=0)}if(typeof h=="function"?P=h(a,P):P instanceof Date?P=A?.(P):r==="comma"&&isArray(P)&&(P=maybe_map(P,function(J){return J instanceof Date?A?.(J):J})),P===null){if(m)return R&&!b?R(a,defaults.encoder,E,"key",_):a;P=""}if(is_non_nullish_primitive(P)||is_buffer(P)){if(R){const J=b?a:R(a,defaults.encoder,E,"key",_);return[p?.(J)+"="+p?.(R(P,defaults.encoder,E,"value",_))]}return[p?.(a)+"="+p?.(String(P))]}const k=[];if(typeof P>"u")return k;let $;if(r==="comma"&&isArray(P))b&&R&&(P=maybe_map(P,R)),$=[{value:P.length>0?P.join(",")||null:void 0}];else if(isArray(h))$=h;else{const J=Object.keys(P);$=u?J.sort(u):J}const Y=w?String(a).replace(/\./g,"%2E"):String(a),X=s&&isArray(P)&&P.length===1?Y+"[]":Y;if(l&&isArray(P)&&P.length===0)return X+"[]";for(let J=0;J<$.length;++J){const tt=$[J],_t=typeof tt=="object"&&typeof tt.value<"u"?tt.value:P[tt];if(S&&_t===null)continue;const mt=d&&w?tt.replace(/\./g,"%2E"):tt,yt=isArray(P)?typeof r=="function"?r(X,mt):X:X+(d?"."+mt:"["+mt+"]");y.set(o,U);const At=new WeakMap;At.set(sentinel,y),push_to_array(k,inner_stringify(_t,yt,r,s,l,m,S,w,r==="comma"&&b&&isArray(P)?null:R,h,u,d,A,_,p,b,E,At))}return k}function normalize_stringify_options(o=defaults){if(typeof o.allowEmptyArrays<"u"&&typeof o.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof o.encodeDotInKeys<"u"&&typeof o.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(o.encoder!==null&&typeof o.encoder<"u"&&typeof o.encoder!="function")throw new TypeError("Encoder has to be a function.");const a=o.charset||defaults.charset;if(typeof o.charset<"u"&&o.charset!=="utf-8"&&o.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=default_format;if(typeof o.format<"u"){if(!has(formatters,o.format))throw new TypeError("Unknown format option provided.");r=o.format}const s=formatters[r];let l=defaults.filter;(typeof o.filter=="function"||isArray(o.filter))&&(l=o.filter);let m;if(o.arrayFormat&&o.arrayFormat in array_prefix_generators?m=o.arrayFormat:"indices"in o?m=o.indices?"indices":"repeat":m=defaults.arrayFormat,"commaRoundTrip"in o&&typeof o.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const S=typeof o.allowDots>"u"?o.encodeDotInKeys?!0:defaults.allowDots:!!o.allowDots;return{addQueryPrefix:typeof o.addQueryPrefix=="boolean"?o.addQueryPrefix:defaults.addQueryPrefix,allowDots:S,allowEmptyArrays:typeof o.allowEmptyArrays=="boolean"?!!o.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:m,charset:a,charsetSentinel:typeof o.charsetSentinel=="boolean"?o.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!o.commaRoundTrip,delimiter:typeof o.delimiter>"u"?defaults.delimiter:o.delimiter,encode:typeof o.encode=="boolean"?o.encode:defaults.encode,encodeDotInKeys:typeof o.encodeDotInKeys=="boolean"?o.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof o.encoder=="function"?o.encoder:defaults.encoder,encodeValuesOnly:typeof o.encodeValuesOnly=="boolean"?o.encodeValuesOnly:defaults.encodeValuesOnly,filter:l,format:r,formatter:s,serializeDate:typeof o.serializeDate=="function"?o.serializeDate:defaults.serializeDate,skipNulls:typeof o.skipNulls=="boolean"?o.skipNulls:defaults.skipNulls,sort:typeof o.sort=="function"?o.sort:null,strictNullHandling:typeof o.strictNullHandling=="boolean"?o.strictNullHandling:defaults.strictNullHandling}}function stringify(o,a={}){let r=o;const s=normalize_stringify_options(a);let l,m;typeof s.filter=="function"?(m=s.filter,r=m("",r)):isArray(s.filter)&&(m=s.filter,l=m);const S=[];if(typeof r!="object"||r===null)return"";const w=array_prefix_generators[s.arrayFormat],R=w==="comma"&&s.commaRoundTrip;l||(l=Object.keys(r)),s.sort&&l.sort(s.sort);const h=new WeakMap;for(let A=0;A<l.length;++A){const _=l[A];s.skipNulls&&r[_]===null||push_to_array(S,inner_stringify(r[_],_,w,R,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const u=S.join(s.delimiter);let d=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}function concatBytes(o){let a=0;for(const l of o)a+=l.length;const r=new Uint8Array(a);let s=0;for(const l of o)r.set(l,s),s+=l.length;return r}let encodeUTF8_;function encodeUTF8(o){let a;return(encodeUTF8_??(a=new globalThis.TextEncoder,encodeUTF8_=a.encode.bind(a)))(o)}let decodeUTF8_;function decodeUTF8(o){let a;return(decodeUTF8_??(a=new globalThis.TextDecoder,decodeUTF8_=a.decode.bind(a)))(o)}var _LineDecoder_buffer,_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_buffer.set(this,void 0),_LineDecoder_carriageReturnIndex.set(this,void 0),__classPrivateFieldSet(this,_LineDecoder_buffer,new Uint8Array),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null)}decode(a){if(a==null)return[];const r=a instanceof ArrayBuffer?new Uint8Array(a):typeof a=="string"?encodeUTF8(a):a;__classPrivateFieldSet(this,_LineDecoder_buffer,concatBytes([__classPrivateFieldGet(this,_LineDecoder_buffer,"f"),r]));const s=[];let l;for(;(l=findNewlineIndex(__classPrivateFieldGet(this,_LineDecoder_buffer,"f"),__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(l.carriage&&__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,l.index);continue}if(__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(l.index!==__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")+1||l.carriage)){s.push(decodeUTF8(__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(0,__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")-1))),__classPrivateFieldSet(this,_LineDecoder_buffer,__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f"))),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null);continue}const m=__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")!==null?l.preceding-1:l.preceding,S=decodeUTF8(__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(0,m));s.push(S),__classPrivateFieldSet(this,_LineDecoder_buffer,__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(l.index)),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null)}return s}flush(){return __classPrivateFieldGet(this,_LineDecoder_buffer,"f").length?this.decode(`
`):[]}}_LineDecoder_buffer=new WeakMap,_LineDecoder_carriageReturnIndex=new WeakMap;LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(o,a){for(let l=a??0;l<o.length;l++){if(o[l]===10)return{preceding:l,index:l+1,carriage:!1};if(o[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function findDoubleNewlineIndex(o){for(let s=0;s<o.length-1;s++){if(o[s]===10&&o[s+1]===10||o[s]===13&&o[s+1]===13)return s+2;if(o[s]===13&&o[s+1]===10&&s+3<o.length&&o[s+2]===13&&o[s+3]===10)return s+4}return-1}const levelNumbers={off:0,error:200,warn:300,info:400,debug:500},parseLogLevel=(o,a,r)=>{if(o){if(hasOwn(levelNumbers,o))return o;loggerFor(r).warn(`${a} was set to ${JSON.stringify(o)}, expected one of ${JSON.stringify(Object.keys(levelNumbers))}`)}};function noop(){}function makeLogFn(o,a,r){return!a||levelNumbers[o]>levelNumbers[r]?noop:a[o].bind(a)}const noopLogger={error:noop,warn:noop,info:noop,debug:noop};let cachedLoggers=new WeakMap;function loggerFor(o){const a=o.logger,r=o.logLevel??"off";if(!a)return noopLogger;const s=cachedLoggers.get(a);if(s&&s[0]===r)return s[1];const l={error:makeLogFn("error",a,r),warn:makeLogFn("warn",a,r),info:makeLogFn("info",a,r),debug:makeLogFn("debug",a,r)};return cachedLoggers.set(a,[r,l]),l}const formatRequestDetails=o=>(o.options&&(o.options={...o.options},delete o.options.headers),o.headers&&(o.headers=Object.fromEntries((o.headers instanceof Headers?[...o.headers]:Object.entries(o.headers)).map(([a,r])=>[a,a.toLowerCase()==="authorization"||a.toLowerCase()==="cookie"||a.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in o&&(o.retryOfRequestLogID&&(o.retryOf=o.retryOfRequestLogID),delete o.retryOfRequestLogID),o);var _Stream_client;class Stream{constructor(a,r,s){this.iterator=a,_Stream_client.set(this,void 0),this.controller=r,__classPrivateFieldSet(this,_Stream_client,s)}static fromSSEResponse(a,r,s){let l=!1;const m=s?loggerFor(s):console;async function*S(){if(l)throw new OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let w=!1;try{for await(const R of _iterSSEMessages(a,r))if(!w){if(R.data.startsWith("[DONE]")){w=!0;continue}if(R.event===null||!R.event.startsWith("thread.")){let h;try{h=JSON.parse(R.data)}catch(u){throw m.error("Could not parse message into JSON:",R.data),m.error("From chunk:",R.raw),u}if(h&&h.error)throw new APIError(void 0,h.error,void 0,a.headers);yield h}else{let h;try{h=JSON.parse(R.data)}catch(u){throw console.error("Could not parse message into JSON:",R.data),console.error("From chunk:",R.raw),u}if(R.event=="error")throw new APIError(void 0,h.error,h.message,void 0);yield{event:R.event,data:h}}}w=!0}catch(R){if(isAbortError(R))return;throw R}finally{w||r.abort()}}return new Stream(S,r,s)}static fromReadableStream(a,r,s){let l=!1;async function*m(){const w=new LineDecoder,R=ReadableStreamToAsyncIterable(a);for await(const h of R)for(const u of w.decode(h))yield u;for(const h of w.flush())yield h}async function*S(){if(l)throw new OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let w=!1;try{for await(const R of m())w||R&&(yield JSON.parse(R));w=!0}catch(R){if(isAbortError(R))return;throw R}finally{w||r.abort()}}return new Stream(S,r,s)}[(_Stream_client=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const a=[],r=[],s=this.iterator(),l=m=>({next:()=>{if(m.length===0){const S=s.next();a.push(S),r.push(S)}return m.shift()}});return[new Stream(()=>l(a),this.controller,__classPrivateFieldGet(this,_Stream_client,"f")),new Stream(()=>l(r),this.controller,__classPrivateFieldGet(this,_Stream_client,"f"))]}toReadableStream(){const a=this;let r;return makeReadableStream({async start(){r=a[Symbol.asyncIterator]()},async pull(s){try{const{value:l,done:m}=await r.next();if(m)return s.close();const S=encodeUTF8(JSON.stringify(l)+`
`);s.enqueue(S)}catch(l){s.error(l)}},async cancel(){await r.return?.()}})}}async function*_iterSSEMessages(o,a){if(!o.body)throw a.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new OpenAIError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new OpenAIError("Attempted to iterate over a response with no body");const r=new SSEDecoder,s=new LineDecoder,l=ReadableStreamToAsyncIterable(o.body);for await(const m of iterSSEChunks(l))for(const S of s.decode(m)){const w=r.decode(S);w&&(yield w)}for(const m of s.flush()){const S=r.decode(m);S&&(yield S)}}async function*iterSSEChunks(o){let a=new Uint8Array;for await(const r of o){if(r==null)continue;const s=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?encodeUTF8(r):r;let l=new Uint8Array(a.length+s.length);l.set(a),l.set(s,a.length),a=l;let m;for(;(m=findDoubleNewlineIndex(a))!==-1;)yield a.slice(0,m),a=a.slice(m)}a.length>0&&(yield a)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;const m={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],m}if(this.chunks.push(a),a.startsWith(":"))return null;let[r,s,l]=partition(a,":");return l.startsWith(" ")&&(l=l.substring(1)),r==="event"?this.event=l:r==="data"&&this.data.push(l),null}}function partition(o,a){const r=o.indexOf(a);return r!==-1?[o.substring(0,r),a,o.substring(r+a.length)]:[o,"",""]}async function defaultParseResponse(o,a){const{response:r,requestLogID:s,retryOfRequestLogID:l,startTime:m}=a,S=await(async()=>{if(a.options.stream)return loggerFor(o).debug("response",r.status,r.url,r.headers,r.body),a.options.__streamClass?a.options.__streamClass.fromSSEResponse(r,a.controller,o):Stream.fromSSEResponse(r,a.controller,o);if(r.status===204)return null;if(a.options.__binaryResponse)return r;const R=r.headers.get("content-type")?.split(";")[0]?.trim();if(R?.includes("application/json")||R?.endsWith("+json")){const d=await r.json();return addRequestID(d,r)}return await r.text()})();return loggerFor(o).debug(`[${s}] response parsed`,formatRequestDetails({retryOfRequestLogID:l,url:r.url,status:r.status,body:S,durationMs:Date.now()-m})),S}function addRequestID(o,a){return!o||typeof o!="object"||Array.isArray(o)?o:Object.defineProperty(o,"_request_id",{value:a.headers.get("x-request-id"),enumerable:!1})}var _APIPromise_client;class APIPromise extends Promise{constructor(a,r,s=defaultParseResponse){super(l=>{l(null)}),this.responsePromise=r,this.parseResponse=s,_APIPromise_client.set(this,void 0),__classPrivateFieldSet(this,_APIPromise_client,a)}_thenUnwrap(a){return new APIPromise(__classPrivateFieldGet(this,_APIPromise_client,"f"),this.responsePromise,async(r,s)=>addRequestID(a(await this.parseResponse(r,s),s),s.response))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){const[a,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(__classPrivateFieldGet(this,_APIPromise_client,"f"),a))),this.parsedPromise}then(a,r){return this.parse().then(a,r)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}_APIPromise_client=new WeakMap;var _AbstractPage_client;class AbstractPage{constructor(a,r,s,l){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet(this,_AbstractPage_client,a),this.options=l,this.response=r,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const a=this.nextPageRequestOptions();if(!a)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await __classPrivateFieldGet(this,_AbstractPage_client,"f").requestAPIList(this.constructor,a)}async*iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const a of this.iterPages())for(const r of a.getPaginatedItems())yield r}}class PagePromise extends APIPromise{constructor(a,r,s){super(a,r,async(l,m)=>new s(l,m.response,await defaultParseResponse(l,m),m.options))}async*[Symbol.asyncIterator](){const a=await this;for await(const r of a)yield r}}class Page extends AbstractPage{constructor(a,r,s,l){super(a,r,s,l),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class CursorPage extends AbstractPage{constructor(a,r,s,l){super(a,r,s,l),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const a=this.getPaginatedItems(),r=a[a.length-1]?.id;return r?{...this.options,query:{...maybeObj(this.options.query),after:r}}:null}}const checkFileSupport=()=>{if(typeof File>"u"){const{process:o}=globalThis,a=typeof o?.versions?.node=="string"&&parseInt(o.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(a?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function makeFile(o,a,r){return checkFileSupport(),new File(o,a??"unknown_file",r)}function getName(o){return(typeof o=="object"&&o!==null&&("name"in o&&o.name&&String(o.name)||"url"in o&&o.url&&String(o.url)||"filename"in o&&o.filename&&String(o.filename)||"path"in o&&o.path&&String(o.path))||"").split(/[\\/]/).pop()||void 0}const isAsyncIterable=o=>o!=null&&typeof o=="object"&&typeof o[Symbol.asyncIterator]=="function",multipartFormRequestOptions=async(o,a)=>({...o,body:await createForm(o.body,a)}),supportsFormDataMap=new WeakMap;function supportsFormData(o){const a=typeof o=="function"?o:o.fetch,r=supportsFormDataMap.get(a);if(r)return r;const s=(async()=>{try{const l="Response"in a?a.Response:(await a("data:,")).constructor,m=new FormData;return m.toString()!==await new l(m).text()}catch{return!0}})();return supportsFormDataMap.set(a,s),s}const createForm=async(o,a)=>{if(!await supportsFormData(a))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(o||{}).map(([s,l])=>addFormValue(r,s,l))),r},isNamedBlob=o=>o instanceof Blob&&"name"in o,addFormValue=async(o,a,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${a}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")o.append(a,String(r));else if(r instanceof Response)o.append(a,makeFile([await r.blob()],getName(r)));else if(isAsyncIterable(r))o.append(a,makeFile([await new Response(ReadableStreamFrom(r)).blob()],getName(r)));else if(isNamedBlob(r))o.append(a,r,getName(r));else if(Array.isArray(r))await Promise.all(r.map(s=>addFormValue(o,a+"[]",s)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([s,l])=>addFormValue(o,`${a}[${s}]`,l)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},isBlobLike=o=>o!=null&&typeof o=="object"&&typeof o.size=="number"&&typeof o.type=="string"&&typeof o.text=="function"&&typeof o.slice=="function"&&typeof o.arrayBuffer=="function",isFileLike=o=>o!=null&&typeof o=="object"&&typeof o.name=="string"&&typeof o.lastModified=="number"&&isBlobLike(o),isResponseLike=o=>o!=null&&typeof o=="object"&&typeof o.url=="string"&&typeof o.blob=="function";async function toFile(o,a,r){if(checkFileSupport(),o=await o,isFileLike(o))return o instanceof File?o:makeFile([await o.arrayBuffer()],o.name);if(isResponseLike(o)){const l=await o.blob();return a||(a=new URL(o.url).pathname.split(/[\\/]/).pop()),makeFile(await getBytes(l),a,r)}const s=await getBytes(o);if(a||(a=getName(o)),!r?.type){const l=s.find(m=>typeof m=="object"&&"type"in m&&m.type);typeof l=="string"&&(r={...r,type:l})}return makeFile(s,a,r)}async function getBytes(o){let a=[];if(typeof o=="string"||ArrayBuffer.isView(o)||o instanceof ArrayBuffer)a.push(o);else if(isBlobLike(o))a.push(o instanceof Blob?o:await o.arrayBuffer());else if(isAsyncIterable(o))for await(const r of o)a.push(...await getBytes(r));else{const r=o?.constructor?.name;throw new Error(`Unexpected data type: ${typeof o}${r?`; constructor: ${r}`:""}${propsForError(o)}`)}return a}function propsForError(o){return typeof o!="object"||o===null?"":`; props: [${Object.getOwnPropertyNames(o).map(r=>`"${r}"`).join(", ")}]`}class APIResource{constructor(a){this._client=a}}function encodeURIPath(o){return o.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const EMPTY=Object.freeze(Object.create(null)),createPathTagFunction=(o=encodeURIPath)=>function(r,...s){if(r.length===1)return r[0];let l=!1;const m=[],S=r.reduce((u,d,A)=>{/[?#]/.test(d)&&(l=!0);const _=s[A];let p=(l?encodeURIComponent:o)(""+_);return A!==s.length&&(_==null||typeof _=="object"&&_.toString===Object.getPrototypeOf(Object.getPrototypeOf(_.hasOwnProperty??EMPTY)??EMPTY)?.toString)&&(p=_+"",m.push({start:u.length+d.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),u+d+(A===s.length?"":p)},""),w=S.split(/[?#]/,1)[0],R=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=R.exec(w))!==null;)m.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(m.sort((u,d)=>u.start-d.start),m.length>0){let u=0;const d=m.reduce((A,_)=>{const p=" ".repeat(_.start-u),b="^".repeat(_.length);return u=_.start+_.length,A+p+b},"");throw new OpenAIError(`Path parameters result in path with invalid segments:
${m.map(A=>A.error).join(`
`)}
${S}
${d}`)}return S},path=createPathTagFunction(encodeURIPath);let Messages$1=class extends APIResource{list(a,r={},s){return this._client.getAPIList(path`/chat/completions/${a}/messages`,CursorPage,{query:r,...s})}};function isRunnableFunctionWithParse(o){return typeof o.parse=="function"}const isAssistantMessage=o=>o?.role==="assistant",isToolMessage=o=>o?.role==="tool";var _EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet(this,_EventStream_connectedPromise,new Promise((a,r)=>{__classPrivateFieldSet(this,_EventStream_resolveConnectedPromise,a,"f"),__classPrivateFieldSet(this,_EventStream_rejectConnectedPromise,r,"f")})),__classPrivateFieldSet(this,_EventStream_endPromise,new Promise((a,r)=>{__classPrivateFieldSet(this,_EventStream_resolveEndPromise,a,"f"),__classPrivateFieldSet(this,_EventStream_rejectEndPromise,r,"f")})),__classPrivateFieldGet(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet(this,_EventStream_endPromise,"f").catch(()=>{})}_run(a){setTimeout(()=>{a().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(a,r){return(__classPrivateFieldGet(this,_EventStream_listeners,"f")[a]||(__classPrivateFieldGet(this,_EventStream_listeners,"f")[a]=[])).push({listener:r}),this}off(a,r){const s=__classPrivateFieldGet(this,_EventStream_listeners,"f")[a];if(!s)return this;const l=s.findIndex(m=>m.listener===r);return l>=0&&s.splice(l,1),this}once(a,r){return(__classPrivateFieldGet(this,_EventStream_listeners,"f")[a]||(__classPrivateFieldGet(this,_EventStream_listeners,"f")[a]=[])).push({listener:r,once:!0}),this}emitted(a){return new Promise((r,s)=>{__classPrivateFieldSet(this,_EventStream_catchingPromiseCreated,!0),a!=="error"&&this.once("error",s),this.once(a,r)})}async done(){__classPrivateFieldSet(this,_EventStream_catchingPromiseCreated,!0),await __classPrivateFieldGet(this,_EventStream_endPromise,"f")}_emit(a,...r){if(__classPrivateFieldGet(this,_EventStream_ended,"f"))return;a==="end"&&(__classPrivateFieldSet(this,_EventStream_ended,!0),__classPrivateFieldGet(this,_EventStream_resolveEndPromise,"f").call(this));const s=__classPrivateFieldGet(this,_EventStream_listeners,"f")[a];if(s&&(__classPrivateFieldGet(this,_EventStream_listeners,"f")[a]=s.filter(l=>!l.once),s.forEach(({listener:l})=>l(...r))),a==="abort"){const l=r[0];!__classPrivateFieldGet(this,_EventStream_catchingPromiseCreated,"f")&&!s?.length&&Promise.reject(l),__classPrivateFieldGet(this,_EventStream_rejectConnectedPromise,"f").call(this,l),__classPrivateFieldGet(this,_EventStream_rejectEndPromise,"f").call(this,l),this._emit("end");return}if(a==="error"){const l=r[0];!__classPrivateFieldGet(this,_EventStream_catchingPromiseCreated,"f")&&!s?.length&&Promise.reject(l),__classPrivateFieldGet(this,_EventStream_rejectConnectedPromise,"f").call(this,l),__classPrivateFieldGet(this,_EventStream_rejectEndPromise,"f").call(this,l),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function(a){if(__classPrivateFieldSet(this,_EventStream_errored,!0),a instanceof Error&&a.name==="AbortError"&&(a=new APIUserAbortError),a instanceof APIUserAbortError)return __classPrivateFieldSet(this,_EventStream_aborted,!0),this._emit("abort",a);if(a instanceof OpenAIError)return this._emit("error",a);if(a instanceof Error){const r=new OpenAIError(a.message);return r.cause=a,this._emit("error",r)}return this._emit("error",new OpenAIError(String(a)))};function isAutoParsableResponseFormat(o){return o?.$brand==="auto-parseable-response-format"}function isAutoParsableTool$1(o){return o?.$brand==="auto-parseable-tool"}function maybeParseChatCompletion(o,a){return!a||!hasAutoParseableInput$1(a)?{...o,choices:o.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:parseChatCompletion(o,a)}function parseChatCompletion(o,a){const r=o.choices.map(s=>{if(s.finish_reason==="length")throw new LengthFinishReasonError;if(s.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(l=>parseToolCall$1(a,l))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?parseResponseFormat(a,s.message.content):null}}});return{...o,choices:r}}function parseResponseFormat(o,a){return o.response_format?.type!=="json_schema"?null:o.response_format?.type==="json_schema"?"$parseRaw"in o.response_format?o.response_format.$parseRaw(a):JSON.parse(a):null}function parseToolCall$1(o,a){const r=o.tools?.find(s=>s.function?.name===a.function.name);return{...a,function:{...a.function,parsed_arguments:isAutoParsableTool$1(r)?r.$parseRaw(a.function.arguments):r?.function.strict?JSON.parse(a.function.arguments):null}}}function shouldParseToolCall(o,a){if(!o)return!1;const r=o.tools?.find(s=>s.function?.name===a.function.name);return isAutoParsableTool$1(r)||r?.function.strict||!1}function hasAutoParseableInput$1(o){return isAutoParsableResponseFormat(o.response_format)?!0:o.tools?.some(a=>isAutoParsableTool$1(a)||a.type==="function"&&a.function.strict===!0)??!1}function validateInputTools(o){for(const a of o??[]){if(a.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${a.type}\``);if(a.function.strict!==!0)throw new OpenAIError(`The \`${a.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var _AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionToolCall,_AbstractChatCompletionRunner_getFinalFunctionToolCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(a){this._chatCompletions.push(a),this._emit("chatCompletion",a);const r=a.choices[0]?.message;return r&&this._addMessage(r),a}_addMessage(a,r=!0){if("content"in a||(a.content=null),this.messages.push(a),r){if(this._emit("message",a),isToolMessage(a)&&a.content)this._emit("functionToolCallResult",a.content);else if(isAssistantMessage(a)&&a.tool_calls)for(const s of a.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const a=this._chatCompletions[this._chatCompletions.length-1];if(!a)throw new OpenAIError("stream ended without producing a ChatCompletion");return a}async finalContent(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionToolCall(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCall).call(this)}async finalFunctionToolCallResult(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const a=this._chatCompletions[this._chatCompletions.length-1];a&&this._emit("finalChatCompletion",a);const r=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);r&&this._emit("finalMessage",r);const s=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);s&&this._emit("finalContent",s);const l=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCall).call(this);l&&this._emit("finalFunctionToolCall",l);const m=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCallResult).call(this);m!=null&&this._emit("finalFunctionToolCallResult",m),this._chatCompletions.some(S=>S.usage)&&this._emit("totalUsage",__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(a,r,s){const l=s?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,r);const m=await a.chat.completions.create({...r,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(m,r))}async _runChatCompletion(a,r,s){for(const l of r.messages)this._addMessage(l,!1);return await this._createChatCompletion(a,r,s)}async _runTools(a,r,s){const l="tool",{tool_choice:m="auto",stream:S,...w}=r,R=typeof m!="string"&&m?.function?.name,{maxChatCompletions:h=DEFAULT_MAX_CHAT_COMPLETIONS}=s||{},u=r.tools.map(_=>{if(isAutoParsableTool$1(_)){if(!_.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),d={};for(const _ of u)_.type==="function"&&(d[_.function.name||_.function.function.name]=_.function);const A="tools"in r?u.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of r.messages)this._addMessage(_,!1);for(let _=0;_<h;++_){const b=(await this._createChatCompletion(a,{...w,tool_choice:m,tools:A,messages:[...this.messages]},s)).choices[0]?.message;if(!b)throw new OpenAIError("missing message in ChatCompletion response");if(!b.tool_calls?.length)return;for(const E of b.tool_calls){if(E.type!=="function")continue;const y=E.id,{name:P,arguments:B}=E.function,U=d[P];if(U){if(R&&R!==P){const Y=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(R)} requested. Please try again`;this._addMessage({role:l,tool_call_id:y,content:Y});continue}}else{const Y=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(d).map(X=>JSON.stringify(X)).join(", ")}. Please try again`;this._addMessage({role:l,tool_call_id:y,content:Y});continue}let C;try{C=isRunnableFunctionWithParse(U)?await U.parse(B):B}catch(Y){const X=Y instanceof Error?Y.message:String(Y);this._addMessage({role:l,tool_call_id:y,content:X});continue}const k=await U.function(C,this),$=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,k);if(this._addMessage({role:l,tool_call_id:y,content:$}),R)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function(){return __classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function(){let a=this.messages.length;for(;a-- >0;){const r=this.messages[a];if(isAssistantMessage(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionToolCall=function(){for(let a=this.messages.length-1;a>=0;a--){const r=this.messages[a];if(isAssistantMessage(r)&&r?.tool_calls?.length)return r.tool_calls.at(-1)?.function}},_AbstractChatCompletionRunner_getFinalFunctionToolCallResult=function(){for(let a=this.messages.length-1;a>=0;a--){const r=this.messages[a];if(isToolMessage(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(l=>l.type==="function"&&l.id===r.tool_call_id)))return r.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function(){const a={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(a.completion_tokens+=r.completion_tokens,a.prompt_tokens+=r.prompt_tokens,a.total_tokens+=r.total_tokens);return a},_AbstractChatCompletionRunner_validateParams=function(a){if(a.n!=null&&a.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function(a){return typeof a=="string"?a:a===void 0?"undefined":JSON.stringify(a)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runTools(a,r,s){const l=new ChatCompletionRunner,m={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return l._run(()=>l._runTools(a,r,m)),l}_addMessage(a,r=!0){super._addMessage(a,r),isAssistantMessage(a)&&a.content&&this._emit("content",a.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(o,a=Allow.ALL){if(typeof o!="string")throw new TypeError(`expecting str, got ${typeof o}`);if(!o.trim())throw new Error(`${o} is empty`);return _parseJSON(o.trim(),a)}const _parseJSON=(o,a)=>{const r=o.length;let s=0;const l=A=>{throw new PartialJSON(`${A} at position ${s}`)},m=A=>{throw new MalformedJSON(`${A} at position ${s}`)},S=()=>(d(),s>=r&&l("Unexpected end of input"),o[s]==='"'?w():o[s]==="{"?R():o[s]==="["?h():o.substring(s,s+4)==="null"||Allow.NULL&a&&r-s<4&&"null".startsWith(o.substring(s))?(s+=4,null):o.substring(s,s+4)==="true"||Allow.BOOL&a&&r-s<4&&"true".startsWith(o.substring(s))?(s+=4,!0):o.substring(s,s+5)==="false"||Allow.BOOL&a&&r-s<5&&"false".startsWith(o.substring(s))?(s+=5,!1):o.substring(s,s+8)==="Infinity"||Allow.INFINITY&a&&r-s<8&&"Infinity".startsWith(o.substring(s))?(s+=8,1/0):o.substring(s,s+9)==="-Infinity"||Allow.MINUS_INFINITY&a&&1<r-s&&r-s<9&&"-Infinity".startsWith(o.substring(s))?(s+=9,-1/0):o.substring(s,s+3)==="NaN"||Allow.NAN&a&&r-s<3&&"NaN".startsWith(o.substring(s))?(s+=3,NaN):u()),w=()=>{const A=s;let _=!1;for(s++;s<r&&(o[s]!=='"'||_&&o[s-1]==="\\");)_=o[s]==="\\"?!_:!1,s++;if(o.charAt(s)=='"')try{return JSON.parse(o.substring(A,++s-Number(_)))}catch(p){m(String(p))}else if(Allow.STR&a)try{return JSON.parse(o.substring(A,s-Number(_))+'"')}catch{return JSON.parse(o.substring(A,o.lastIndexOf("\\"))+'"')}l("Unterminated string literal")},R=()=>{s++,d();const A={};try{for(;o[s]!=="}";){if(d(),s>=r&&Allow.OBJ&a)return A;const _=w();d(),s++;try{const p=S();Object.defineProperty(A,_,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Allow.OBJ&a)return A;throw p}d(),o[s]===","&&s++}}catch{if(Allow.OBJ&a)return A;l("Expected '}' at end of object")}return s++,A},h=()=>{s++;const A=[];try{for(;o[s]!=="]";)A.push(S()),d(),o[s]===","&&s++}catch{if(Allow.ARR&a)return A;l("Expected ']' at end of array")}return s++,A},u=()=>{if(s===0){o==="-"&&Allow.NUM&a&&l("Not sure what '-' is");try{return JSON.parse(o)}catch(_){if(Allow.NUM&a)try{return o[o.length-1]==="."?JSON.parse(o.substring(0,o.lastIndexOf("."))):JSON.parse(o.substring(0,o.lastIndexOf("e")))}catch{}m(String(_))}}const A=s;for(o[s]==="-"&&s++;o[s]&&!",]}".includes(o[s]);)s++;s==r&&!(Allow.NUM&a)&&l("Unterminated number literal");try{return JSON.parse(o.substring(A,s))}catch{o.substring(A,s)==="-"&&Allow.NUM&a&&l("Not sure what '-' is");try{return JSON.parse(o.substring(A,o.lastIndexOf("e")))}catch(p){m(String(p))}}},d=()=>{for(;s<r&&` 
\r	`.includes(o[s]);)s++};return S()},partialParse=o=>parseJSON(o,Allow.ALL^Allow.NUM);var _ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(a){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet(this,_ChatCompletionStream_params,a),__classPrivateFieldSet(this,_ChatCompletionStream_choiceEventStates,[])}get currentChatCompletionSnapshot(){return __classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(a){const r=new ChatCompletionStream(null);return r._run(()=>r._fromReadableStream(a)),r}static createChatCompletion(a,r,s){const l=new ChatCompletionStream(r);return l._run(()=>l._runChatCompletion(a,{...r,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createChatCompletion(a,r,s){super._createChatCompletion;const l=s?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const m=await a.chat.completions.create({...r,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const S of m)__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,S);if(m.controller.signal?.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(a,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const l=Stream.fromReadableStream(a,this.controller);let m;for await(const S of l)m&&m!==S.id&&this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,S),m=S.id;if(l.controller.signal?.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0)},_ChatCompletionStream_getChoiceEventState=function(r){let s=__classPrivateFieldGet(this,_ChatCompletionStream_choiceEventStates,"f")[r.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet(this,_ChatCompletionStream_choiceEventStates,"f")[r.index]=s,s)},_ChatCompletionStream_addChunk=function(r){if(this.ended)return;const s=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,r);this._emit("chunk",r,s);for(const l of r.choices){const m=s.choices[l.index];l.delta.content!=null&&m.message?.role==="assistant"&&m.message?.content&&(this._emit("content",l.delta.content,m.message.content),this._emit("content.delta",{delta:l.delta.content,snapshot:m.message.content,parsed:m.message.parsed})),l.delta.refusal!=null&&m.message?.role==="assistant"&&m.message?.refusal&&this._emit("refusal.delta",{delta:l.delta.refusal,snapshot:m.message.refusal}),l.logprobs?.content!=null&&m.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:l.logprobs?.content,snapshot:m.logprobs?.content??[]}),l.logprobs?.refusal!=null&&m.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:l.logprobs?.refusal,snapshot:m.logprobs?.refusal??[]});const S=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,m);m.finish_reason&&(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,m),S.current_tool_call_index!=null&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,m,S.current_tool_call_index));for(const w of l.delta.tool_calls??[])S.current_tool_call_index!==w.index&&(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,m),S.current_tool_call_index!=null&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,m,S.current_tool_call_index)),S.current_tool_call_index=w.index;for(const w of l.delta.tool_calls??[]){const R=m.message.tool_calls?.[w.index];R?.type&&(R?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:R.function?.name,index:w.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:w.function?.arguments??""}):(R?.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(r,s){if(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r).done_tool_calls.has(s))return;const m=r.message.tool_calls?.[s];if(!m)throw new Error("no tool call snapshot");if(!m.type)throw new Error("tool call snapshot missing `type`");if(m.type==="function"){const S=__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")?.tools?.find(w=>w.type==="function"&&w.function.name===m.function.name);this._emit("tool_calls.function.arguments.done",{name:m.function.name,index:s,arguments:m.function.arguments,parsed_arguments:isAutoParsableTool$1(S)?S.$parseRaw(m.function.arguments):S?.function.strict?JSON.parse(m.function.arguments):null})}else m.type},_ChatCompletionStream_emitContentDoneEvents=function(r){const s=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r);if(r.message.content&&!s.content_done){s.content_done=!0;const l=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:r.message.content,parsed:l?l.$parseRaw(r.message.content):null})}r.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const r=__classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!r)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0),__classPrivateFieldSet(this,_ChatCompletionStream_choiceEventStates,[]),finalizeChatCompletion(r,__classPrivateFieldGet(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){const r=__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")?.response_format;return isAutoParsableResponseFormat(r)?r:null},_ChatCompletionStream_accumulateChatCompletion=function(r){var s,l,m,S;let w=__classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:R,...h}=r;w?Object.assign(w,h):w=__classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...h,choices:[]});for(const{delta:u,finish_reason:d,index:A,logprobs:_=null,...p}of r.choices){let b=w.choices[A];if(b||(b=w.choices[A]={finish_reason:d,index:A,message:{},logprobs:_,...p}),_)if(!b.logprobs)b.logprobs=Object.assign({},_);else{const{content:k,refusal:$,...Y}=_;Object.assign(b.logprobs,Y),k&&((s=b.logprobs).content??(s.content=[]),b.logprobs.content.push(...k)),$&&((l=b.logprobs).refusal??(l.refusal=[]),b.logprobs.refusal.push(...$))}if(d&&(b.finish_reason=d,__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")))){if(d==="length")throw new LengthFinishReasonError;if(d==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(b,p),!u)continue;const{content:E,refusal:y,function_call:P,role:B,tool_calls:U,...C}=u;if(Object.assign(b.message,C),y&&(b.message.refusal=(b.message.refusal||"")+y),B&&(b.message.role=B),P&&(b.message.function_call?(P.name&&(b.message.function_call.name=P.name),P.arguments&&((m=b.message.function_call).arguments??(m.arguments=""),b.message.function_call.arguments+=P.arguments)):b.message.function_call=P),E&&(b.message.content=(b.message.content||"")+E,!b.message.refusal&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(b.message.parsed=partialParse(b.message.content))),U){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:k,id:$,type:Y,function:X,...J}of U){const tt=(S=b.message.tool_calls)[k]??(S[k]={});Object.assign(tt,J),$&&(tt.id=$),Y&&(tt.type=Y),X&&(tt.function??(tt.function={name:X.name??"",arguments:""})),X?.name&&(tt.function.name=X.name),X?.arguments&&(tt.function.arguments+=X.arguments,shouldParseToolCall(__classPrivateFieldGet(this,_ChatCompletionStream_params,"f"),tt)&&(tt.function.parsed_arguments=partialParse(tt.function.arguments)))}}}return w},Symbol.asyncIterator)](){const a=[],r=[];let s=!1;return this.on("chunk",l=>{const m=r.shift();m?m.resolve(l):a.push(l)}),this.on("end",()=>{s=!0;for(const l of r)l.resolve(void 0);r.length=0}),this.on("abort",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),this.on("error",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((m,S)=>r.push({resolve:m,reject:S})).then(m=>m?{value:m,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(o,a){const{id:r,choices:s,created:l,model:m,system_fingerprint:S,...w}=o,R={...w,id:r,choices:s.map(({message:h,finish_reason:u,index:d,logprobs:A,..._})=>{if(!u)throw new OpenAIError(`missing finish_reason for choice ${d}`);const{content:p=null,function_call:b,tool_calls:E,...y}=h,P=h.role;if(!P)throw new OpenAIError(`missing role for choice ${d}`);if(b){const{arguments:B,name:U}=b;if(B==null)throw new OpenAIError(`missing function_call.arguments for choice ${d}`);if(!U)throw new OpenAIError(`missing function_call.name for choice ${d}`);return{..._,message:{content:p,function_call:{arguments:B,name:U},role:P,refusal:h.refusal??null},finish_reason:u,index:d,logprobs:A}}return E?{..._,index:d,finish_reason:u,logprobs:A,message:{...y,role:P,content:p,refusal:h.refusal??null,tool_calls:E.map((B,U)=>{const{function:C,type:k,id:$,...Y}=B,{arguments:X,name:J,...tt}=C||{};if($==null)throw new OpenAIError(`missing choices[${d}].tool_calls[${U}].id
${str(o)}`);if(k==null)throw new OpenAIError(`missing choices[${d}].tool_calls[${U}].type
${str(o)}`);if(J==null)throw new OpenAIError(`missing choices[${d}].tool_calls[${U}].function.name
${str(o)}`);if(X==null)throw new OpenAIError(`missing choices[${d}].tool_calls[${U}].function.arguments
${str(o)}`);return{...Y,id:$,type:k,function:{...tt,name:J,arguments:X}}})}}:{..._,message:{...y,content:p,role:P,refusal:h.refusal??null},finish_reason:u,index:d,logprobs:A}}),created:l,model:m,object:"chat.completion",...S?{system_fingerprint:S}:{}};return maybeParseChatCompletion(R,a)}function str(o){return JSON.stringify(o)}function assertNever(o){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(a){const r=new ChatCompletionStreamingRunner(null);return r._run(()=>r._fromReadableStream(a)),r}static runTools(a,r,s){const l=new ChatCompletionStreamingRunner(r),m={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return l._run(()=>l._runTools(a,r,m)),l}}let Completions$1=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(a,r){return this._client.post("/chat/completions",{body:a,...r,stream:a.stream??!1})}retrieve(a,r){return this._client.get(path`/chat/completions/${a}`,r)}update(a,r,s){return this._client.post(path`/chat/completions/${a}`,{body:r,...s})}list(a={},r){return this._client.getAPIList("/chat/completions",CursorPage,{query:a,...r})}delete(a,r){return this._client.delete(path`/chat/completions/${a}`,r)}parse(a,r){return validateInputTools(a.tools),this._client.chat.completions.create(a,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>parseChatCompletion(s,a))}runTools(a,r){return a.stream?ChatCompletionStreamingRunner.runTools(this._client,a,r):ChatCompletionRunner.runTools(this._client,a,r)}stream(a,r){return ChatCompletionStream.createChatCompletion(this._client,a,r)}};Completions$1.Messages=Messages$1;class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}Chat.Completions=Completions$1;const brand_privateNullableHeaders=Symbol("brand.privateNullableHeaders");function*iterateHeaders(o){if(!o)return;if(brand_privateNullableHeaders in o){const{values:s,nulls:l}=o;yield*s.entries();for(const m of l)yield[m,null];return}let a=!1,r;o instanceof Headers?r=o.entries():isReadonlyArray(o)?r=o:(a=!0,r=Object.entries(o??{}));for(let s of r){const l=s[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const m=isReadonlyArray(s[1])?s[1]:[s[1]];let S=!1;for(const w of m)w!==void 0&&(a&&!S&&(S=!0,yield[l,null]),yield[l,w])}}const buildHeaders=o=>{const a=new Headers,r=new Set;for(const s of o){const l=new Set;for(const[m,S]of iterateHeaders(s)){const w=m.toLowerCase();l.has(w)||(a.delete(m),l.add(w)),S===null?(a.delete(m),r.add(w)):(a.append(m,S),r.delete(w))}}return{[brand_privateNullableHeaders]:!0,values:a,nulls:r}};class Speech extends APIResource{create(a,r){return this._client.post("/audio/speech",{body:a,...r,headers:buildHeaders([{Accept:"application/octet-stream"},r?.headers]),__binaryResponse:!0})}}class Transcriptions extends APIResource{create(a,r){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:a,...r,stream:a.stream??!1,__metadata:{model:a.model}},this._client))}}class Translations extends APIResource{create(a,r){return this._client.post("/audio/translations",multipartFormRequestOptions({body:a,...r,__metadata:{model:a.model}},this._client))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions;Audio.Translations=Translations;Audio.Speech=Speech;class Batches extends APIResource{create(a,r){return this._client.post("/batches",{body:a,...r})}retrieve(a,r){return this._client.get(path`/batches/${a}`,r)}list(a={},r){return this._client.getAPIList("/batches",CursorPage,{query:a,...r})}cancel(a,r){return this._client.post(path`/batches/${a}/cancel`,r)}}class Assistants extends APIResource{create(a,r){return this._client.post("/assistants",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(a,r){return this._client.get(path`/assistants/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(a,r,s){return this._client.post(path`/assistants/${a}`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a={},r){return this._client.getAPIList("/assistants",CursorPage,{query:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(a,r){return this._client.delete(path`/assistants/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Sessions extends APIResource{create(a,r){return this._client.post("/realtime/sessions",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class TranscriptionSessions extends APIResource{create(a,r){return this._client.post("/realtime/transcription_sessions",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions;Realtime.TranscriptionSessions=TranscriptionSessions;class Messages extends APIResource{create(a,r,s){return this._client.post(path`/threads/${a}/messages`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(a,r,s){const{thread_id:l}=r;return this._client.get(path`/threads/${l}/messages/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(a,r,s){const{thread_id:l,...m}=r;return this._client.post(path`/threads/${l}/messages/${a}`,{body:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a,r={},s){return this._client.getAPIList(path`/threads/${a}/messages`,CursorPage,{query:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(a,r,s){const{thread_id:l}=r;return this._client.delete(path`/threads/${l}/messages/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Steps extends APIResource{retrieve(a,r,s){const{thread_id:l,run_id:m,...S}=r;return this._client.get(path`/threads/${l}/runs/${m}/steps/${a}`,{query:S,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a,r,s){const{thread_id:l,...m}=r;return this._client.getAPIList(path`/threads/${l}/runs/${a}/steps`,CursorPage,{query:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const toFloat32Array=o=>{if(typeof Buffer<"u"){const a=Buffer.from(o,"base64");return Array.from(new Float32Array(a.buffer,a.byteOffset,a.length/Float32Array.BYTES_PER_ELEMENT))}else{const a=atob(o),r=a.length,s=new Uint8Array(r);for(let l=0;l<r;l++)s[l]=a.charCodeAt(l);return Array.from(new Float32Array(s.buffer))}};var define_globalThis_process_env_default={};const readEnv=o=>{if(typeof globalThis.process<"u")return define_globalThis_process_env_default?.[o]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(o)?.trim()};var _AssistantStream_instances,_a$1,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const a=[],r=[];let s=!1;return this.on("event",l=>{const m=r.shift();m?m.resolve(l):a.push(l)}),this.on("end",()=>{s=!0;for(const l of r)l.resolve(void 0);r.length=0}),this.on("abort",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),this.on("error",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((m,S)=>r.push({resolve:m,reject:S})).then(m=>m?{value:m,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(a){const r=new _a$1;return r._run(()=>r._fromReadableStream(a)),r}async _fromReadableStream(a,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const l=Stream.fromReadableStream(a,this.controller);for await(const m of l)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,m);if(l.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(a,r,s,l){const m=new _a$1;return m._run(()=>m._runToolAssistantStream(a,r,s,{...l,headers:{...l?.headers,"X-Stainless-Helper-Method":"stream"}})),m}async _createToolAssistantStream(a,r,s,l){const m=l?.signal;m&&(m.aborted&&this.controller.abort(),m.addEventListener("abort",()=>this.controller.abort()));const S={...s,stream:!0},w=await a.submitToolOutputs(r,S,{...l,signal:this.controller.signal});this._connected();for await(const R of w)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,R);if(w.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(a,r,s){const l=new _a$1;return l._run(()=>l._threadAssistantStream(a,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),l}static createAssistantStream(a,r,s,l){const m=new _a$1;return m._run(()=>m._runAssistantStream(a,r,s,{...l,headers:{...l?.headers,"X-Stainless-Helper-Method":"stream"}})),m}currentEvent(){return __classPrivateFieldGet(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(a,r,s){const l=s?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const m={...r,stream:!0},S=await a.createAndRun(m,{...s,signal:this.controller.signal});this._connected();for await(const w of S)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,w);if(S.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(a,r,s,l){const m=l?.signal;m&&(m.aborted&&this.controller.abort(),m.addEventListener("abort",()=>this.controller.abort()));const S={...s,stream:!0},w=await a.create(r,S,{...l,signal:this.controller.signal});this._connected();for await(const R of w)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,R);if(w.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(a,r){for(const[s,l]of Object.entries(r)){if(!a.hasOwnProperty(s)){a[s]=l;continue}let m=a[s];if(m==null){a[s]=l;continue}if(s==="index"||s==="type"){a[s]=l;continue}if(typeof m=="string"&&typeof l=="string")m+=l;else if(typeof m=="number"&&typeof l=="number")m+=l;else if(isObj(m)&&isObj(l))m=this.accumulateDelta(m,l);else if(Array.isArray(m)&&Array.isArray(l)){if(m.every(S=>typeof S=="string"||typeof S=="number")){m.push(...l);continue}for(const S of l){if(!isObj(S))throw new Error(`Expected array delta entry to be an object but got: ${S}`);const w=S.index;if(w==null)throw console.error(S),new Error("Expected array delta entry to have an `index` property");if(typeof w!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${w}`);const R=m[w];R==null?m.push(S):m[w]=this.accumulateDelta(R,S)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${l}, accValue: ${m}`);a[s]=m}return a}_addRun(a){return a}async _threadAssistantStream(a,r,s){return await this._createThreadAssistantStream(r,a,s)}async _runAssistantStream(a,r,s,l){return await this._createAssistantStream(r,a,s,l)}async _runToolAssistantStream(a,r,s,l){return await this._createToolAssistantStream(r,a,s,l)}}_a$1=AssistantStream,_AssistantStream_addEvent=function(a){if(!this.ended)switch(__classPrivateFieldSet(this,_AssistantStream_currentEvent,a),__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,a),a.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,a);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,a);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,a);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function(a){const[r,s]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,a,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,r),__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f")[r.id]=r;for(const l of s){const m=r.content[l.index];m?.type=="text"&&this._emit("textCreated",m.text)}switch(a.event){case"thread.message.created":this._emit("messageCreated",a.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",a.data.delta,r),a.data.delta.content)for(const l of a.data.delta.content){if(l.type=="text"&&l.text){let m=l.text,S=r.content[l.index];if(S&&S.type=="text")this._emit("textDelta",m,S.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(l.index!=__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet(this,_AssistantStream_currentContentIndex,l.index)}__classPrivateFieldSet(this,_AssistantStream_currentContent,r.content[l.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")!==void 0){const l=a.data.content[__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")];if(l)switch(l.type){case"image_file":this._emit("imageFileDone",l.image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",l.text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",a.data),__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,void 0)}},_AssistantStream_handleRunStep=function(a){const r=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,a);switch(__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,r),a.event){case"thread.run.step.created":this._emit("runStepCreated",a.data);break;case"thread.run.step.delta":const s=a.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const m of s.step_details.tool_calls)m.index==__classPrivateFieldGet(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",m,r.step_details.tool_calls[m.index]):(__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCallIndex,m.index),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,r.step_details.tool_calls[m.index]),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",a.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,void 0),a.data.step_details.type=="tool_calls"&&__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0)),this._emit("runStepDone",a.data,r);break}},_AssistantStream_handleEvent=function(a){__classPrivateFieldGet(this,_AssistantStream_events,"f").push(a),this._emit("event",a)},_AssistantStream_accumulateRunStep=function(a){switch(a.event){case"thread.run.step.created":return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id]=a.data,a.data;case"thread.run.step.delta":let r=__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let s=a.data;if(s.delta){const l=_a$1.accumulateDelta(r,s.delta);__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id]=l}return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id]=a.data;break}if(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id])return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[a.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function(a,r){let s=[];switch(a.event){case"thread.message.created":return[a.data,s];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let l=a.data;if(l.delta.content)for(const m of l.delta.content)if(m.index in r.content){let S=r.content[m.index];r.content[m.index]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,m,S)}else r.content[m.index]=m,s.push(m);return[r,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function(a,r){return _a$1.accumulateDelta(r,a)},_AssistantStream_handleRun=function(a){switch(__classPrivateFieldSet(this,_AssistantStream_currentRunSnapshot,a.data),a.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":__classPrivateFieldSet(this,_AssistantStream_finalRun,a.data),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0));break}};let Runs$1=class extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(a,r,s){const{include:l,...m}=r;return this._client.post(path`/threads/${a}/runs`,{query:{include:l},body:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:r.stream??!1})}retrieve(a,r,s){const{thread_id:l}=r;return this._client.get(path`/threads/${l}/runs/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(a,r,s){const{thread_id:l,...m}=r;return this._client.post(path`/threads/${l}/runs/${a}`,{body:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a,r={},s){return this._client.getAPIList(path`/threads/${a}/runs`,CursorPage,{query:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(a,r,s){const{thread_id:l}=r;return this._client.post(path`/threads/${l}/runs/${a}/cancel`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(a,r,s){const l=await this.create(a,r,s);return await this.poll(l.id,{thread_id:a},s)}createAndStream(a,r,s){return AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,r,s)}async poll(a,r,s){const l=buildHeaders([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:m,response:S}=await this.retrieve(a,r,{...s,headers:{...s?.headers,...l}}).withResponse();switch(m.status){case"queued":case"in_progress":case"cancelling":let w=5e3;if(s?.pollIntervalMs)w=s.pollIntervalMs;else{const R=S.headers.get("openai-poll-after-ms");if(R){const h=parseInt(R);isNaN(h)||(w=h)}}await sleep(w);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return m}}}stream(a,r,s){return AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,r,s)}submitToolOutputs(a,r,s){const{thread_id:l,...m}=r;return this._client.post(path`/threads/${l}/runs/${a}/submit_tool_outputs`,{body:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(a,r,s){const l=await this.submitToolOutputs(a,r,s);return await this.poll(l.id,r,s)}submitToolOutputsStream(a,r,s){return AssistantStream.createToolAssistantStream(a,this._client.beta.threads.runs,r,s)}};Runs$1.Steps=Steps;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs$1(this._client),this.messages=new Messages(this._client)}create(a={},r){return this._client.post("/threads",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(a,r){return this._client.get(path`/threads/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(a,r,s){return this._client.post(path`/threads/${a}`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(a,r){return this._client.delete(path`/threads/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}createAndRun(a,r){return this._client.post("/threads/runs",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:a.stream??!1})}async createAndRunPoll(a,r){const s=await this.createAndRun(a,r);return await this.runs.poll(s.id,{thread_id:s.thread_id},r)}createAndRunStream(a,r){return AssistantStream.createThreadAssistantStream(a,this._client.beta.threads,r)}}Threads.Runs=Runs$1;Threads.Messages=Messages;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime;Beta.Assistants=Assistants;Beta.Threads=Threads;class Completions extends APIResource{create(a,r){return this._client.post("/completions",{body:a,...r,stream:a.stream??!1})}}class Content extends APIResource{retrieve(a,r,s){const{container_id:l}=r;return this._client.get(path`/containers/${l}/files/${a}/content`,{...s,headers:buildHeaders([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let Files$2=class extends APIResource{constructor(){super(...arguments),this.content=new Content(this._client)}create(a,r,s){return this._client.post(path`/containers/${a}/files`,multipartFormRequestOptions({body:r,...s},this._client))}retrieve(a,r,s){const{container_id:l}=r;return this._client.get(path`/containers/${l}/files/${a}`,s)}list(a,r={},s){return this._client.getAPIList(path`/containers/${a}/files`,CursorPage,{query:r,...s})}delete(a,r,s){const{container_id:l}=r;return this._client.delete(path`/containers/${l}/files/${a}`,{...s,headers:buildHeaders([{Accept:"*/*"},s?.headers])})}};Files$2.Content=Content;class Containers extends APIResource{constructor(){super(...arguments),this.files=new Files$2(this._client)}create(a,r){return this._client.post("/containers",{body:a,...r})}retrieve(a,r){return this._client.get(path`/containers/${a}`,r)}list(a={},r){return this._client.getAPIList("/containers",CursorPage,{query:a,...r})}delete(a,r){return this._client.delete(path`/containers/${a}`,{...r,headers:buildHeaders([{Accept:"*/*"},r?.headers])})}}Containers.Files=Files$2;class Embeddings extends APIResource{create(a,r){const s=!!a.encoding_format;let l=s?a.encoding_format:"base64";s&&loggerFor(this._client).debug("embeddings/user defined encoding_format:",a.encoding_format);const m=this._client.post("/embeddings",{body:{...a,encoding_format:l},...r});return s?m:(loggerFor(this._client).debug("embeddings/decoding base64 embeddings from base64"),m._thenUnwrap(S=>(S&&S.data&&S.data.forEach(w=>{const R=w.embedding;w.embedding=toFloat32Array(R)}),S)))}}class OutputItems extends APIResource{retrieve(a,r,s){const{eval_id:l,run_id:m}=r;return this._client.get(path`/evals/${l}/runs/${m}/output_items/${a}`,s)}list(a,r,s){const{eval_id:l,...m}=r;return this._client.getAPIList(path`/evals/${l}/runs/${a}/output_items`,CursorPage,{query:m,...s})}}class Runs extends APIResource{constructor(){super(...arguments),this.outputItems=new OutputItems(this._client)}create(a,r,s){return this._client.post(path`/evals/${a}/runs`,{body:r,...s})}retrieve(a,r,s){const{eval_id:l}=r;return this._client.get(path`/evals/${l}/runs/${a}`,s)}list(a,r={},s){return this._client.getAPIList(path`/evals/${a}/runs`,CursorPage,{query:r,...s})}delete(a,r,s){const{eval_id:l}=r;return this._client.delete(path`/evals/${l}/runs/${a}`,s)}cancel(a,r,s){const{eval_id:l}=r;return this._client.post(path`/evals/${l}/runs/${a}`,s)}}Runs.OutputItems=OutputItems;class Evals extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client)}create(a,r){return this._client.post("/evals",{body:a,...r})}retrieve(a,r){return this._client.get(path`/evals/${a}`,r)}update(a,r,s){return this._client.post(path`/evals/${a}`,{body:r,...s})}list(a={},r){return this._client.getAPIList("/evals",CursorPage,{query:a,...r})}delete(a,r){return this._client.delete(path`/evals/${a}`,r)}}Evals.Runs=Runs;let Files$1=class extends APIResource{create(a,r){return this._client.post("/files",multipartFormRequestOptions({body:a,...r},this._client))}retrieve(a,r){return this._client.get(path`/files/${a}`,r)}list(a={},r){return this._client.getAPIList("/files",CursorPage,{query:a,...r})}delete(a,r){return this._client.delete(path`/files/${a}`,r)}content(a,r){return this._client.get(path`/files/${a}/content`,{...r,headers:buildHeaders([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}async waitForProcessing(a,{pollInterval:r=5e3,maxWait:s=1800*1e3}={}){const l=new Set(["processed","error","deleted"]),m=Date.now();let S=await this.retrieve(a);for(;!S.status||!l.has(S.status);)if(await sleep(r),S=await this.retrieve(a),Date.now()-m>s)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${a} to finish processing after ${s} milliseconds.`});return S}};class Methods extends APIResource{}let Graders$1=class extends APIResource{run(a,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:a,...r})}validate(a,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:a,...r})}};class Alpha extends APIResource{constructor(){super(...arguments),this.graders=new Graders$1(this._client)}}Alpha.Graders=Graders$1;class Permissions extends APIResource{create(a,r,s){return this._client.getAPIList(path`/fine_tuning/checkpoints/${a}/permissions`,Page,{body:r,method:"post",...s})}retrieve(a,r={},s){return this._client.get(path`/fine_tuning/checkpoints/${a}/permissions`,{query:r,...s})}delete(a,r,s){const{fine_tuned_model_checkpoint:l}=r;return this._client.delete(path`/fine_tuning/checkpoints/${l}/permissions/${a}`,s)}}let Checkpoints$1=class extends APIResource{constructor(){super(...arguments),this.permissions=new Permissions(this._client)}};Checkpoints$1.Permissions=Permissions;class Checkpoints extends APIResource{list(a,r={},s){return this._client.getAPIList(path`/fine_tuning/jobs/${a}/checkpoints`,CursorPage,{query:r,...s})}}class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(a,r){return this._client.post("/fine_tuning/jobs",{body:a,...r})}retrieve(a,r){return this._client.get(path`/fine_tuning/jobs/${a}`,r)}list(a={},r){return this._client.getAPIList("/fine_tuning/jobs",CursorPage,{query:a,...r})}cancel(a,r){return this._client.post(path`/fine_tuning/jobs/${a}/cancel`,r)}listEvents(a,r={},s){return this._client.getAPIList(path`/fine_tuning/jobs/${a}/events`,CursorPage,{query:r,...s})}pause(a,r){return this._client.post(path`/fine_tuning/jobs/${a}/pause`,r)}resume(a,r){return this._client.post(path`/fine_tuning/jobs/${a}/resume`,r)}}Jobs.Checkpoints=Checkpoints;class FineTuning extends APIResource{constructor(){super(...arguments),this.methods=new Methods(this._client),this.jobs=new Jobs(this._client),this.checkpoints=new Checkpoints$1(this._client),this.alpha=new Alpha(this._client)}}FineTuning.Methods=Methods;FineTuning.Jobs=Jobs;FineTuning.Checkpoints=Checkpoints$1;FineTuning.Alpha=Alpha;class GraderModels extends APIResource{}class Graders extends APIResource{constructor(){super(...arguments),this.graderModels=new GraderModels(this._client)}}Graders.GraderModels=GraderModels;class Images extends APIResource{createVariation(a,r){return this._client.post("/images/variations",multipartFormRequestOptions({body:a,...r},this._client))}edit(a,r){return this._client.post("/images/edits",multipartFormRequestOptions({body:a,...r,stream:a.stream??!1},this._client))}generate(a,r){return this._client.post("/images/generations",{body:a,...r,stream:a.stream??!1})}}class Models extends APIResource{retrieve(a,r){return this._client.get(path`/models/${a}`,r)}list(a){return this._client.getAPIList("/models",Page,a)}delete(a,r){return this._client.delete(path`/models/${a}`,r)}}class Moderations extends APIResource{create(a,r){return this._client.post("/moderations",{body:a,...r})}}function maybeParseResponse(o,a){return!a||!hasAutoParseableInput(a)?{...o,output_parsed:null,output:o.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(s=>({...s,parsed:null}))}:r)}:parseResponse(o,a)}function parseResponse(o,a){const r=o.output.map(l=>{if(l.type==="function_call")return{...l,parsed_arguments:parseToolCall(a,l)};if(l.type==="message"){const m=l.content.map(S=>S.type==="output_text"?{...S,parsed:parseTextFormat(a,S.text)}:S);return{...l,content:m}}return l}),s=Object.assign({},o,{output:r});return Object.getOwnPropertyDescriptor(o,"output_text")||addOutputText(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const l of s.output)if(l.type==="message"){for(const m of l.content)if(m.type==="output_text"&&m.parsed!==null)return m.parsed}return null}}),s}function parseTextFormat(o,a){return o.text?.format?.type!=="json_schema"?null:"$parseRaw"in o.text?.format?(o.text?.format).$parseRaw(a):JSON.parse(a)}function hasAutoParseableInput(o){return!!isAutoParsableResponseFormat(o.text?.format)}function isAutoParsableTool(o){return o?.$brand==="auto-parseable-tool"}function getInputToolByName(o,a){return o.find(r=>r.type==="function"&&r.name===a)}function parseToolCall(o,a){const r=getInputToolByName(o.tools??[],a.name);return{...a,...a,parsed_arguments:isAutoParsableTool(r)?r.$parseRaw(a.arguments):r?.strict?JSON.parse(a.arguments):null}}function addOutputText(o){const a=[];for(const r of o.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&a.push(s.text);o.output_text=a.join("")}var _ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(a){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,a)}static createResponse(a,r,s){const l=new ResponseStream(r);return l._run(()=>l._createOrRetrieveResponse(a,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createOrRetrieveResponse(a,r,s){const l=s?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);let m,S=null;"response_id"in r?(m=await a.responses.retrieve(r.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),S=r.starting_after??null):m=await a.responses.create({...r,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const w of m)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,w,S);if(m.controller.signal?.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0)},_ResponseStream_addEvent=function(r,s){if(this.ended)return;const l=(S,w)=>{(s==null||w.sequence_number>s)&&this._emit(S,w)},m=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,r);switch(l("event",r),r.type){case"response.output_text.delta":{const S=m.output[r.output_index];if(!S)throw new OpenAIError(`missing output at index ${r.output_index}`);if(S.type==="message"){const w=S.content[r.content_index];if(!w)throw new OpenAIError(`missing content at index ${r.content_index}`);if(w.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${w.type}`);l("response.output_text.delta",{...r,snapshot:w.text})}break}case"response.function_call_arguments.delta":{const S=m.output[r.output_index];if(!S)throw new OpenAIError(`missing output at index ${r.output_index}`);S.type==="function_call"&&l("response.function_call_arguments.delta",{...r,snapshot:S.arguments});break}default:l(r.type,r);break}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const r=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!r)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0);const s=finalizeResponse(r,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,s),s},_ResponseStream_accumulateResponse=function(r){let s=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!s){if(r.type!=="response.created")throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return s=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,r.response),s}switch(r.type){case"response.output_item.added":{s.output.push(r.item);break}case"response.content_part.added":{const l=s.output[r.output_index];if(!l)throw new OpenAIError(`missing output at index ${r.output_index}`);l.type==="message"&&l.content.push(r.part);break}case"response.output_text.delta":{const l=s.output[r.output_index];if(!l)throw new OpenAIError(`missing output at index ${r.output_index}`);if(l.type==="message"){const m=l.content[r.content_index];if(!m)throw new OpenAIError(`missing content at index ${r.content_index}`);if(m.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${m.type}`);m.text+=r.delta}break}case"response.function_call_arguments.delta":{const l=s.output[r.output_index];if(!l)throw new OpenAIError(`missing output at index ${r.output_index}`);l.type==="function_call"&&(l.arguments+=r.delta);break}case"response.completed":{__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,r.response);break}}return s},Symbol.asyncIterator)](){const a=[],r=[];let s=!1;return this.on("event",l=>{const m=r.shift();m?m.resolve(l):a.push(l)}),this.on("end",()=>{s=!0;for(const l of r)l.resolve(void 0);r.length=0}),this.on("abort",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),this.on("error",l=>{s=!0;for(const m of r)m.reject(l);r.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((m,S)=>r.push({resolve:m,reject:S})).then(m=>m?{value:m,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const a=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!a)throw new OpenAIError("stream ended without producing a ChatCompletion");return a}}function finalizeResponse(o,a){return maybeParseResponse(o,a)}class InputItems extends APIResource{list(a,r={},s){return this._client.getAPIList(path`/responses/${a}/input_items`,CursorPage,{query:r,...s})}}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(a,r){return this._client.post("/responses",{body:a,...r,stream:a.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&addOutputText(s),s))}retrieve(a,r={},s){return this._client.get(path`/responses/${a}`,{query:r,...s,stream:r?.stream??!1})._thenUnwrap(l=>("object"in l&&l.object==="response"&&addOutputText(l),l))}delete(a,r){return this._client.delete(path`/responses/${a}`,{...r,headers:buildHeaders([{Accept:"*/*"},r?.headers])})}parse(a,r){return this._client.responses.create(a,r)._thenUnwrap(s=>parseResponse(s,a))}stream(a,r){return ResponseStream.createResponse(this._client,a,r)}cancel(a,r){return this._client.post(path`/responses/${a}/cancel`,r)}}Responses.InputItems=InputItems;class Parts extends APIResource{create(a,r,s){return this._client.post(path`/uploads/${a}/parts`,multipartFormRequestOptions({body:r,...s},this._client))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(a,r){return this._client.post("/uploads",{body:a,...r})}cancel(a,r){return this._client.post(path`/uploads/${a}/cancel`,r)}complete(a,r,s){return this._client.post(path`/uploads/${a}/complete`,{body:r,...s})}}Uploads.Parts=Parts;const allSettledWithThrow=async o=>{const a=await Promise.allSettled(o),r=a.filter(l=>l.status==="rejected");if(r.length){for(const l of r)console.error(l.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const s=[];for(const l of a)l.status==="fulfilled"&&s.push(l.value);return s};class FileBatches extends APIResource{create(a,r,s){return this._client.post(path`/vector_stores/${a}/file_batches`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(a,r,s){const{vector_store_id:l}=r;return this._client.get(path`/vector_stores/${l}/file_batches/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(a,r,s){const{vector_store_id:l}=r;return this._client.post(path`/vector_stores/${l}/file_batches/${a}/cancel`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(a,r,s){const l=await this.create(a,r);return await this.poll(a,l.id,s)}listFiles(a,r,s){const{vector_store_id:l,...m}=r;return this._client.getAPIList(path`/vector_stores/${l}/file_batches/${a}/files`,CursorPage,{query:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(a,r,s){const l=buildHeaders([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:m,response:S}=await this.retrieve(r,{vector_store_id:a},{...s,headers:l}).withResponse();switch(m.status){case"in_progress":let w=5e3;if(s?.pollIntervalMs)w=s.pollIntervalMs;else{const R=S.headers.get("openai-poll-after-ms");if(R){const h=parseInt(R);isNaN(h)||(w=h)}}await sleep(w);break;case"failed":case"cancelled":case"completed":return m}}}async uploadAndPoll(a,{files:r,fileIds:s=[]},l){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const m=l?.maxConcurrency??5,S=Math.min(m,r.length),w=this._client,R=r.values(),h=[...s];async function u(A){for(let _ of A){const p=await w.files.create({file:_,purpose:"assistants"},l);h.push(p.id)}}const d=Array(S).fill(R).map(u);return await allSettledWithThrow(d),await this.createAndPoll(a,{file_ids:h})}}class Files extends APIResource{create(a,r,s){return this._client.post(path`/vector_stores/${a}/files`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(a,r,s){const{vector_store_id:l}=r;return this._client.get(path`/vector_stores/${l}/files/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(a,r,s){const{vector_store_id:l,...m}=r;return this._client.post(path`/vector_stores/${l}/files/${a}`,{body:m,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a,r={},s){return this._client.getAPIList(path`/vector_stores/${a}/files`,CursorPage,{query:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(a,r,s){const{vector_store_id:l}=r;return this._client.delete(path`/vector_stores/${l}/files/${a}`,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(a,r,s){const l=await this.create(a,r,s);return await this.poll(a,l.id,s)}async poll(a,r,s){const l=buildHeaders([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const m=await this.retrieve(r,{vector_store_id:a},{...s,headers:l}).withResponse(),S=m.data;switch(S.status){case"in_progress":let w=5e3;if(s?.pollIntervalMs)w=s.pollIntervalMs;else{const R=m.response.headers.get("openai-poll-after-ms");if(R){const h=parseInt(R);isNaN(h)||(w=h)}}await sleep(w);break;case"failed":case"completed":return S}}}async upload(a,r,s){const l=await this._client.files.create({file:r,purpose:"assistants"},s);return this.create(a,{file_id:l.id},s)}async uploadAndPoll(a,r,s){const l=await this.upload(a,r,s);return await this.poll(a,l.id,s)}content(a,r,s){const{vector_store_id:l}=r;return this._client.getAPIList(path`/vector_stores/${l}/files/${a}/content`,Page,{...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(a,r){return this._client.post("/vector_stores",{body:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(a,r){return this._client.get(path`/vector_stores/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(a,r,s){return this._client.post(path`/vector_stores/${a}`,{body:r,...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(a={},r){return this._client.getAPIList("/vector_stores",CursorPage,{query:a,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(a,r){return this._client.delete(path`/vector_stores/${a}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}search(a,r,s){return this._client.getAPIList(path`/vector_stores/${a}/search`,Page,{body:r,method:"post",...s,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}VectorStores.Files=Files;VectorStores.FileBatches=FileBatches;var _Webhooks_instances,_Webhooks_validateSecret,_Webhooks_getRequiredHeader;class Webhooks extends APIResource{constructor(){super(...arguments),_Webhooks_instances.add(this)}async unwrap(a,r,s=this._client.webhookSecret,l=300){return await this.verifySignature(a,r,s,l),JSON.parse(a)}async verifySignature(a,r,s=this._client.webhookSecret,l=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_validateSecret).call(this,s);const m=buildHeaders([r]).values,S=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,m,"webhook-signature"),w=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,m,"webhook-timestamp"),R=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,m,"webhook-id"),h=parseInt(w,10);if(isNaN(h))throw new InvalidWebhookSignatureError("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-h>l)throw new InvalidWebhookSignatureError("Webhook timestamp is too old");if(h>u+l)throw new InvalidWebhookSignatureError("Webhook timestamp is too new");const d=S.split(" ").map(b=>b.startsWith("v1,")?b.substring(3):b),A=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),_=R?`${R}.${w}.${a}`:`${w}.${a}`,p=await crypto.subtle.importKey("raw",A,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const b of d)try{const E=Buffer.from(b,"base64");if(await crypto.subtle.verify("HMAC",p,E,new TextEncoder().encode(_)))return}catch{continue}throw new InvalidWebhookSignatureError("The given webhook signature does not match the expected signature")}}_Webhooks_instances=new WeakSet,_Webhooks_validateSecret=function(a){if(typeof a!="string"||a.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},_Webhooks_getRequiredHeader=function(a,r){if(!a)throw new Error("Headers are required");const s=a.get(r);if(s==null)throw new Error(`Missing required header: ${r}`);return s};var _OpenAI_instances,_a,_OpenAI_encoder,_OpenAI_baseURLOverridden;class OpenAI{constructor({baseURL:a=readEnv("OPENAI_BASE_URL"),apiKey:r=readEnv("OPENAI_API_KEY"),organization:s=readEnv("OPENAI_ORG_ID")??null,project:l=readEnv("OPENAI_PROJECT_ID")??null,webhookSecret:m=readEnv("OPENAI_WEBHOOK_SECRET")??null,...S}={}){if(_OpenAI_instances.add(this),_OpenAI_encoder.set(this,void 0),this.completions=new Completions(this),this.chat=new Chat(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.graders=new Graders(this),this.vectorStores=new VectorStores(this),this.webhooks=new Webhooks(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this.evals=new Evals(this),this.containers=new Containers(this),r===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const w={apiKey:r,organization:s,project:l,webhookSecret:m,...S,baseURL:a||"https://api.openai.com/v1"};if(!w.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=w.baseURL,this.timeout=w.timeout??_a.DEFAULT_TIMEOUT,this.logger=w.logger??console;const R="warn";this.logLevel=R,this.logLevel=parseLogLevel(w.logLevel,"ClientOptions.logLevel",this)??parseLogLevel(readEnv("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??R,this.fetchOptions=w.fetchOptions,this.maxRetries=w.maxRetries??2,this.fetch=w.fetch??getDefaultFetch(),__classPrivateFieldSet(this,_OpenAI_encoder,FallbackEncoder),this._options=w,this.apiKey=r,this.organization=s,this.project=l,this.webhookSecret=m}withOptions(a){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...a})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:r}){}async authHeaders(a){return buildHeaders([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(a){return stringify(a,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}makeStatusError(a,r,s,l){return APIError.generate(a,r,s,l)}buildURL(a,r,s){const l=!__classPrivateFieldGet(this,_OpenAI_instances,"m",_OpenAI_baseURLOverridden).call(this)&&s||this.baseURL,m=isAbsoluteURL(a)?new URL(a):new URL(l+(l.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),S=this.defaultQuery();return isEmptyObj(S)||(r={...S,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(m.search=this.stringifyQuery(r)),m.toString()}async prepareOptions(a){}async prepareRequest(a,{url:r,options:s}){}get(a,r){return this.methodRequest("get",a,r)}post(a,r){return this.methodRequest("post",a,r)}patch(a,r){return this.methodRequest("patch",a,r)}put(a,r){return this.methodRequest("put",a,r)}delete(a,r){return this.methodRequest("delete",a,r)}methodRequest(a,r,s){return this.request(Promise.resolve(s).then(l=>({method:a,path:r,...l})))}request(a,r=null){return new APIPromise(this,this.makeRequest(a,r,void 0))}async makeRequest(a,r,s){const l=await a,m=l.maxRetries??this.maxRetries;r==null&&(r=m),await this.prepareOptions(l);const{req:S,url:w,timeout:R}=await this.buildRequest(l,{retryCount:m-r});await this.prepareRequest(S,{url:w,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=s===void 0?"":`, retryOf: ${s}`,d=Date.now();if(loggerFor(this).debug(`[${h}] sending request`,formatRequestDetails({retryOfRequestLogID:s,method:l.method,url:w,options:l,headers:S.headers})),l.signal?.aborted)throw new APIUserAbortError;const A=new AbortController,_=await this.fetchWithTimeout(w,S,R,A).catch(castToError),p=Date.now();if(_ instanceof Error){const y=`retrying, ${r} attempts remaining`;if(l.signal?.aborted)throw new APIUserAbortError;const P=isAbortError(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(r)return loggerFor(this).info(`[${h}] connection ${P?"timed out":"failed"} - ${y}`),loggerFor(this).debug(`[${h}] connection ${P?"timed out":"failed"} (${y})`,formatRequestDetails({retryOfRequestLogID:s,url:w,durationMs:p-d,message:_.message})),this.retryRequest(l,r,s??h);throw loggerFor(this).info(`[${h}] connection ${P?"timed out":"failed"} - error; no more retries left`),loggerFor(this).debug(`[${h}] connection ${P?"timed out":"failed"} (error; no more retries left)`,formatRequestDetails({retryOfRequestLogID:s,url:w,durationMs:p-d,message:_.message})),P?new APIConnectionTimeoutError:new APIConnectionError({cause:_})}const b=[..._.headers.entries()].filter(([y])=>y==="x-request-id").map(([y,P])=>", "+y+": "+JSON.stringify(P)).join(""),E=`[${h}${u}${b}] ${S.method} ${w} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${p-d}ms`;if(!_.ok){const y=await this.shouldRetry(_);if(r&&y){const $=`retrying, ${r} attempts remaining`;return await CancelReadableStream(_.body),loggerFor(this).info(`${E} - ${$}`),loggerFor(this).debug(`[${h}] response error (${$})`,formatRequestDetails({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:p-d})),this.retryRequest(l,r,s??h,_.headers)}const P=y?"error; no more retries left":"error; not retryable";loggerFor(this).info(`${E} - ${P}`);const B=await _.text().catch($=>castToError($).message),U=safeJSON(B),C=U?void 0:B;throw loggerFor(this).debug(`[${h}] response error (${P})`,formatRequestDetails({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,message:C,durationMs:Date.now()-d})),this.makeStatusError(_.status,U,C,_.headers)}return loggerFor(this).info(E),loggerFor(this).debug(`[${h}] response start`,formatRequestDetails({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:p-d})),{response:_,options:l,controller:A,requestLogID:h,retryOfRequestLogID:s,startTime:d}}getAPIList(a,r,s){return this.requestAPIList(r,{method:"get",path:a,...s})}requestAPIList(a,r){const s=this.makeRequest(r,null,void 0);return new PagePromise(this,s,a)}async fetchWithTimeout(a,r,s,l){const{signal:m,method:S,...w}=r||{};m&&m.addEventListener("abort",()=>l.abort());const R=setTimeout(()=>l.abort(),s),h=globalThis.ReadableStream&&w.body instanceof globalThis.ReadableStream||typeof w.body=="object"&&w.body!==null&&Symbol.asyncIterator in w.body,u={signal:l.signal,...h?{duplex:"half"}:{},method:"GET",...w};S&&(u.method=S.toUpperCase());try{return await this.fetch.call(void 0,a,u)}finally{clearTimeout(R)}}async shouldRetry(a){const r=a.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:a.status===408||a.status===409||a.status===429||a.status>=500}async retryRequest(a,r,s,l){let m;const S=l?.get("retry-after-ms");if(S){const R=parseFloat(S);Number.isNaN(R)||(m=R)}const w=l?.get("retry-after");if(w&&!m){const R=parseFloat(w);Number.isNaN(R)?m=Date.parse(w)-Date.now():m=R*1e3}if(!(m&&0<=m&&m<60*1e3)){const R=a.maxRetries??this.maxRetries;m=this.calculateDefaultRetryTimeoutMillis(r,R)}return await sleep(m),this.makeRequest(a,r-1,s)}calculateDefaultRetryTimeoutMillis(a,r){const m=r-a,S=Math.min(.5*Math.pow(2,m),8),w=1-Math.random()*.25;return S*w*1e3}async buildRequest(a,{retryCount:r=0}={}){const s={...a},{method:l,path:m,query:S,defaultBaseURL:w}=s,R=this.buildURL(m,S,w);"timeout"in s&&validatePositiveInteger("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:u}=this.buildBody({options:s}),d=await this.buildHeaders({options:a,method:l,bodyHeaders:h,retryCount:r});return{req:{method:l,headers:d,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...s.fetchOptions??{}},url:R,timeout:s.timeout}}async buildHeaders({options:a,method:r,bodyHeaders:s,retryCount:l}){let m={};this.idempotencyHeader&&r!=="get"&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),m[this.idempotencyHeader]=a.idempotencyKey);const S=buildHeaders([m,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l),...a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{},...getPlatformHeaders(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(a),this._options.defaultHeaders,s,a.headers]);return this.validateHeaders(S),S.values}buildBody({options:{body:a,headers:r}}){if(!a)return{bodyHeaders:void 0,body:void 0};const s=buildHeaders([r]);return ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||typeof a=="string"&&s.values.has("content-type")||a instanceof Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:a}:typeof a=="object"&&(Symbol.asyncIterator in a||Symbol.iterator in a&&"next"in a&&typeof a.next=="function")?{bodyHeaders:void 0,body:ReadableStreamFrom(a)}:__classPrivateFieldGet(this,_OpenAI_encoder,"f").call(this,{body:a,headers:s})}}_a=OpenAI,_OpenAI_encoder=new WeakMap,_OpenAI_instances=new WeakSet,_OpenAI_baseURLOverridden=function(){return this.baseURL!=="https://api.openai.com/v1"};OpenAI.OpenAI=_a;OpenAI.DEFAULT_TIMEOUT=6e5;OpenAI.OpenAIError=OpenAIError;OpenAI.APIError=APIError;OpenAI.APIConnectionError=APIConnectionError;OpenAI.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI.APIUserAbortError=APIUserAbortError;OpenAI.NotFoundError=NotFoundError;OpenAI.ConflictError=ConflictError;OpenAI.RateLimitError=RateLimitError;OpenAI.BadRequestError=BadRequestError;OpenAI.AuthenticationError=AuthenticationError;OpenAI.InternalServerError=InternalServerError;OpenAI.PermissionDeniedError=PermissionDeniedError;OpenAI.UnprocessableEntityError=UnprocessableEntityError;OpenAI.InvalidWebhookSignatureError=InvalidWebhookSignatureError;OpenAI.toFile=toFile;OpenAI.Completions=Completions;OpenAI.Chat=Chat;OpenAI.Embeddings=Embeddings;OpenAI.Files=Files$1;OpenAI.Images=Images;OpenAI.Audio=Audio;OpenAI.Moderations=Moderations;OpenAI.Models=Models;OpenAI.FineTuning=FineTuning;OpenAI.Graders=Graders;OpenAI.VectorStores=VectorStores;OpenAI.Webhooks=Webhooks;OpenAI.Beta=Beta;OpenAI.Batches=Batches;OpenAI.Uploads=Uploads;OpenAI.Responses=Responses;OpenAI.Evals=Evals;OpenAI.Containers=Containers;function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(a,r){module.exports=a.pdfjsLib=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.TextRenderingMode=a.RenderingIntentFlag=a.PromiseCapability=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.MAX_IMAGE_SIZE_TO_CACHE=a.LINE_FACTOR=a.LINE_DESCENT_FACTOR=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.BASELINE_FACTOR=a.AnnotationType=a.AnnotationReplyType=a.AnnotationPrefix=a.AnnotationMode=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationEditorType=a.AnnotationEditorPrefix=a.AnnotationEditorParamsType=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.assert=x,a.bytesToString=W,a.createValidAbsoluteUrl=T,a.getModificationDate=Gt,a.getUuid=sr,a.getVerbosityLevel=At,a.info=V,a.isArrayBuffer=zt,a.isArrayEqual=ue,a.isNodeJS=void 0,a.normalizeUnicode=Za,a.objectFromMap=ct,a.objectSize=St,a.setVerbosityLevel=yt,a.shadow=I,a.string32=ot,a.stringToBytes=Q,a.stringToPDFString=Tt,a.stringToUTF8String=Dt,a.unreachable=O,a.utf8StringToString=Ft,a.warn=H;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=r;const s=[1,0,0,1,0,0];a.IDENTITY_MATRIX=s;const l=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=l;const m=1e7;a.MAX_IMAGE_SIZE_TO_CACHE=m;const S=1.35;a.LINE_FACTOR=S;const w=.35;a.LINE_DESCENT_FACTOR=w;const R=w/S;a.BASELINE_FACTOR=R;const h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=h;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=u;const d="pdfjs_internal_editor_";a.AnnotationEditorPrefix=d;const A={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};a.AnnotationEditorType=A;const _={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};a.AnnotationEditorParamsType=_;const p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=p;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=b;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=E;const y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=y;const P={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=P;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=B;const U={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=U;const C={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=C;const k={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=k;const $={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=$;const Y={O:"PageOpen",C:"PageClose"};a.PageActionEventType=Y;const X={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=X;const J={NONE:0,BINARY:1};a.CMapCompressionType=J;const tt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=tt;const _t={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=_t;let mt=X.WARNINGS;function yt(vt){Number.isInteger(vt)&&(mt=vt)}function At(){return mt}function V(vt){mt>=X.INFOS&&console.log(`Info: ${vt}`)}function H(vt){mt>=X.WARNINGS&&console.log(`Warning: ${vt}`)}function O(vt){throw new Error(vt)}function x(vt,at){vt||O(at)}function g(vt){switch(vt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function T(vt,at=null,nt=null){if(!vt)return null;try{if(nt&&typeof vt=="string"&&(nt.addDefaultProtocol&&vt.startsWith("www.")&&vt.match(/\./g)?.length>=2&&(vt=`http://${vt}`),nt.tryConvertEncoding))try{vt=Dt(vt)}catch{}const xt=at?new URL(vt,at):new URL(vt);if(g(xt))return xt}catch{}return null}function I(vt,at,nt,xt=!1){return Object.defineProperty(vt,at,{value:nt,enumerable:!xt,configurable:!0,writable:!1}),nt}const N=function(){function at(nt,xt){this.constructor===at&&O("Cannot initialize BaseException."),this.message=nt,this.name=xt}return at.prototype=new Error,at.constructor=at,at}();a.BaseException=N;class G extends N{constructor(at,nt){super(at,"PasswordException"),this.code=nt}}a.PasswordException=G;class j extends N{constructor(at,nt){super(at,"UnknownErrorException"),this.details=nt}}a.UnknownErrorException=j;class v extends N{constructor(at){super(at,"InvalidPDFException")}}a.InvalidPDFException=v;class D extends N{constructor(at){super(at,"MissingPDFException")}}a.MissingPDFException=D;class F extends N{constructor(at,nt){super(at,"UnexpectedResponseException"),this.status=nt}}a.UnexpectedResponseException=F;class z extends N{constructor(at){super(at,"FormatError")}}a.FormatError=z;class q extends N{constructor(at){super(at,"AbortException")}}a.AbortException=q;function W(vt){(typeof vt!="object"||vt?.length===void 0)&&O("Invalid argument for bytesToString");const at=vt.length,nt=8192;if(at<nt)return String.fromCharCode.apply(null,vt);const xt=[];for(let jt=0;jt<at;jt+=nt){const ie=Math.min(jt+nt,at),re=vt.subarray(jt,ie);xt.push(String.fromCharCode.apply(null,re))}return xt.join("")}function Q(vt){typeof vt!="string"&&O("Invalid argument for stringToBytes");const at=vt.length,nt=new Uint8Array(at);for(let xt=0;xt<at;++xt)nt[xt]=vt.charCodeAt(xt)&255;return nt}function ot(vt){return String.fromCharCode(vt>>24&255,vt>>16&255,vt>>8&255,vt&255)}function St(vt){return Object.keys(vt).length}function ct(vt){const at=Object.create(null);for(const[nt,xt]of vt)at[nt]=xt;return at}function ht(){const vt=new Uint8Array(4);return vt[0]=1,new Uint32Array(vt.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class ft{static get isLittleEndian(){return I(this,"isLittleEndian",ht())}static get isEvalSupported(){return I(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return I(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?I(this,"platform",{isWin:!1,isMac:!1}):I(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return I(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}a.FeatureTest=ft;const bt=[...Array(256).keys()].map(vt=>vt.toString(16).padStart(2,"0"));class Et{static makeHexColor(at,nt,xt){return`#${bt[at]}${bt[nt]}${bt[xt]}`}static scaleMinMax(at,nt){let xt;at[0]?(at[0]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[0],nt[1]*=at[0],at[3]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[3],nt[3]*=at[3]):(xt=nt[0],nt[0]=nt[2],nt[2]=xt,xt=nt[1],nt[1]=nt[3],nt[3]=xt,at[1]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[1],nt[3]*=at[1],at[2]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[2],nt[1]*=at[2]),nt[0]+=at[4],nt[1]+=at[4],nt[2]+=at[5],nt[3]+=at[5]}static transform(at,nt){return[at[0]*nt[0]+at[2]*nt[1],at[1]*nt[0]+at[3]*nt[1],at[0]*nt[2]+at[2]*nt[3],at[1]*nt[2]+at[3]*nt[3],at[0]*nt[4]+at[2]*nt[5]+at[4],at[1]*nt[4]+at[3]*nt[5]+at[5]]}static applyTransform(at,nt){const xt=at[0]*nt[0]+at[1]*nt[2]+nt[4],jt=at[0]*nt[1]+at[1]*nt[3]+nt[5];return[xt,jt]}static applyInverseTransform(at,nt){const xt=nt[0]*nt[3]-nt[1]*nt[2],jt=(at[0]*nt[3]-at[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/xt,ie=(-at[0]*nt[1]+at[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/xt;return[jt,ie]}static getAxialAlignedBoundingBox(at,nt){const xt=this.applyTransform(at,nt),jt=this.applyTransform(at.slice(2,4),nt),ie=this.applyTransform([at[0],at[3]],nt),re=this.applyTransform([at[2],at[1]],nt);return[Math.min(xt[0],jt[0],ie[0],re[0]),Math.min(xt[1],jt[1],ie[1],re[1]),Math.max(xt[0],jt[0],ie[0],re[0]),Math.max(xt[1],jt[1],ie[1],re[1])]}static inverseTransform(at){const nt=at[0]*at[3]-at[1]*at[2];return[at[3]/nt,-at[1]/nt,-at[2]/nt,at[0]/nt,(at[2]*at[5]-at[4]*at[3])/nt,(at[4]*at[1]-at[5]*at[0])/nt]}static singularValueDecompose2dScale(at){const nt=[at[0],at[2],at[1],at[3]],xt=at[0]*nt[0]+at[1]*nt[2],jt=at[0]*nt[1]+at[1]*nt[3],ie=at[2]*nt[0]+at[3]*nt[2],re=at[2]*nt[1]+at[3]*nt[3],tn=(xt+re)/2,Ue=Math.sqrt((xt+re)**2-4*(xt*re-ie*jt))/2,on=tn+Ue||1,ye=tn-Ue||1;return[Math.sqrt(on),Math.sqrt(ye)]}static normalizeRect(at){const nt=at.slice(0);return at[0]>at[2]&&(nt[0]=at[2],nt[2]=at[0]),at[1]>at[3]&&(nt[1]=at[3],nt[3]=at[1]),nt}static intersect(at,nt){const xt=Math.max(Math.min(at[0],at[2]),Math.min(nt[0],nt[2])),jt=Math.min(Math.max(at[0],at[2]),Math.max(nt[0],nt[2]));if(xt>jt)return null;const ie=Math.max(Math.min(at[1],at[3]),Math.min(nt[1],nt[3])),re=Math.min(Math.max(at[1],at[3]),Math.max(nt[1],nt[3]));return ie>re?null:[xt,ie,jt,re]}static bezierBoundingBox(at,nt,xt,jt,ie,re,tn,Ue){const on=[],ye=[[],[]];let ln,Be,xn,ne,da,Pe,oe,fe;for(let Ja=0;Ja<2;++Ja){if(Ja===0?(Be=6*at-12*xt+6*ie,ln=-3*at+9*xt-9*ie+3*tn,xn=3*xt-3*at):(Be=6*nt-12*jt+6*re,ln=-3*nt+9*jt-9*re+3*Ue,xn=3*jt-3*nt),Math.abs(ln)<1e-12){if(Math.abs(Be)<1e-12)continue;ne=-xn/Be,0<ne&&ne<1&&on.push(ne);continue}oe=Be*Be-4*xn*ln,fe=Math.sqrt(oe),!(oe<0)&&(da=(-Be+fe)/(2*ln),0<da&&da<1&&on.push(da),Pe=(-Be-fe)/(2*ln),0<Pe&&Pe<1&&on.push(Pe))}let je=on.length,be;const Yn=je;for(;je--;)ne=on[je],be=1-ne,ye[0][je]=be*be*be*at+3*be*be*ne*xt+3*be*ne*ne*ie+ne*ne*ne*tn,ye[1][je]=be*be*be*nt+3*be*be*ne*jt+3*be*ne*ne*re+ne*ne*ne*Ue;return ye[0][Yn]=at,ye[1][Yn]=nt,ye[0][Yn+1]=tn,ye[1][Yn+1]=Ue,ye[0].length=ye[1].length=Yn+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}a.Util=Et;const Rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Tt(vt){if(vt[0]>="ï"){let nt;if(vt[0]==="þ"&&vt[1]==="ÿ"?nt="utf-16be":vt[0]==="ÿ"&&vt[1]==="þ"?nt="utf-16le":vt[0]==="ï"&&vt[1]==="»"&&vt[2]==="¿"&&(nt="utf-8"),nt)try{const xt=new TextDecoder(nt,{fatal:!0}),jt=Q(vt);return xt.decode(jt)}catch(xt){H(`stringToPDFString: "${xt}".`)}}const at=[];for(let nt=0,xt=vt.length;nt<xt;nt++){const jt=Rt[vt.charCodeAt(nt)];at.push(jt?String.fromCharCode(jt):vt.charAt(nt))}return at.join("")}function Dt(vt){return decodeURIComponent(escape(vt))}function Ft(vt){return unescape(encodeURIComponent(vt))}function zt(vt){return typeof vt=="object"&&vt?.byteLength!==void 0}function ue(vt,at){if(vt.length!==at.length)return!1;for(let nt=0,xt=vt.length;nt<xt;nt++)if(vt[nt]!==at[nt])return!1;return!0}function Gt(vt=new Date){return[vt.getUTCFullYear().toString(),(vt.getUTCMonth()+1).toString().padStart(2,"0"),vt.getUTCDate().toString().padStart(2,"0"),vt.getUTCHours().toString().padStart(2,"0"),vt.getUTCMinutes().toString().padStart(2,"0"),vt.getUTCSeconds().toString().padStart(2,"0")].join("")}class xe{#t=!1;constructor(){this.promise=new Promise((at,nt)=>{this.resolve=xt=>{this.#t=!0,at(xt)},this.reject=xt=>{this.#t=!0,nt(xt)}})}get settled(){return this.#t}}a.PromiseCapability=xe;let qt=null,Ke=null;function Za(vt){return qt||(qt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ke=new Map([["ﬅ","ſt"]])),vt.replaceAll(qt,(at,nt,xt)=>nt?nt.normalize("NFKC"):Ke.get(xt))}function sr(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const vt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(vt);else for(let at=0;at<32;at++)vt[at]=Math.floor(Math.random()*255);return W(vt)}const ha="pdfjs_internal_id_";a.AnnotationPrefix=ha},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(o){if(typeof o=="string"||o instanceof URL?o={url:o}:(0,_util.isArrayBuffer)(o)&&(o={data:o}),typeof o!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!o.url&&!o.data&&!o.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const a=new PDFDocumentLoadingTask,{docId:r}=a,s=o.url?getUrlProp(o.url):null,l=o.data?getDataProp(o.data):null,m=o.httpHeaders||null,S=o.withCredentials===!0,w=o.password??null,R=o.range instanceof PDFDataRangeTransport?o.range:null,h=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let u=o.worker instanceof PDFWorker?o.worker:null;const d=o.verbosity,A=typeof o.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(o.docBaseUrl)?o.docBaseUrl:null,_=typeof o.cMapUrl=="string"?o.cMapUrl:null,p=o.cMapPacked!==!1,b=o.CMapReaderFactory||DefaultCMapReaderFactory,E=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,y=o.StandardFontDataFactory||DefaultStandardFontDataFactory,P=o.stopAtErrors!==!0,B=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,U=o.isEvalSupported!==!1,C=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!_util.isNodeJS,k=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,$=typeof o.disableFontFace=="boolean"?o.disableFontFace:_util.isNodeJS,Y=o.fontExtraProperties===!0,X=o.enableXfa===!0,J=o.ownerDocument||globalThis.document,tt=o.disableRange===!0,_t=o.disableStream===!0,mt=o.disableAutoFetch===!0,yt=o.pdfBug===!0,At=R?R.length:o.length??NaN,V=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!_util.isNodeJS&&!$,H=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:b===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&_&&E&&(0,_display_utils.isValidFetchUrl)(_,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(E,document.baseURI),O=o.canvasFactory||new DefaultCanvasFactory({ownerDocument:J}),x=o.filterFactory||new DefaultFilterFactory({docId:r,ownerDocument:J}),g=null;(0,_util.setVerbosityLevel)(d);const T={canvasFactory:O,filterFactory:x};if(H||(T.cMapReaderFactory=new b({baseUrl:_,isCompressed:p}),T.standardFontDataFactory=new y({baseUrl:E})),!u){const G={verbosity:d,port:_worker_options.GlobalWorkerOptions.workerPort};u=G.port?PDFWorker.fromPort(G):new PDFWorker(G),a._worker=u}const I={docId:r,apiVersion:"3.11.174",data:l,password:w,disableAutoFetch:mt,rangeChunkSize:h,length:At,docBaseUrl:A,enableXfa:X,evaluatorOptions:{maxImageSize:B,disableFontFace:$,ignoreErrors:P,isEvalSupported:U,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:k,fontExtraProperties:Y,useSystemFonts:V,cMapUrl:H?_:null,standardFontDataUrl:H?E:null}},N={ignoreErrors:P,isEvalSupported:U,disableFontFace:$,fontExtraProperties:Y,enableXfa:X,ownerDocument:J,disableAutoFetch:mt,pdfBug:yt,styleElement:g};return u.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const G=_fetchDocument(u,I),j=new Promise(function(v){let D;R?D=new _transport_stream.PDFDataTransportStream({length:At,initialData:R.initialData,progressiveDone:R.progressiveDone,contentDispositionFilename:R.contentDispositionFilename,disableRange:tt,disableStream:_t},R):l||(D=(z=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(z):(0,_display_utils.isValidFetchUrl)(z.url)?new _displayFetch_stream.PDFFetchStream(z):new _displayNetwork.PDFNetworkStream(z))({url:s,length:At,httpHeaders:m,withCredentials:S,rangeChunkSize:h,disableRange:tt,disableStream:_t})),v(D)});return Promise.all([G,j]).then(function([v,D]){if(a.destroyed)throw new Error("Loading aborted");const F=new _message_handler.MessageHandler(r,v,u.port),z=new WorkerTransport(F,a,D,N,T);a._transport=z,F.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(o,a){if(o.destroyed)throw new Error("Worker was destroyed");const r=await o.messageHandler.sendWithPromise("GetDocRequest",a,a.data?[a.data.buffer]:null);if(o.destroyed)throw new Error("Worker was destroyed");return r}function getUrlProp(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(_util.isNodeJS&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(o){if(_util.isNodeJS&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return(0,_util.stringToBytes)(o);if(typeof o=="object"&&!isNaN(o?.length)||(0,_util.isArrayBuffer)(o))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(a){throw this._worker?.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,r,s=!1,l=null){this.length=a,this.initialData=r,this.progressiveDone=s,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,r){for(const s of this._rangeListeners)s(a,r)}onDataProgress(a,r){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(a,r)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,r){this._pdfInfo=a,this._transport=r,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(s=>{if(!s)return s;const l=[];for(const m in s)l.push(...s[m]);return l}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(a,r,s,l=!1){this._pageIndex=a,this._pageInfo=r,this._transport=s,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:r=this.rotate,offsetX:s=0,offsetY:l=0,dontFlip:m=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:r,offsetX:s,offsetY:l,dontFlip:m})}getAnnotations({intent:a="display"}={}){const r=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,r.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:a,viewport:r,intent:s="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:m=null,background:S=null,optionalContentConfigPromise:w=null,annotationCanvasMap:R=null,pageColors:h=null,printAnnotationStorage:u=null}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(s,l,u);this.#e=!1,this.#a(),w||(w=this._transport.getOptionalContentConfig());let A=this._intentStates.get(d.cacheKey);A||(A=Object.create(null),this._intentStates.set(d.cacheKey,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const _=!!(d.renderingIntent&_util.RenderingIntentFlag.PRINT);A.displayReadyCapability||(A.displayReadyCapability=new _util.PromiseCapability,A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const p=y=>{A.renderTasks.delete(b),(this._maybeCleanupAfterRender||_)&&(this.#e=!0),this.#n(!_),y?(b.capability.reject(y),this._abortOperatorList({intentState:A,reason:y instanceof Error?y:new Error(y)})):b.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},b=new InternalRenderTask({callback:p,params:{canvasContext:a,viewport:r,transform:m,background:S},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:h});(A.renderTasks||=new Set).add(b);const E=b.task;return Promise.all([A.displayReadyCapability.promise,w]).then(([y,P])=>{if(this.destroyed){p();return}this._stats?.time("Rendering"),b.initializeGraphics({transparency:y,optionalContentConfig:P}),b.operatorListChanged()}).catch(p),E}getOperatorList({intent:a="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:s=null}={}){function l(){S.operatorList.lastChunk&&(S.opListReadCapability.resolve(S.operatorList),S.renderTasks.delete(w))}const m=this._transport.getRenderingIntent(a,r,s,!0);let S=this._intentStates.get(m.cacheKey);S||(S=Object.create(null),this._intentStates.set(m.cacheKey,S));let w;return S.opListReadCapability||(w=Object.create(null),w.operatorListChanged=l,S.opListReadCapability=new _util.PromiseCapability,(S.renderTasks||=new Set).add(w),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m)),S.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:a===!0,disableNormalization:r===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_xfa_text.XfaText.textContent(s));const r=this.streamTextContent(a);return new Promise(function(s,l){function m(){S.read().then(function({value:R,done:h}){if(h){s(w);return}Object.assign(w.styles,R.styles),w.items.push(...R.items),m()},l)}const S=r.getReader(),w={items:[],styles:Object.create(null)};m()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const s of r.renderTasks)a.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,this.#a(),Promise.all(a)}cleanup(a=!1){this.#e=!0;const r=this.#n(!1);return a&&r&&(this._stats&&=new _display_utils.StatTimer),r}#n(a=!1){if(this.#a(),!this.#e||this.destroyed)return!1;if(a)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:r,operatorList:s}of this._intentStates.values())if(r.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#a(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(a,r){const s=this._intentStates.get(r);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(a))}_renderPageChunk(a,r){for(let s=0,l=a.length;s<l;s++)r.operatorList.fnArray.push(a.fnArray[s]),r.operatorList.argsArray.push(a.argsArray[s]);r.operatorList.lastChunk=a.lastChunk,r.operatorList.separateAnnots=a.separateAnnots;for(const s of r.renderTasks)s.operatorListChanged();a.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:a,cacheKey:r,annotationStorageSerializable:s}){const{map:l,transfers:m}=s,w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:r,annotationStorage:l},m).getReader(),R=this._intentStates.get(r);R.streamReader=w;const h=()=>{w.read().then(({value:u,done:d})=>{if(d){R.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,R),h())},u=>{if(R.streamReader=null,!this._transport.destroyed){if(R.operatorList){R.operatorList.lastChunk=!0;for(const d of R.renderTasks)d.operatorListChanged();this.#n(!0)}if(R.displayReadyCapability)R.displayReadyCapability.reject(u);else if(R.opListReadCapability)R.opListReadCapability.reject(u);else throw u}})};h()}_abortOperatorList({intentState:a,reason:r,force:s=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!s){if(a.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;r.extraDelay>0&&r.extraDelay<1e3&&(l+=r.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:r,force:!0})},l);return}}if(a.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[l,m]of this._intentStates)if(m===a){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(a,r){const s={data:structuredClone(a,r?{transfer:r}:null)};this.#e.then(()=>{for(const l of this.#t)l.call(this,s)})}addEventListener(a,r){this.#t.add(r)}removeEventListener(a,r){this.#t.delete(r)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const o=document?.currentScript?.src;o&&(PDFWorkerUtil.fallbackWorkerSrc=o.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(o,a){let r;try{if(r=new URL(o),!r.origin||r.origin==="null")return!1}catch{return!1}const s=new URL(a,r);return r.origin===s.origin},PDFWorkerUtil.createCDNWrapper=function(o){const a=`importScripts("${o}");`;return URL.createObjectURL(new Blob([a]))}}class PDFWorker{static#workerPorts;constructor({name:o=null,port:a=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(this.name=o,this.destroyed=!1,this.verbosity=r,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,a){if(PDFWorker.#workerPorts?.has(a))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(o){this._port=o,this._messageHandler=new _message_handler.MessageHandler("main","worker",o),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:o}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,o)||(o=PDFWorkerUtil.createCDNWrapper(new URL(o,window.location).href));const a=new Worker(o),r=new _message_handler.MessageHandler("main","worker",a),s=()=>{a.removeEventListener("error",l),r.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||s()};a.addEventListener("error",l),r.on("test",S=>{if(a.removeEventListener("error",l),this.destroyed){s();return}S?(this._messageHandler=r,this._port=a,this._webWorker=a,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),a.terminate())}),r.on("ready",S=>{if(a.removeEventListener("error",l),this.destroyed){s();return}try{m()}catch{this._setupFakeWorker()}});const m=()=>{const S=new Uint8Array;r.send("test",S,[S.buffer])};m();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(o=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,s=new _message_handler.MessageHandler(r+"_worker",r,a);o.setup(s,a);const l=new _message_handler.MessageHandler(r,r+"_worker",a);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(o=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${o.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(o){if(!o?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const a=this.#workerPorts?.get(o.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new PDFWorker(o)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#a=null;constructor(a,r,s,l,m){this.messageHandler=a,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=m.canvasFactory,this.filterFactory=m.filterFactory,this.cMapReaderFactory=m.cMapReaderFactory,this.standardFontDataFactory=m.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(a,r=null){const s=this.#t.get(a);if(s)return s;const l=this.messageHandler.sendWithPromise(a,r);return this.#t.set(a,l),l}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,r=_util.AnnotationMode.ENABLE,s=null,l=!1){let m=_util.RenderingIntentFlag.DISPLAY,S=_annotation_storage.SerializableEmpty;switch(a){case"any":m=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":m=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(r){case _util.AnnotationMode.DISABLE:m+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:m+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:m+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,S=(m&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return l&&(m+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:m,cacheKey:`${m}_${S.hash}`,annotationStorageSerializable:S}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const s of this.#e.values())a.push(s._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return a.push(r),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:r}=this;a.on("GetReader",(s,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=m=>{this._lastProgress={loaded:m.loaded,total:m.total}},l.onPull=()=>{this._fullReader.read().then(function({value:m,done:S}){if(S){l.close();return}(0,_util.assert)(m instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(m),1,[m])}).catch(m=>{l.error(m)})},l.onCancel=m=>{this._fullReader.cancel(m),l.ready.catch(S=>{if(!this.destroyed)throw S})}}),a.on("ReaderHeadersReady",s=>{const l=new _util.PromiseCapability,m=this._fullReader;return m.headersReady.then(()=>{(!m.isStreamingSupported||!m.isRangeSupported)&&(this._lastProgress&&r.onProgress?.(this._lastProgress),m.onProgress=S=>{r.onProgress?.({loaded:S.loaded,total:S.total})}),l.resolve({isStreamingSupported:m.isStreamingSupported,isRangeSupported:m.isRangeSupported,contentLength:m.contentLength})},l.reject),l.promise}),a.on("GetRangeReader",(s,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const m=this._networkStream.getRangeReader(s.begin,s.end);if(!m){l.close();return}l.onPull=()=>{m.read().then(function({value:S,done:w}){if(w){l.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{l.error(S)})},l.onCancel=S=>{m.cancel(S),l.ready.catch(w=>{if(!this.destroyed)throw w})}}),a.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(s,this))}),a.on("DocException",function(s){let l;switch(s.name){case"PasswordException":l=new _util.PasswordException(s.message,s.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(s.message);break;case"MissingPDFException":l=new _util.MissingPDFException(s.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(s.message,s.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(s.message,s.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(l)}),a.on("PasswordRequest",s=>{if(this.#a=new _util.PromiseCapability,r.onPassword){const l=m=>{m instanceof Error?this.#a.reject(m):this.#a.resolve({password:m})};try{r.onPassword(l,s.code)}catch(m){this.#a.reject(m)}}else this.#a.reject(new _util.PasswordException(s.message,s.code));return this.#a.promise}),a.on("DataLoaded",s=>{r.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),a.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),a.on("commonobj",([s,l,m])=>{if(!this.destroyed&&!this.commonObjs.has(s))switch(l){case"Font":const S=this._params;if("error"in m){const h=m.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const w=S.pdfBug&&globalThis.FontInspector?.enabled?(h,u)=>globalThis.FontInspector.fontAdded(h,u):null,R=new _font_loader.FontFaceObject(m,{isEvalSupported:S.isEvalSupported,disableFontFace:S.disableFontFace,ignoreErrors:S.ignoreErrors,inspectFont:w});this.fontLoader.bind(R).catch(h=>a.sendWithPromise("FontFallback",{id:s})).finally(()=>{!S.fontExtraProperties&&R.data&&(R.data=null),this.commonObjs.resolve(s,R)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,m);break;default:throw new Error(`Got unknown common object type ${l}`)}}),a.on("obj",([s,l,m,S])=>{if(this.destroyed)return;const w=this.#e.get(l);if(!w.objs.has(s))switch(m){case"Image":if(w.objs.resolve(s,S),S){let R;if(S.bitmap){const{width:h,height:u}=S;R=h*u*4}else R=S.data?.length||0;R>_util.MAX_IMAGE_SIZE_TO_CACHE&&(w._maybeCleanupAfterRender=!0)}break;case"Pattern":w.objs.resolve(s,S);break;default:throw new Error(`Got unknown object type ${m}`)}}),a.on("DocProgress",s=>{this.destroyed||r.onProgress?.({loaded:s.loaded,total:s.total})}),a.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:a,transfers:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:this._fullReader?.filename??null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=a-1,s=this.#n.get(r);if(s)return s;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(m=>{if(this.destroyed)throw new Error("Transport destroyed");const S=new PDFPageProxy(r,m,this,this._params.pdfBug);return this.#e.set(r,S),S});return this.#n.set(r,l),l}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:r})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const a="GetMetadata",r=this.#t.get(a);if(r)return r;const s=this.messageHandler.sendWithPromise(a,null).then(l=>({info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(a,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of this.#e.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:a,enableXfa:r}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:r})}}class PDFObjects{#t=Object.create(null);#e(a){return this.#t[a]||={capability:new _util.PromiseCapability,data:null}}get(a,r=null){if(r){const l=this.#e(a);return l.capability.promise.then(()=>r(l.data)),null}const s=this.#t[a];if(!s?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${a}.`);return s.data}has(a){return this.#t[a]?.capability.settled||!1}resolve(a,r=null){const s=this.#e(a);s.data=r,s.capability.resolve()}clear(){for(const a in this.#t){const{data:r}=this.#t[a];r?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(a){this.#t=a,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(a=0){this.#t.cancel(null,a)}get separateAnnots(){const{separateAnnots:a}=this.#t.operatorList;if(!a)return!1;const{annotationCanvasMap:r}=this.#t;return a.form||a.canvas&&r?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:a,params:r,objs:s,commonObjs:l,annotationCanvasMap:m,operatorList:S,pageIndex:w,canvasFactory:R,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:A=null}){this.callback=a,this.params=r,this.objs=s,this.commonObjs=l,this.annotationCanvasMap=m,this.operatorListIdx=null,this.operatorList=S,this._pageIndex=w,this.canvasFactory=R,this.filterFactory=h,this._pdfBug=d,this.pageColors=A,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:r}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:l,transform:m,background:S}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:m,viewport:l,transparency:a,background:S}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(a=null,r=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,r))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SerializableEmpty=a.PrintAnnotationStorage=a.AnnotationStorage=void 0;var s=r(1),l=r(4),m=r(8);const S=Object.freeze({map:null,hash:"",transfers:void 0});a.SerializableEmpty=S;class w{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(u,d){const A=this.#e.get(u);return A===void 0?d:Object.assign(d,A)}getRawValue(u){return this.#e.get(u)}remove(u){if(this.#e.delete(u),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of this.#e.values())if(d instanceof l.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(u,d){const A=this.#e.get(u);let _=!1;if(A!==void 0)for(const[p,b]of Object.entries(d))A[p]!==b&&(_=!0,A[p]=b);else _=!0,this.#e.set(u,d);_&&this.#n(),d instanceof l.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(u){return this.#e.has(u)}getAll(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}setAll(u){for(const[d,A]of Object.entries(u))this.setValue(d,A)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R(this)}get serializable(){if(this.#e.size===0)return S;const u=new Map,d=new m.MurmurHash3_64,A=[],_=Object.create(null);let p=!1;for(const[b,E]of this.#e){const y=E instanceof l.AnnotationEditor?E.serialize(!1,_):E;y&&(u.set(b,y),d.update(`${b}:${JSON.stringify(y)}`),p||=!!y.bitmap)}if(p)for(const b of u.values())b.bitmap&&A.push(b.bitmap);return u.size>0?{map:u,hash:d.hexdigest(),transfers:A}:S}}a.AnnotationStorage=w;class R extends w{#t;constructor(u){super();const{map:d,hash:A,transfers:_}=u.serializable,p=structuredClone(d,_?{transfer:_}:null);this.#t={map:p,hash:A,transfers:_}}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}a.PrintAnnotationStorage=R},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditor=void 0;var s=r(5),l=r(1),m=r(6);class S{#t="";#e=!1;#n=null;#a=null;#o=null;#r=!1;#i=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#f=!1;#h=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#d=!1;#p=S._zIndex++;static _borderLineWidth=-1;static _colorManager=new s.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(h){this.constructor===S&&(0,l.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=h.isCentered,this._structTreeParentId=null;const{rotation:u,rawDims:{pageWidth:d,pageHeight:A,pageX:_,pageY:p}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,A],this.pageTranslation=[_,p];const[b,E]=this.parentDimensions;this.x=h.x/b,this.y=h.y/E,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,l.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(h){const u=new w({id:h.parent.getNextId(),parent:h.parent,uiManager:h._uiManager});u.annotationElementId=h.annotationElementId,u.deleted=!0,u._uiManager.addToAnnotationStorage(u)}static initialize(h,u=null){if(S._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(A=>[A,h.get(A)])),u?.strings)for(const A of u.strings)S._l10nPromise.set(A,h.get(A));if(S._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);S._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(h,u){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(h){return!1}static paste(h,u){(0,l.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#d}set _isDraggable(h){this.#d=h,this.div?.classList.toggle("draggable",h)}center(){const[h,u]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*u/(h*2),this.y+=this.width*h/(u*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*u/(h*2),this.y-=this.width*h/(u*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(h){!this._focusEventsAllowed||!this.isAttachedToDOM||h.relatedTarget?.closest(`#${this.id}`)||(h.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(h,u,d,A){const[_,p]=this.parentDimensions;[d,A]=this.screenToPageTranslation(d,A),this.x=(h+d)/_,this.y=(u+A)/p,this.fixAndSetPosition()}#_([h,u],d,A){[d,A]=this.screenToPageTranslation(d,A),this.x+=d/h,this.y+=A/u,this.fixAndSetPosition()}translate(h,u){this.#_(this.parentDimensions,h,u)}translateInPage(h,u){this.#_(this.pageDimensions,h,u),this.div.scrollIntoView({block:"nearest"})}drag(h,u){const[d,A]=this.parentDimensions;if(this.x+=h/d,this.y+=u/A,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:P}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,P)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:_,y:p}=this;const[b,E]=this.#g();_+=b,p+=E,this.div.style.left=`${(100*_).toFixed(2)}%`,this.div.style.top=`${(100*p).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[h,u]=this.parentDimensions,{_borderLineWidth:d}=S,A=d/h,_=d/u;switch(this.rotation){case 90:return[-A,_];case 180:return[A,_];case 270:return[A,-_];default:return[-A,-_]}}fixAndSetPosition(){const[h,u]=this.pageDimensions;let{x:d,y:A,width:_,height:p}=this;switch(_*=h,p*=u,d*=h,A*=u,this.rotation){case 0:d=Math.max(0,Math.min(h-_,d)),A=Math.max(0,Math.min(u-p,A));break;case 90:d=Math.max(0,Math.min(h-p,d)),A=Math.min(u,Math.max(_,A));break;case 180:d=Math.min(h,Math.max(_,d)),A=Math.min(u,Math.max(p,A));break;case 270:d=Math.min(h,Math.max(p,d)),A=Math.max(0,Math.min(u-_,A));break}this.x=d/=h,this.y=A/=u;const[b,E]=this.#g();d+=b,A+=E;const{style:y}=this.div;y.left=`${(100*d).toFixed(2)}%`,y.top=`${(100*A).toFixed(2)}%`,this.moveInDOM()}static#m(h,u,d){switch(d){case 90:return[u,-h];case 180:return[-h,-u];case 270:return[-u,h];default:return[h,u]}}screenToPageTranslation(h,u){return S.#m(h,u,this.parentRotation)}pageTranslationToScreen(h,u){return S.#m(h,u,360-this.parentRotation)}#u(h){switch(h){case 90:{const[u,d]=this.pageDimensions;return[0,-u/d,d/u,0]}case 180:return[-1,0,0,-1];case 270:{const[u,d]=this.pageDimensions;return[0,u/d,-d/u,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:h,pageDimensions:[u,d]}=this,A=u*h,_=d*h;return l.FeatureTest.isCSSRoundSupported?[Math.round(A),Math.round(_)]:[A,_]}setDims(h,u){const[d,A]=this.parentDimensions;this.div.style.width=`${(100*h/d).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*u/A).toFixed(2)}%`),this.#n?.classList.toggle("small",h<S.SMALL_EDITOR_SIZE||u<S.SMALL_EDITOR_SIZE)}fixDims(){const{style:h}=this.div,{height:u,width:d}=h,A=d.endsWith("%"),_=!this.#r&&u.endsWith("%");if(A&&_)return;const[p,b]=this.parentDimensions;A||(h.width=`${(100*parseFloat(d)/p).toFixed(2)}%`),!this.#r&&!_&&(h.height=`${(100*parseFloat(u)/b).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#i)return;this.#i=document.createElement("div"),this.#i.classList.add("resizers");const h=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||h.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const u of h){const d=document.createElement("div");this.#i.append(d),d.classList.add("resizer",u),d.addEventListener("pointerdown",this.#E.bind(this,u)),d.addEventListener("contextmenu",m.noContextMenu)}this.div.prepend(this.#i)}#E(h,u){u.preventDefault();const{isMac:d}=l.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&d)return;const A=this.#S.bind(this,h),_=this._isDraggable;this._isDraggable=!1;const p={passive:!0,capture:!0};window.addEventListener("pointermove",A,p);const b=this.x,E=this.y,y=this.width,P=this.height,B=this.parent.div.style.cursor,U=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(u.target).cursor;const C=()=>{this._isDraggable=_,window.removeEventListener("pointerup",C),window.removeEventListener("blur",C),window.removeEventListener("pointermove",A,p),this.parent.div.style.cursor=B,this.div.style.cursor=U;const k=this.x,$=this.y,Y=this.width,X=this.height;k===b&&$===E&&Y===y&&X===P||this.addCommands({cmd:()=>{this.width=Y,this.height=X,this.x=k,this.y=$;const[J,tt]=this.parentDimensions;this.setDims(J*Y,tt*X),this.fixAndSetPosition()},undo:()=>{this.width=y,this.height=P,this.x=b,this.y=E;const[J,tt]=this.parentDimensions;this.setDims(J*y,tt*P),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",C),window.addEventListener("blur",C)}#S(h,u){const[d,A]=this.parentDimensions,_=this.x,p=this.y,b=this.width,E=this.height,y=S.MIN_SIZE/d,P=S.MIN_SIZE/A,B=j=>Math.round(j*1e4)/1e4,U=this.#u(this.rotation),C=(j,v)=>[U[0]*j+U[2]*v,U[1]*j+U[3]*v],k=this.#u(360-this.rotation),$=(j,v)=>[k[0]*j+k[2]*v,k[1]*j+k[3]*v];let Y,X,J=!1,tt=!1;switch(h){case"topLeft":J=!0,Y=(j,v)=>[0,0],X=(j,v)=>[j,v];break;case"topMiddle":Y=(j,v)=>[j/2,0],X=(j,v)=>[j/2,v];break;case"topRight":J=!0,Y=(j,v)=>[j,0],X=(j,v)=>[0,v];break;case"middleRight":tt=!0,Y=(j,v)=>[j,v/2],X=(j,v)=>[0,v/2];break;case"bottomRight":J=!0,Y=(j,v)=>[j,v],X=(j,v)=>[0,0];break;case"bottomMiddle":Y=(j,v)=>[j/2,v],X=(j,v)=>[j/2,0];break;case"bottomLeft":J=!0,Y=(j,v)=>[0,v],X=(j,v)=>[j,0];break;case"middleLeft":tt=!0,Y=(j,v)=>[0,v/2],X=(j,v)=>[j,v/2];break}const _t=Y(b,E),mt=X(b,E);let yt=C(...mt);const At=B(_+yt[0]),V=B(p+yt[1]);let H=1,O=1,[x,g]=this.screenToPageTranslation(u.movementX,u.movementY);if([x,g]=$(x/d,g/A),J){const j=Math.hypot(b,E);H=O=Math.max(Math.min(Math.hypot(mt[0]-_t[0]-x,mt[1]-_t[1]-g)/j,1/b,1/E),y/b,P/E)}else tt?H=Math.max(y,Math.min(1,Math.abs(mt[0]-_t[0]-x)))/b:O=Math.max(P,Math.min(1,Math.abs(mt[1]-_t[1]-g)))/E;const T=B(b*H),I=B(E*O);yt=C(...X(T,I));const N=At-yt[0],G=V-yt[1];this.width=T,this.height=I,this.x=N,this.y=G,this.setDims(d*T,A*I),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const h=this.#n=document.createElement("button");h.className="altText";const u=await S._l10nPromise.get("editor_alt_text_button_label");h.textContent=u,h.setAttribute("aria-label",u),h.tabIndex="0",h.addEventListener("contextmenu",m.noContextMenu),h.addEventListener("pointerdown",d=>d.stopPropagation()),h.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),h.addEventListener("keydown",d=>{d.target===h&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),this.#R(),this.div.append(h),S.SMALL_EDITOR_SIZE||(S.SMALL_EDITOR_SIZE=Math.min(128,Math.round(h.getBoundingClientRect().width*1.4)))}async#R(){const h=this.#n;if(!h)return;if(!this.#t&&!this.#e){h.classList.remove("done"),this.#a?.remove();return}S._l10nPromise.get("editor_alt_text_edit_button_label").then(d=>{h.setAttribute("aria-label",d)});let u=this.#a;if(!u){this.#a=u=document.createElement("span"),u.className="tooltip",u.setAttribute("role","tooltip");const d=u.id=`alt-text-tooltip-${this.id}`;h.setAttribute("aria-describedby",d);const A=100;h.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#a.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},A)}),h.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#a?.classList.remove("show")})}h.classList.add("done"),u.innerText=this.#e?await S._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,u.parentNode||h.append(u)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:h,decorative:u}){this.#t===h&&this.#e===u||(this.#t=h,this.#e=u,this.#R())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[h,u]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*u/h).toFixed(2)}%`,this.div.style.maxHeight=`${(100*h/u).toFixed(2)}%`);const[d,A]=this.getInitialTranslation();return this.translate(d,A),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(h){const{isMac:u}=l.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&u){h.preventDefault();return}this.#s=!0,this.#T(h)}#T(h){if(!this._isDraggable)return;const u=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,A;u&&(d={passive:!0,capture:!0},A=p=>{const[b,E]=this.screenToPageTranslation(p.movementX,p.movementY);this._uiManager.dragSelectedEditors(b,E)},window.addEventListener("pointermove",A,d));const _=()=>{if(window.removeEventListener("pointerup",_),window.removeEventListener("blur",_),u&&window.removeEventListener("pointermove",A,d),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:p}=l.FeatureTest.platform;h.ctrlKey&&!p||h.shiftKey||h.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",_),window.addEventListener("blur",_)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(h,u,d){h.changeParent(this),this.x=u,this.y=d,this.fixAndSetPosition()}getRect(h,u){const d=this.parentScale,[A,_]=this.pageDimensions,[p,b]=this.pageTranslation,E=h/d,y=u/d,P=this.x*A,B=this.y*_,U=this.width*A,C=this.height*_;switch(this.rotation){case 0:return[P+E+p,_-B-y-C+b,P+E+U+p,_-B-y+b];case 90:return[P+y+p,_-B+E+b,P+y+C+p,_-B+E+U+b];case 180:return[P-E-U+p,_-B+y+b,P-E+p,_-B+y+C+b];case 270:return[P-y-C+p,_-B-E-U+b,P-y+p,_-B-E+b];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,u){const[d,A,_,p]=h,b=_-d,E=p-A;switch(this.rotation){case 0:return[d,u-p,b,E];case 90:return[d,u-A,E,b];case 180:return[_,u-A,b,E];case 270:return[_,u-p,E,b];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(h=!1,u=null){(0,l.unreachable)("An editor must be serializable")}static deserialize(h,u,d){const A=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:d});A.rotation=h.rotation;const[_,p]=A.pageDimensions,[b,E,y,P]=A.getRectInCurrentCoords(h.rect,p);return A.x=b/_,A.y=E/p,A.width=y/_,A.height=P/p,A}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#a=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#i.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#i?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(h,u){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(h){this.#f=h,this.parent&&(h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(h,u){this.#r=!0;const d=h/u,{style:A}=this.div;A.aspectRatio=d,A.height="auto"}static get MIN_SIZE(){return 16}}a.AnnotationEditor=S;class w extends S{constructor(h){super(h),this.annotationElementId=h.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.KeyboardManager=a.CommandManager=a.ColorManager=a.AnnotationEditorUIManager=void 0,a.bindEvents=m,a.opacityToHex=S;var s=r(1),l=r(6);function m(_,p,b){for(const E of b)p.addEventListener(E,_[E].bind(_))}function S(_){return Math.round(Math.min(255,Math.max(1,255*_))).toString(16).padStart(2,"0")}class w{#t=0;getId(){return`${s.AnnotationEditorPrefix}${this.#t++}`}}class R{#t=(0,s.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const p='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',E=new OffscreenCanvas(1,3).getContext("2d"),y=new Image;y.src=p;const P=y.decode().then(()=>(E.drawImage(y,0,0,1,1,0,0,1,3),new Uint32Array(E.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",P)}async#a(p,b){this.#n||=new Map;let E=this.#n.get(p);if(E===null)return null;if(E?.bitmap)return E.refCounter+=1,E;try{E||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let y;if(typeof b=="string"){E.url=b;const P=await fetch(b);if(!P.ok)throw new Error(P.statusText);y=await P.blob()}else y=E.file=b;if(y.type==="image/svg+xml"){const P=R._isSVGFittingCanvas,B=new FileReader,U=new Image,C=new Promise((k,$)=>{U.onload=()=>{E.bitmap=U,E.isSvg=!0,k()},B.onload=async()=>{const Y=E.svgUrl=B.result;U.src=await P?`${Y}#svgView(preserveAspectRatio(none))`:Y},U.onerror=B.onerror=$});B.readAsDataURL(y),await C}else E.bitmap=await createImageBitmap(y);E.refCounter=1}catch(y){console.error(y),E=null}return this.#n.set(p,E),E&&this.#n.set(E.id,E),E}async getFromFile(p){const{lastModified:b,name:E,size:y,type:P}=p;return this.#a(`${b}_${E}_${y}_${P}`,p)}async getFromUrl(p){return this.#a(p,p)}async getFromId(p){this.#n||=new Map;const b=this.#n.get(p);return b?b.bitmap?(b.refCounter+=1,b):b.file?this.getFromFile(b.file):this.getFromUrl(b.url):null}getSvgUrl(p){const b=this.#n.get(p);return b?.isSvg?b.svgUrl:null}deleteId(p){this.#n||=new Map;const b=this.#n.get(p);b&&(b.refCounter-=1,b.refCounter===0&&(b.bitmap=null))}isValidId(p){return p.startsWith(`image_${this.#t}_`)}}class h{#t=[];#e=!1;#n;#a=-1;constructor(p=128){this.#n=p}add({cmd:p,undo:b,mustExec:E,type:y=NaN,overwriteIfSameType:P=!1,keepUndo:B=!1}){if(E&&p(),this.#e)return;const U={cmd:p,undo:b,type:y};if(this.#a===-1){this.#t.length>0&&(this.#t.length=0),this.#a=0,this.#t.push(U);return}if(P&&this.#t[this.#a].type===y){B&&(U.undo=this.#t[this.#a].undo),this.#t[this.#a]=U;return}const C=this.#a+1;C===this.#n?this.#t.splice(0,1):(this.#a=C,C<this.#t.length&&this.#t.splice(C)),this.#t.push(U)}undo(){this.#a!==-1&&(this.#e=!0,this.#t[this.#a].undo(),this.#e=!1,this.#a-=1)}redo(){this.#a<this.#t.length-1&&(this.#a+=1,this.#e=!0,this.#t[this.#a].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#a!==-1}hasSomethingToRedo(){return this.#a<this.#t.length-1}destroy(){this.#t=null}}a.CommandManager=h;class u{constructor(p){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:b}=s.FeatureTest.platform;for(const[E,y,P={}]of p)for(const B of E){const U=B.startsWith("mac+");b&&U?(this.callbacks.set(B.slice(4),{callback:y,options:P}),this.allKeys.add(B.split("+").at(-1))):!b&&!U&&(this.callbacks.set(B,{callback:y,options:P}),this.allKeys.add(B.split("+").at(-1)))}}#t(p){p.altKey&&this.buffer.push("alt"),p.ctrlKey&&this.buffer.push("ctrl"),p.metaKey&&this.buffer.push("meta"),p.shiftKey&&this.buffer.push("shift"),this.buffer.push(p.key);const b=this.buffer.join("+");return this.buffer.length=0,b}exec(p,b){if(!this.allKeys.has(b.key))return;const E=this.callbacks.get(this.#t(b));if(!E)return;const{callback:y,options:{bubbles:P=!1,args:B=[],checker:U=null}}=E;U&&!U(p,b)||(y.bind(p,...B)(),P||(b.stopPropagation(),b.preventDefault()))}}a.KeyboardManager=u;class d{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const p=new Map([["CanvasText",null],["Canvas",null]]);return(0,l.getColorValues)(p),(0,s.shadow)(this,"_colors",p)}convert(p){const b=(0,l.getRGB)(p);if(!window.matchMedia("(forced-colors: active)").matches)return b;for(const[E,y]of this._colors)if(y.every((P,B)=>P===b[B]))return d._colorsMapping.get(E);return b}getHexCode(p){const b=this._colors.get(p);return b?s.Util.makeHexColor(...b):p}}a.ColorManager=d;class A{#t=null;#e=new Map;#n=new Map;#a=null;#o=null;#r=new h;#i=0;#l=new Set;#c=null;#s=null;#f=new Set;#h=null;#d=new w;#p=!1;#_=!1;#g=null;#m=s.AnnotationEditorType.NONE;#u=new Set;#y=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#R=this.copy.bind(this);#T=this.cut.bind(this);#k=this.paste.bind(this);#L=this.keydown.bind(this);#N=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#F=this.onScaleChanging.bind(this);#M=this.onRotationChanging.bind(this);#P={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#v=[0,0];#w=null;#x=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const p=A.prototype,b=P=>{const{activeElement:B}=document;return B&&P.#x.contains(B)&&P.hasSomethingToControl()},E=this.TRANSLATE_SMALL,y=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],p.selectAll],[["ctrl+z","mac+meta+z"],p.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],p.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],p.delete],[["Escape","mac+Escape"],p.unselectAll],[["ArrowLeft","mac+ArrowLeft"],p.translateSelectedEditors,{args:[-E,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p.translateSelectedEditors,{args:[-y,0],checker:b}],[["ArrowRight","mac+ArrowRight"],p.translateSelectedEditors,{args:[E,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p.translateSelectedEditors,{args:[y,0],checker:b}],[["ArrowUp","mac+ArrowUp"],p.translateSelectedEditors,{args:[0,-E],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p.translateSelectedEditors,{args:[0,-y],checker:b}],[["ArrowDown","mac+ArrowDown"],p.translateSelectedEditors,{args:[0,E],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p.translateSelectedEditors,{args:[0,y],checker:b}]]))}constructor(p,b,E,y,P,B){this.#x=p,this.#I=b,this.#a=E,this._eventBus=y,this._eventBus._on("editingaction",this.#N),this._eventBus._on("pagechanging",this.#b),this._eventBus._on("scalechanging",this.#F),this._eventBus._on("rotationchanging",this.#M),this.#o=P.annotationStorage,this.#h=P.filterFactory,this.#y=B,this.viewParameters={realScale:l.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#O(),this.#B(),this._eventBus._off("editingaction",this.#N),this._eventBus._off("pagechanging",this.#b),this._eventBus._off("scalechanging",this.#F),this._eventBus._off("rotationchanging",this.#M);for(const p of this.#n.values())p.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#r.destroy(),this.#a.destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",this.#y?this.#h.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(this.#x).direction)}editAltText(p){this.#a?.editAltText(this,p)}onPageChanging({pageNumber:p}){this.#i=p-1}focusMainContainer(){this.#x.focus()}findParent(p,b){for(const E of this.#n.values()){const{x:y,y:P,width:B,height:U}=E.div.getBoundingClientRect();if(p>=y&&p<=y+B&&b>=P&&b<=P+U)return E}return null}disableUserSelect(p=!1){this.#I.classList.toggle("noUserSelect",p)}addShouldRescale(p){this.#f.add(p)}removeShouldRescale(p){this.#f.delete(p)}onScaleChanging({scale:p}){this.commitOrRemove(),this.viewParameters.realScale=p*l.PixelsPerInch.PDF_TO_CSS_UNITS;for(const b of this.#f)b.onScaleChanging()}onRotationChanging({pagesRotation:p}){this.commitOrRemove(),this.viewParameters.rotation=p}addToAnnotationStorage(p){!p.isEmpty()&&this.#o&&!this.#o.has(p.id)&&this.#o.setValue(p.id,p)}#U(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#B(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:p}=document;for(const b of this.#u)if(b.div.contains(p)){this.#g=[b,p],b._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[p,b]=this.#g;this.#g=null,b.addEventListener("focusin",()=>{p._focusEventsAllowed=!0},{once:!0}),b.focus()}#j(){window.addEventListener("keydown",this.#L,{capture:!0})}#O(){window.removeEventListener("keydown",this.#L,{capture:!0})}#D(){document.addEventListener("copy",this.#R),document.addEventListener("cut",this.#T),document.addEventListener("paste",this.#k)}#C(){document.removeEventListener("copy",this.#R),document.removeEventListener("cut",this.#T),document.removeEventListener("paste",this.#k)}addEditListeners(){this.#j(),this.#D()}removeEditListeners(){this.#O(),this.#C()}copy(p){if(p.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const b=[];for(const E of this.#u){const y=E.serialize(!0);y&&b.push(y)}b.length!==0&&p.clipboardData.setData("application/pdfjs",JSON.stringify(b))}cut(p){this.copy(p),this.delete()}paste(p){p.preventDefault();const{clipboardData:b}=p;for(const P of b.items)for(const B of this.#s)if(B.isHandlingMimeForPasting(P.type)){B.paste(P,this.currentLayer);return}let E=b.getData("application/pdfjs");if(!E)return;try{E=JSON.parse(E)}catch(P){(0,s.warn)(`paste: "${P.message}".`);return}if(!Array.isArray(E))return;this.unselectAll();const y=this.currentLayer;try{const P=[];for(const C of E){const k=y.deserialize(C);if(!k)return;P.push(k)}const B=()=>{for(const C of P)this.#G(C);this.#q(P)},U=()=>{for(const C of P)C.remove()};this.addCommands({cmd:B,undo:U,mustExec:!0})}catch(P){(0,s.warn)(`paste: "${P.message}".`)}}keydown(p){this.getActive()?.shouldGetKeyboardEvents()||A._keyboardManager.exec(this,p)}onEditingAction(p){["undo","redo","delete","selectAll"].includes(p.name)&&this[p.name]()}#A(p){Object.entries(p).some(([E,y])=>this.#P[E]!==y)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#P,p)})}#H(p){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:p})}setEditingState(p){p?(this.#U(),this.#j(),this.#D(),this.#A({isEditing:this.#m!==s.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#O(),this.#C(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(p){if(!this.#s){this.#s=p;for(const b of this.#s)this.#H(b.defaultPropertiesToUpdate)}}getId(){return this.#d.getId()}get currentLayer(){return this.#n.get(this.#i)}getLayer(p){return this.#n.get(p)}get currentPageIndex(){return this.#i}addLayer(p){this.#n.set(p.pageIndex,p),this.#p?p.enable():p.disable()}removeLayer(p){this.#n.delete(p.pageIndex)}updateMode(p,b=null){if(this.#m!==p){if(this.#m=p,p===s.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#X(),this.unselectAll();for(const E of this.#n.values())E.updateMode(p);if(b){for(const E of this.#e.values())if(E.annotationElementId===b){this.setSelected(E),E.enterInEditMode();break}}}}updateToolbar(p){p!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:p})}updateParams(p,b){if(this.#s){if(p===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(p);return}for(const E of this.#u)E.updateParams(p,b);for(const E of this.#s)E.updateDefaultParams(p,b)}}enableWaiting(p=!1){if(this.#_!==p){this.#_=p;for(const b of this.#n.values())p?b.disableClick():b.enableClick(),b.div.classList.toggle("waiting",p)}}#X(){if(!this.#p){this.#p=!0;for(const p of this.#n.values())p.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(const p of this.#n.values())p.disable()}}getEditors(p){const b=[];for(const E of this.#e.values())E.pageIndex===p&&b.push(E);return b}getEditor(p){return this.#e.get(p)}addEditor(p){this.#e.set(p.id,p)}removeEditor(p){this.#e.delete(p.id),this.unselect(p),(!p.annotationElementId||!this.#l.has(p.annotationElementId))&&this.#o?.remove(p.id)}addDeletedAnnotationElement(p){this.#l.add(p.annotationElementId),p.deleted=!0}isDeletedAnnotationElement(p){return this.#l.has(p)}removeDeletedAnnotationElement(p){this.#l.delete(p.annotationElementId),p.deleted=!1}#G(p){const b=this.#n.get(p.pageIndex);b?b.addOrRebuild(p):this.addEditor(p)}setActiveEditor(p){this.#t!==p&&(this.#t=p,p&&this.#H(p.propertiesToUpdate))}toggleSelected(p){if(this.#u.has(p)){this.#u.delete(p),p.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#u.add(p),p.select(),this.#H(p.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(p){for(const b of this.#u)b!==p&&b.unselect();this.#u.clear(),this.#u.add(p),p.select(),this.#H(p.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(p){return this.#u.has(p)}unselect(p){p.unselect(),this.#u.delete(p),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#A({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#r.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(p){this.#r.add(p),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const p of this.#e.values())return p.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const p=[...this.#u],b=()=>{for(const y of p)y.remove()},E=()=>{for(const y of p)this.#G(y)};this.addCommands({cmd:b,undo:E,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#q(p){this.#u.clear();for(const b of p)b.isEmpty()||(this.#u.add(b),b.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const p of this.#u)p.commit();this.#q(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const p of this.#u)p.unselect();this.#u.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(p,b,E=!1){if(E||this.commitOrRemove(),!this.hasSelection)return;this.#v[0]+=p,this.#v[1]+=b;const[y,P]=this.#v,B=[...this.#u],U=1e3;this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.#w=null,this.#v[0]=this.#v[1]=0,this.addCommands({cmd:()=>{for(const C of B)this.#e.has(C.id)&&C.translateInPage(y,P)},undo:()=>{for(const C of B)this.#e.has(C.id)&&C.translateInPage(-y,-P)},mustExec:!1})},U);for(const C of B)C.translateInPage(p,b)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const p of this.#u)this.#c.set(p,{savedX:p.x,savedY:p.y,savedPageIndex:p.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const p=this.#c;this.#c=null;let b=!1;for(const[{x:y,y:P,pageIndex:B},U]of p)U.newX=y,U.newY=P,U.newPageIndex=B,b||=y!==U.savedX||P!==U.savedY||B!==U.savedPageIndex;if(!b)return!1;const E=(y,P,B,U)=>{if(this.#e.has(y.id)){const C=this.#n.get(U);C?y._setParentAndPosition(C,P,B):(y.pageIndex=U,y.x=P,y.y=B)}};return this.addCommands({cmd:()=>{for(const[y,{newX:P,newY:B,newPageIndex:U}]of p)E(y,P,B,U)},undo:()=>{for(const[y,{savedX:P,savedY:B,savedPageIndex:U}]of p)E(y,P,B,U)},mustExec:!0}),!0}dragSelectedEditors(p,b){if(this.#c)for(const E of this.#c.keys())E.drag(p,b)}rebuild(p){if(p.parent===null){const b=this.getLayer(p.pageIndex);b?(b.changeParent(p),b.addOrRebuild(p)):(this.addEditor(p),this.addToAnnotationStorage(p),p.rebuild())}else p.parent.addOrRebuild(p)}isActive(p){return this.#t===p}getActive(){return this.#t}getMode(){return this.#m}get imageManager(){return(0,s.shadow)(this,"imageManager",new R)}}a.AnnotationEditorUIManager=A},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMFilterFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=$,a.getColorValues=_t,a.getCurrentTransform=mt,a.getCurrentTransformInverse=yt,a.getFilenameFromUrl=y,a.getPdfFilenameFromUrl=P,a.getRGB=tt,a.getXfaPageViewport=J,a.isDataScheme=b,a.isPdfFile=E,a.isValidFetchUrl=U,a.loadScript=k,a.noContextMenu=C,a.setLayerDimensions=At;var s=r(7),l=r(1);const m="http://www.w3.org/2000/svg";class S{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}a.PixelsPerInch=S;class w extends s.BaseFilterFactory{#t;#e;#n;#a;#o;#r;#i;#l;#c;#s;#f=0;constructor({docId:H,ownerDocument:O=globalThis.document}={}){super(),this.#n=H,this.#a=O}get#h(){return this.#t||=new Map}get#d(){if(!this.#e){const H=this.#a.createElement("div"),{style:O}=H;O.visibility="hidden",O.contain="strict",O.width=O.height=0,O.position="absolute",O.top=O.left=0,O.zIndex=-1;const x=this.#a.createElementNS(m,"svg");x.setAttribute("width",0),x.setAttribute("height",0),this.#e=this.#a.createElementNS(m,"defs"),H.append(x),x.append(this.#e),this.#a.body.append(H)}return this.#e}addFilter(H){if(!H)return"none";let O=this.#h.get(H);if(O)return O;let x,g,T,I;if(H.length===1){const v=H[0],D=new Array(256);for(let F=0;F<256;F++)D[F]=v[F]/255;I=x=g=T=D.join(",")}else{const[v,D,F]=H,z=new Array(256),q=new Array(256),W=new Array(256);for(let Q=0;Q<256;Q++)z[Q]=v[Q]/255,q[Q]=D[Q]/255,W[Q]=F[Q]/255;x=z.join(","),g=q.join(","),T=W.join(","),I=`${x}${g}${T}`}if(O=this.#h.get(I),O)return this.#h.set(H,O),O;const N=`g_${this.#n}_transfer_map_${this.#f++}`,G=`url(#${N})`;this.#h.set(H,G),this.#h.set(I,G);const j=this.#_(N);return this.#m(x,g,T,j),G}addHCMFilter(H,O){const x=`${H}-${O}`;if(this.#r===x)return this.#i;if(this.#r=x,this.#i="none",this.#o?.remove(),!H||!O)return this.#i;const g=this.#u(H);H=l.Util.makeHexColor(...g);const T=this.#u(O);if(O=l.Util.makeHexColor(...T),this.#d.style.color="",H==="#000000"&&O==="#ffffff"||H===O)return this.#i;const I=new Array(256);for(let D=0;D<=255;D++){const F=D/255;I[D]=F<=.03928?F/12.92:((F+.055)/1.055)**2.4}const N=I.join(","),G=`g_${this.#n}_hcm_filter`,j=this.#l=this.#_(G);this.#m(N,N,N,j),this.#p(j);const v=(D,F)=>{const z=g[D]/255,q=T[D]/255,W=new Array(F+1);for(let Q=0;Q<=F;Q++)W[Q]=z+Q/F*(q-z);return W.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),j),this.#i=`url(#${G})`,this.#i}addHighlightHCMFilter(H,O,x,g){const T=`${H}-${O}-${x}-${g}`;if(this.#c===T)return this.#s;if(this.#c=T,this.#s="none",this.#l?.remove(),!H||!O)return this.#s;const[I,N]=[H,O].map(this.#u.bind(this));let G=Math.round(.2126*I[0]+.7152*I[1]+.0722*I[2]),j=Math.round(.2126*N[0]+.7152*N[1]+.0722*N[2]),[v,D]=[x,g].map(this.#u.bind(this));j<G&&([G,j,v,D]=[j,G,D,v]),this.#d.style.color="";const F=(W,Q,ot)=>{const St=new Array(256),ct=(j-G)/ot,ht=W/255,ut=(Q-W)/(255*ot);let ft=0;for(let bt=0;bt<=ot;bt++){const Et=Math.round(G+bt*ct),Rt=ht+bt*ut;for(let Tt=ft;Tt<=Et;Tt++)St[Tt]=Rt;ft=Et+1}for(let bt=ft;bt<256;bt++)St[bt]=St[ft-1];return St.join(",")},z=`g_${this.#n}_hcm_highlight_filter`,q=this.#l=this.#_(z);return this.#p(q),this.#m(F(v[0],D[0],5),F(v[1],D[1],5),F(v[2],D[2],5),q),this.#s=`url(#${z})`,this.#s}destroy(H=!1){H&&(this.#i||this.#s)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(H){const O=this.#a.createElementNS(m,"feColorMatrix");O.setAttribute("type","matrix"),O.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),H.append(O)}#_(H){const O=this.#a.createElementNS(m,"filter");return O.setAttribute("color-interpolation-filters","sRGB"),O.setAttribute("id",H),this.#d.append(O),O}#g(H,O,x){const g=this.#a.createElementNS(m,O);g.setAttribute("type","discrete"),g.setAttribute("tableValues",x),H.append(g)}#m(H,O,x,g){const T=this.#a.createElementNS(m,"feComponentTransfer");g.append(T),this.#g(T,"feFuncR",H),this.#g(T,"feFuncG",O),this.#g(T,"feFuncB",x)}#u(H){return this.#d.style.color=H,tt(getComputedStyle(this.#d).getPropertyValue("color"))}}a.DOMFilterFactory=w;class R extends s.BaseCanvasFactory{constructor({ownerDocument:H=globalThis.document}={}){super(),this._document=H}_createCanvas(H,O){const x=this._document.createElement("canvas");return x.width=H,x.height=O,x}}a.DOMCanvasFactory=R;async function h(V,H=!1){if(U(V,document.baseURI)){const O=await fetch(V);if(!O.ok)throw new Error(O.statusText);return H?new Uint8Array(await O.arrayBuffer()):(0,l.stringToBytes)(await O.text())}return new Promise((O,x)=>{const g=new XMLHttpRequest;g.open("GET",V,!0),H&&(g.responseType="arraybuffer"),g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let T;if(H&&g.response?T=new Uint8Array(g.response):!H&&g.responseText&&(T=(0,l.stringToBytes)(g.responseText)),T){O(T);return}}x(new Error(g.statusText))}},g.send(null)})}class u extends s.BaseCMapReaderFactory{_fetchData(H,O){return h(H,this.isCompressed).then(x=>({cMapData:x,compressionType:O}))}}a.DOMCMapReaderFactory=u;class d extends s.BaseStandardFontDataFactory{_fetchData(H){return h(H,!0)}}a.DOMStandardFontDataFactory=d;class A extends s.BaseSVGFactory{_createSVG(H){return document.createElementNS(m,H)}}a.DOMSVGFactory=A;class _{constructor({viewBox:H,scale:O,rotation:x,offsetX:g=0,offsetY:T=0,dontFlip:I=!1}){this.viewBox=H,this.scale=O,this.rotation=x,this.offsetX=g,this.offsetY=T;const N=(H[2]+H[0])/2,G=(H[3]+H[1])/2;let j,v,D,F;switch(x%=360,x<0&&(x+=360),x){case 180:j=-1,v=0,D=0,F=1;break;case 90:j=0,v=1,D=1,F=0;break;case 270:j=0,v=-1,D=-1,F=0;break;case 0:j=1,v=0,D=0,F=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}I&&(D=-D,F=-F);let z,q,W,Q;j===0?(z=Math.abs(G-H[1])*O+g,q=Math.abs(N-H[0])*O+T,W=(H[3]-H[1])*O,Q=(H[2]-H[0])*O):(z=Math.abs(N-H[0])*O+g,q=Math.abs(G-H[1])*O+T,W=(H[2]-H[0])*O,Q=(H[3]-H[1])*O),this.transform=[j*O,v*O,D*O,F*O,z-j*O*N-D*O*G,q-v*O*N-F*O*G],this.width=W,this.height=Q}get rawDims(){const{viewBox:H}=this;return(0,l.shadow)(this,"rawDims",{pageWidth:H[2]-H[0],pageHeight:H[3]-H[1],pageX:H[0],pageY:H[1]})}clone({scale:H=this.scale,rotation:O=this.rotation,offsetX:x=this.offsetX,offsetY:g=this.offsetY,dontFlip:T=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:H,rotation:O,offsetX:x,offsetY:g,dontFlip:T})}convertToViewportPoint(H,O){return l.Util.applyTransform([H,O],this.transform)}convertToViewportRectangle(H){const O=l.Util.applyTransform([H[0],H[1]],this.transform),x=l.Util.applyTransform([H[2],H[3]],this.transform);return[O[0],O[1],x[0],x[1]]}convertToPdfPoint(H,O){return l.Util.applyInverseTransform([H,O],this.transform)}}a.PageViewport=_;class p extends l.BaseException{constructor(H,O=0){super(H,"RenderingCancelledException"),this.extraDelay=O}}a.RenderingCancelledException=p;function b(V){const H=V.length;let O=0;for(;O<H&&V[O].trim()==="";)O++;return V.substring(O,O+5).toLowerCase()==="data:"}function E(V){return typeof V=="string"&&/\.pdf$/i.test(V)}function y(V,H=!1){return H||([V]=V.split(/[#?]/,1)),V.substring(V.lastIndexOf("/")+1)}function P(V,H="document.pdf"){if(typeof V!="string")return H;if(b(V))return(0,l.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),H;const O=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,x=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=O.exec(V);let T=x.exec(g[1])||x.exec(g[2])||x.exec(g[3]);if(T&&(T=T[0],T.includes("%")))try{T=x.exec(decodeURIComponent(T))[0]}catch{}return T||H}class B{started=Object.create(null);times=[];time(H){H in this.started&&(0,l.warn)(`Timer is already running for ${H}`),this.started[H]=Date.now()}timeEnd(H){H in this.started||(0,l.warn)(`Timer has not been started for ${H}`),this.times.push({name:H,start:this.started[H],end:Date.now()}),delete this.started[H]}toString(){const H=[];let O=0;for(const{name:x}of this.times)O=Math.max(x.length,O);for(const{name:x,start:g,end:T}of this.times)H.push(`${x.padEnd(O)} ${T-g}ms
`);return H.join("")}}a.StatTimer=B;function U(V,H){try{const{protocol:O}=H?new URL(V,H):new URL(V);return O==="http:"||O==="https:"}catch{return!1}}function C(V){V.preventDefault()}function k(V,H=!1){return new Promise((O,x)=>{const g=document.createElement("script");g.src=V,g.onload=function(T){H&&g.remove(),O(T)},g.onerror=function(){x(new Error(`Cannot load script at: ${g.src}`))},(document.head||document.documentElement).append(g)})}function $(V){console.log("Deprecated API usage: "+V)}let Y;class X{static toDateObject(H){if(!H||typeof H!="string")return null;Y||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const O=Y.exec(H);if(!O)return null;const x=parseInt(O[1],10);let g=parseInt(O[2],10);g=g>=1&&g<=12?g-1:0;let T=parseInt(O[3],10);T=T>=1&&T<=31?T:1;let I=parseInt(O[4],10);I=I>=0&&I<=23?I:0;let N=parseInt(O[5],10);N=N>=0&&N<=59?N:0;let G=parseInt(O[6],10);G=G>=0&&G<=59?G:0;const j=O[7]||"Z";let v=parseInt(O[8],10);v=v>=0&&v<=23?v:0;let D=parseInt(O[9],10)||0;return D=D>=0&&D<=59?D:0,j==="-"?(I+=v,N+=D):j==="+"&&(I-=v,N-=D),new Date(Date.UTC(x,g,T,I,N,G))}}a.PDFDateString=X;function J(V,{scale:H=1,rotation:O=0}){const{width:x,height:g}=V.attributes.style,T=[0,0,parseInt(x),parseInt(g)];return new _({viewBox:T,scale:H,rotation:O})}function tt(V){if(V.startsWith("#")){const H=parseInt(V.slice(1),16);return[(H&16711680)>>16,(H&65280)>>8,H&255]}return V.startsWith("rgb(")?V.slice(4,-1).split(",").map(H=>parseInt(H)):V.startsWith("rgba(")?V.slice(5,-1).split(",").map(H=>parseInt(H)).slice(0,3):((0,l.warn)(`Not a valid color format: "${V}"`),[0,0,0])}function _t(V){const H=document.createElement("span");H.style.visibility="hidden",document.body.append(H);for(const O of V.keys()){H.style.color=O;const x=window.getComputedStyle(H).color;V.set(O,tt(x))}H.remove()}function mt(V){const{a:H,b:O,c:x,d:g,e:T,f:I}=V.getTransform();return[H,O,x,g,T,I]}function yt(V){const{a:H,b:O,c:x,d:g,e:T,f:I}=V.getTransform().invertSelf();return[H,O,x,g,T,I]}function At(V,H,O=!1,x=!0){if(H instanceof _){const{pageWidth:g,pageHeight:T}=H.rawDims,{style:I}=V,N=l.FeatureTest.isCSSRoundSupported,G=`var(--scale-factor) * ${g}px`,j=`var(--scale-factor) * ${T}px`,v=N?`round(${G}, 1px)`:`calc(${G})`,D=N?`round(${j}, 1px)`:`calc(${j})`;!O||H.rotation%180===0?(I.width=v,I.height=D):(I.width=D,I.height=v)}x&&V.setAttribute("data-main-rotation",H.rotation)}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseFilterFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var s=r(1);class l{constructor(){this.constructor===l&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(u){return"none"}addHCMFilter(u,d){return"none"}addHighlightHCMFilter(u,d,A,_){return"none"}destroy(u=!1){}}a.BaseFilterFactory=l;class m{constructor(){this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,d){if(u<=0||d<=0)throw new Error("Invalid canvas size");const A=this._createCanvas(u,d);return{canvas:A,context:A.getContext("2d")}}reset(u,d,A){if(!u.canvas)throw new Error("Canvas is not specified");if(d<=0||A<=0)throw new Error("Invalid canvas size");u.canvas.width=d,u.canvas.height=A}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,d){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=m;class S{constructor({baseUrl:u=null,isCompressed:d=!0}){this.constructor===S&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=d}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const d=this.baseUrl+u+(this.isCompressed?".bcmap":""),A=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(d,A).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)})}_fetchData(u,d){(0,s.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=S;class w{constructor({baseUrl:u=null}){this.constructor===w&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const d=`${this.baseUrl}${u}`;return this._fetchData(d).catch(A=>{throw new Error(`Unable to load font data at: ${d}`)})}_fetchData(u){(0,s.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=w;class R{constructor(){this.constructor===R&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,d,A=!1){if(u<=0||d<=0)throw new Error("Invalid SVG dimensions");const _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),A||(_.setAttribute("width",`${u}px`),_.setAttribute("height",`${d}px`)),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox",`0 0 ${u} ${d}`),_}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,s.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=R},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var s=r(1);const l=3285377520,m=4294901760,S=65535;class w{constructor(h){this.h1=h?h&4294967295:l,this.h2=h?h&4294967295:l}update(h){let u,d;if(typeof h=="string"){u=new Uint8Array(h.length*2),d=0;for(let $=0,Y=h.length;$<Y;$++){const X=h.charCodeAt($);X<=255?u[d++]=X:(u[d++]=X>>>8,u[d++]=X&255)}}else if((0,s.isArrayBuffer)(h))u=h.slice(),d=u.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const A=d>>2,_=d-A*4,p=new Uint32Array(u.buffer,0,A);let b=0,E=0,y=this.h1,P=this.h2;const B=3432918353,U=461845907,C=B&S,k=U&S;for(let $=0;$<A;$++)$&1?(b=p[$],b=b*B&m|b*C&S,b=b<<15|b>>>17,b=b*U&m|b*k&S,y^=b,y=y<<13|y>>>19,y=y*5+3864292196):(E=p[$],E=E*B&m|E*C&S,E=E<<15|E>>>17,E=E*U&m|E*k&S,P^=E,P=P<<13|P>>>19,P=P*5+3864292196);switch(b=0,_){case 3:b^=u[A*4+2]<<16;case 2:b^=u[A*4+1]<<8;case 1:b^=u[A*4],b=b*B&m|b*C&S,b=b<<15|b>>>17,b=b*U&m|b*k&S,A&1?y^=b:P^=b}this.h1=y,this.h2=P}hexdigest(){let h=this.h1,u=this.h2;return h^=u>>>1,h=h*3981806797&m|h*36045&S,u=u*4283543511&m|((u<<16|h>>>16)*2950163797&m)>>>16,h^=u>>>1,h=h*444984403&m|h*60499&S,u=u*3301882366&m|((u<<16|h>>>16)*3120437893&m)>>>16,h^=u>>>1,(h>>>0).toString(16).padStart(8,"0")+(u>>>0).toString(16).padStart(8,"0")}}a.MurmurHash3_64=w},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var s=r(1);class l{#t=new Set;constructor({ownerDocument:w=globalThis.document,styleElement:R=null}){this._document=w,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.add(w),this._document.fonts.add(w)}removeNativeFontFace(w){this.nativeFontFaces.delete(w),this._document.fonts.delete(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const R=this.styleElement.sheet;R.insertRule(w,R.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(w){if(!(!w||this.#t.has(w.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:R,src:h,style:u}=w,d=new FontFace(R,h,u);this.addNativeFontFace(d);try{await d.load(),this.#t.add(R)}catch{(0,s.warn)(`Cannot load system font: ${w.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(w){if(w.attached||w.missingFile&&!w.systemFontInfo)return;if(w.attached=!0,w.systemFontInfo){await this.loadSystemFont(w.systemFontInfo);return}if(this.isFontLoadingAPISupported){const h=w.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(u){throw(0,s.warn)(`Failed to load font '${h.family}': '${u}'.`),w.disableFontFace=!0,u}}return}const R=w.createFontFaceRule();if(R){if(this.insertRule(R),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const u=this._queueLoadingCallback(h);this._prepareFontLoadEvent(w,u)})}}get isFontLoadingAPISupported(){const w=!!this._document?.fonts;return(0,s.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function R(){for((0,s.assert)(!u.done,"completeRequest() cannot be called twice."),u.done=!0;h.length>0&&h[0].done;){const d=h.shift();setTimeout(d.callback,0)}}const{loadingRequests:h}=this,u={done:!1,complete:R,callback:w};return h.push(u),u}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,R){function h(J,tt){return J.charCodeAt(tt)<<24|J.charCodeAt(tt+1)<<16|J.charCodeAt(tt+2)<<8|J.charCodeAt(tt+3)&255}function u(J,tt,_t,mt){const yt=J.substring(0,tt),At=J.substring(tt+_t);return yt+mt+At}let d,A;const _=this._document.createElement("canvas");_.width=1,_.height=1;const p=_.getContext("2d");let b=0;function E(J,tt){if(++b>30){(0,s.warn)("Load test font never loaded."),tt();return}if(p.font="30px "+J,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){tt();return}setTimeout(E.bind(null,J,tt))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=u(P,976,y.length,y);const U=16,C=1482184792;let k=h(P,U);for(d=0,A=y.length-3;d<A;d+=4)k=k-C+h(y,d)|0;d<y.length&&(k=k-C+h(y+"XXX",d)|0),P=u(P,U,4,(0,s.string32)(k));const $=`url(data:font/opentype;base64,${btoa(P)});`,Y=`@font-face {font-family:"${y}";src:${$}}`;this.insertRule(Y);const X=this._document.createElement("div");X.style.visibility="hidden",X.style.width=X.style.height="10px",X.style.position="absolute",X.style.top=X.style.left="0px";for(const J of[w.loadedName,y]){const tt=this._document.createElement("span");tt.textContent="Hi",tt.style.fontFamily=J,X.append(tt)}this._document.body.append(X),E(y,()=>{X.remove(),R.complete()})}}a.FontLoader=l;class m{constructor(w,{isEvalSupported:R=!0,disableFontFace:h=!1,ignoreErrors:u=!1,inspectFont:d=null}){this.compiledGlyphs=Object.create(null);for(const A in w)this[A]=w[A];this.isEvalSupported=R!==!1,this.disableFontFace=h===!0,this.ignoreErrors=u===!0,this._inspectFont=d}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const R={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(R.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,R)}return this._inspectFont?.(this),w}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const w=(0,s.bytesToString)(this.data),R=`url(data:${this.mimetype};base64,${btoa(w)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${R}}`;else{let u=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(u+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${u}src:${R}}`}return this._inspectFont?.(this,R),h}getPathGenerator(w,R){if(this.compiledGlyphs[R]!==void 0)return this.compiledGlyphs[R];let h;try{h=w.get(this.loadedName+"_path_"+R)}catch(u){if(!this.ignoreErrors)throw u;return(0,s.warn)(`getPathGenerator - ignoring character: "${u}".`),this.compiledGlyphs[R]=function(d,A){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const u=[];for(const d of h){const A=d.args!==void 0?d.args.join(","):"";u.push("c.",d.cmd,"(",A,`);
`)}return this.compiledGlyphs[R]=new Function("c","size",u.join(""))}return this.compiledGlyphs[R]=function(u,d){for(const A of h)A.cmd==="scale"&&(A.args=[d,-d]),u[A.cmd].apply(u,A.args)}}}a.FontFaceObject=m},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeFilterFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var s=r(7);r(1);const l=function(h){return new Promise((u,d)=>{require$$5.readFile(h,(_,p)=>{if(_||!p){d(new Error(_));return}u(new Uint8Array(p))})})};class m extends s.BaseFilterFactory{}a.NodeFilterFactory=m;class S extends s.BaseCanvasFactory{_createCanvas(u,d){return require$$5.createCanvas(u,d)}}a.NodeCanvasFactory=S;class w extends s.BaseCMapReaderFactory{_fetchData(u,d){return l(u).then(A=>({cMapData:A,compressionType:d}))}}a.NodeCMapReaderFactory=w;class R extends s.BaseStandardFontDataFactory{_fetchData(u){return l(u)}}a.NodeStandardFontDataFactory=R},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var s=r(1),l=r(6),m=r(12),S=r(13);const w=16,R=100,h=4096,u=15,d=10,A=1e3,_=16;function p(O,x){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){x.save(),this.__originalSave()},O.restore=function(){x.restore(),this.__originalRestore()},O.translate=function(T,I){x.translate(T,I),this.__originalTranslate(T,I)},O.scale=function(T,I){x.scale(T,I),this.__originalScale(T,I)},O.transform=function(T,I,N,G,j,v){x.transform(T,I,N,G,j,v),this.__originalTransform(T,I,N,G,j,v)},O.setTransform=function(T,I,N,G,j,v){x.setTransform(T,I,N,G,j,v),this.__originalSetTransform(T,I,N,G,j,v)},O.resetTransform=function(){x.resetTransform(),this.__originalResetTransform()},O.rotate=function(T){x.rotate(T),this.__originalRotate(T)},O.clip=function(T){x.clip(T),this.__originalClip(T)},O.moveTo=function(g,T){x.moveTo(g,T),this.__originalMoveTo(g,T)},O.lineTo=function(g,T){x.lineTo(g,T),this.__originalLineTo(g,T)},O.bezierCurveTo=function(g,T,I,N,G,j){x.bezierCurveTo(g,T,I,N,G,j),this.__originalBezierCurveTo(g,T,I,N,G,j)},O.rect=function(g,T,I,N){x.rect(g,T,I,N),this.__originalRect(g,T,I,N)},O.closePath=function(){x.closePath(),this.__originalClosePath()},O.beginPath=function(){x.beginPath(),this.__originalBeginPath()}}class b{constructor(x){this.canvasFactory=x,this.cache=Object.create(null)}getCanvas(x,g,T){let I;return this.cache[x]!==void 0?(I=this.cache[x],this.canvasFactory.reset(I,g,T)):(I=this.canvasFactory.create(g,T),this.cache[x]=I),I}delete(x){delete this.cache[x]}clear(){for(const x in this.cache){const g=this.cache[x];this.canvasFactory.destroy(g),delete this.cache[x]}}}function E(O,x,g,T,I,N,G,j,v,D){const[F,z,q,W,Q,ot]=(0,l.getCurrentTransform)(O);if(z===0&&q===0){const ht=G*F+Q,ut=Math.round(ht),ft=j*W+ot,bt=Math.round(ft),Et=(G+v)*F+Q,Rt=Math.abs(Math.round(Et)-ut)||1,Tt=(j+D)*W+ot,Dt=Math.abs(Math.round(Tt)-bt)||1;return O.setTransform(Math.sign(F),0,0,Math.sign(W),ut,bt),O.drawImage(x,g,T,I,N,0,0,Rt,Dt),O.setTransform(F,z,q,W,Q,ot),[Rt,Dt]}if(F===0&&W===0){const ht=j*q+Q,ut=Math.round(ht),ft=G*z+ot,bt=Math.round(ft),Et=(j+D)*q+Q,Rt=Math.abs(Math.round(Et)-ut)||1,Tt=(G+v)*z+ot,Dt=Math.abs(Math.round(Tt)-bt)||1;return O.setTransform(0,Math.sign(z),Math.sign(q),0,ut,bt),O.drawImage(x,g,T,I,N,0,0,Dt,Rt),O.setTransform(F,z,q,W,Q,ot),[Dt,Rt]}O.drawImage(x,g,T,I,N,G,j,v,D);const St=Math.hypot(F,z),ct=Math.hypot(q,W);return[St*v,ct*D]}function y(O){const{width:x,height:g}=O;if(x>A||g>A)return null;const T=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),N=x+1;let G=new Uint8Array(N*(g+1)),j,v,D;const F=x+7&-8;let z=new Uint8Array(F*g),q=0;for(const ct of O.data){let ht=128;for(;ht>0;)z[q++]=ct&ht?0:255,ht>>=1}let W=0;for(q=0,z[q]!==0&&(G[0]=1,++W),v=1;v<x;v++)z[q]!==z[q+1]&&(G[v]=z[q]?2:1,++W),q++;for(z[q]!==0&&(G[v]=2,++W),j=1;j<g;j++){q=j*F,D=j*N,z[q-F]!==z[q]&&(G[D]=z[q]?1:8,++W);let ct=(z[q]?4:0)+(z[q-F]?8:0);for(v=1;v<x;v++)ct=(ct>>2)+(z[q+1]?4:0)+(z[q-F+1]?8:0),I[ct]&&(G[D+v]=I[ct],++W),q++;if(z[q-F]!==z[q]&&(G[D+v]=z[q]?2:4,++W),W>T)return null}for(q=F*(g-1),D=j*N,z[q]!==0&&(G[D]=8,++W),v=1;v<x;v++)z[q]!==z[q+1]&&(G[D+v]=z[q]?4:8,++W),q++;if(z[q]!==0&&(G[D+v]=4,++W),W>T)return null;const Q=new Int32Array([0,N,-1,0,-N,0,0,0,1]),ot=new Path2D;for(j=0;W&&j<=g;j++){let ct=j*N;const ht=ct+x;for(;ct<ht&&!G[ct];)ct++;if(ct===ht)continue;ot.moveTo(ct%N,j);const ut=ct;let ft=G[ct];do{const bt=Q[ft];do ct+=bt;while(!G[ct]);const Et=G[ct];Et!==5&&Et!==10?(ft=Et,G[ct]=0):(ft=Et&51*ft>>4,G[ct]&=ft>>2|ft<<2),ot.lineTo(ct%N,ct/N|0),G[ct]||--W}while(ut!==ct);--j}return z=null,G=null,function(ct){ct.save(),ct.scale(1/x,-1/g),ct.translate(0,-g),ct.fill(ot),ct.beginPath(),ct.restore()}}class P{constructor(x,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,x,g])}clone(){const x=Object.create(this);return x.clipBox=this.clipBox.slice(),x}setCurrentPoint(x,g){this.x=x,this.y=g}updatePathMinMax(x,g,T){[g,T]=s.Util.applyTransform([g,T],x),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(x,g){const T=s.Util.applyTransform(g,x),I=s.Util.applyTransform(g.slice(2),x);this.minX=Math.min(this.minX,T[0],I[0]),this.minY=Math.min(this.minY,T[1],I[1]),this.maxX=Math.max(this.maxX,T[0],I[0]),this.maxY=Math.max(this.maxY,T[1],I[1])}updateScalingPathMinMax(x,g){s.Util.scaleMinMax(x,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(x,g,T,I,N,G,j,v,D,F){const z=s.Util.bezierBoundingBox(g,T,I,N,G,j,v,D);if(F){F[0]=Math.min(F[0],z[0],z[2]),F[1]=Math.max(F[1],z[0],z[2]),F[2]=Math.min(F[2],z[1],z[3]),F[3]=Math.max(F[3],z[1],z[3]);return}this.updateRectMinMax(x,z)}getPathBoundingBox(x=m.PathType.FILL,g=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(x===m.PathType.STROKE){g||(0,s.unreachable)("Stroke bounding box must include transform.");const I=s.Util.singularValueDecompose2dScale(g),N=I[0]*this.lineWidth/2,G=I[1]*this.lineWidth/2;T[0]-=N,T[1]-=G,T[2]+=N,T[3]+=G}return T}updateClipFromPath(){const x=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(x||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(x){this.clipBox=x,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(x=m.PathType.FILL,g=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(x,g))}}function B(O,x){if(typeof ImageData<"u"&&x instanceof ImageData){O.putImageData(x,0,0);return}const g=x.height,T=x.width,I=g%_,N=(g-I)/_,G=I===0?N:N+1,j=O.createImageData(T,_);let v=0,D;const F=x.data,z=j.data;let q,W,Q,ot;if(x.kind===s.ImageKind.GRAYSCALE_1BPP){const St=F.byteLength,ct=new Uint32Array(z.buffer,0,z.byteLength>>2),ht=ct.length,ut=T+7>>3,ft=4294967295,bt=s.FeatureTest.isLittleEndian?4278190080:255;for(q=0;q<G;q++){for(Q=q<N?_:I,D=0,W=0;W<Q;W++){const Et=St-v;let Rt=0;const Tt=Et>ut?T:Et*8-7,Dt=Tt&-8;let Ft=0,zt=0;for(;Rt<Dt;Rt+=8)zt=F[v++],ct[D++]=zt&128?ft:bt,ct[D++]=zt&64?ft:bt,ct[D++]=zt&32?ft:bt,ct[D++]=zt&16?ft:bt,ct[D++]=zt&8?ft:bt,ct[D++]=zt&4?ft:bt,ct[D++]=zt&2?ft:bt,ct[D++]=zt&1?ft:bt;for(;Rt<Tt;Rt++)Ft===0&&(zt=F[v++],Ft=128),ct[D++]=zt&Ft?ft:bt,Ft>>=1}for(;D<ht;)ct[D++]=0;O.putImageData(j,0,q*_)}}else if(x.kind===s.ImageKind.RGBA_32BPP){for(W=0,ot=T*_*4,q=0;q<N;q++)z.set(F.subarray(v,v+ot)),v+=ot,O.putImageData(j,0,W),W+=_;q<G&&(ot=T*I*4,z.set(F.subarray(v,v+ot)),O.putImageData(j,0,W))}else if(x.kind===s.ImageKind.RGB_24BPP)for(Q=_,ot=T*Q,q=0;q<G;q++){for(q>=N&&(Q=I,ot=T*Q),D=0,W=ot;W--;)z[D++]=F[v++],z[D++]=F[v++],z[D++]=F[v++],z[D++]=255;O.putImageData(j,0,q*_)}else throw new Error(`bad image kind: ${x.kind}`)}function U(O,x){if(x.bitmap){O.drawImage(x.bitmap,0,0);return}const g=x.height,T=x.width,I=g%_,N=(g-I)/_,G=I===0?N:N+1,j=O.createImageData(T,_);let v=0;const D=x.data,F=j.data;for(let z=0;z<G;z++){const q=z<N?_:I;({srcPos:v}=(0,S.convertBlackAndWhiteToRGBA)({src:D,srcPos:v,dest:F,width:T,height:q,nonBlackColor:0})),O.putImageData(j,0,z*_)}}function C(O,x){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const T of g)O[T]!==void 0&&(x[T]=O[T]);O.setLineDash!==void 0&&(x.setLineDash(O.getLineDash()),x.lineDashOffset=O.lineDashOffset)}function k(O){if(O.strokeStyle=O.fillStyle="#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0),!s.isNodeJS){const{filter:x}=O;x!=="none"&&x!==""&&(O.filter="none")}}function $(O,x,g,T){const I=O.length;for(let N=3;N<I;N+=4){const G=O[N];if(G===0)O[N-3]=x,O[N-2]=g,O[N-1]=T;else if(G<255){const j=255-G;O[N-3]=O[N-3]*G+x*j>>8,O[N-2]=O[N-2]*G+g*j>>8,O[N-1]=O[N-1]*G+T*j>>8}}}function Y(O,x,g){const T=O.length,I=1/255;for(let N=3;N<T;N+=4){const G=g?g[O[N]]:O[N];x[N]=x[N]*G*I|0}}function X(O,x,g){const T=O.length;for(let I=3;I<T;I+=4){const N=O[I-3]*77+O[I-2]*152+O[I-1]*28;x[I]=g?x[I]*g[N>>8]>>8:x[I]*N>>16}}function J(O,x,g,T,I,N,G,j,v,D,F){const z=!!N,q=z?N[0]:0,W=z?N[1]:0,Q=z?N[2]:0,ot=I==="Luminosity"?X:Y,ct=Math.min(T,Math.ceil(1048576/g));for(let ht=0;ht<T;ht+=ct){const ut=Math.min(ct,T-ht),ft=O.getImageData(j-D,ht+(v-F),g,ut),bt=x.getImageData(j,ht+v,g,ut);z&&$(ft.data,q,W,Q),ot(ft.data,bt.data,G),x.putImageData(bt,j,ht+v)}}function tt(O,x,g,T){const I=T[0],N=T[1],G=T[2]-I,j=T[3]-N;G===0||j===0||(J(x.context,g,G,j,x.subtype,x.backdrop,x.transferMap,I,N,x.offsetX,x.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(g.canvas,0,0),O.restore())}function _t(O,x){const g=s.Util.singularValueDecompose2dScale(O);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*l.PixelsPerInch.PDF_TO_CSS_UNITS);return x!==void 0?x:g[0]<=T||g[1]<=T}const mt=["butt","round","square"],yt=["miter","round","bevel"],At={},V={};class H{constructor(x,g,T,I,N,{optionalContentConfig:G,markedContentStack:j=null},v,D){this.ctx=x,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=T,this.canvasFactory=I,this.filterFactory=N,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=j||[],this.optionalContentConfig=G,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=v,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(x,g=null){return typeof x=="string"?x.startsWith("g_")?this.commonObjs.get(x):this.objs.get(x):g}beginDrawing({transform:x,viewport:g,transparency:T=!1,background:I=null}){const N=this.ctx.canvas.width,G=this.ctx.canvas.height,j=this.ctx.fillStyle;if(this.ctx.fillStyle=I||"#ffffff",this.ctx.fillRect(0,0,N,G),this.ctx.fillStyle=j,T){const v=this.cachedCanvases.getCanvas("transparent",N,G);this.compositeCtx=this.ctx,this.transparentCanvas=v.canvas,this.ctx=v.context,this.ctx.save(),this.ctx.transform(...(0,l.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),k(this.ctx),x&&(this.ctx.transform(...x),this.outputScaleX=x[0],this.outputScaleY=x[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,l.getCurrentTransform)(this.ctx)}executeOperatorList(x,g,T,I){const N=x.argsArray,G=x.fnArray;let j=g||0;const v=N.length;if(v===j)return j;const D=v-j>d&&typeof T=="function",F=D?Date.now()+u:0;let z=0;const q=this.commonObjs,W=this.objs;let Q;for(;;){if(I!==void 0&&j===I.nextBreakPoint)return I.breakIt(j,T),j;if(Q=G[j],Q!==s.OPS.dependency)this[Q].apply(this,N[j]);else for(const ot of N[j]){const St=ot.startsWith("g_")?q:W;if(!St.has(ot))return St.get(ot,T),j}if(j++,j===v)return j;if(D&&++z>d){if(Date.now()>F)return T(),j;z=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const x of this._cachedBitmapsMap.values()){for(const g of x.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);x.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const x=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(x!=="none"){const g=this.ctx.filter;this.ctx.filter=x,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}}_scaleImage(x,g){const T=x.width,I=x.height;let N=Math.max(Math.hypot(g[0],g[1]),1),G=Math.max(Math.hypot(g[2],g[3]),1),j=T,v=I,D="prescale1",F,z;for(;N>2&&j>1||G>2&&v>1;){let q=j,W=v;N>2&&j>1&&(q=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j/2),N/=j/q),G>2&&v>1&&(W=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v)/2,G/=v/W),F=this.cachedCanvases.getCanvas(D,q,W),z=F.context,z.clearRect(0,0,q,W),z.drawImage(x,0,0,j,v,0,0,q,W),x=F.canvas,j=q,v=W,D=D==="prescale1"?"prescale2":"prescale1"}return{img:x,paintWidth:j,paintHeight:v}}_createMaskCanvas(x){const g=this.ctx,{width:T,height:I}=x,N=this.current.fillColor,G=this.current.patternFill,j=(0,l.getCurrentTransform)(g);let v,D,F,z;if((x.bitmap||x.data)&&x.count>1){const Rt=x.bitmap||x.data.buffer;D=JSON.stringify(G?j:[j.slice(0,4),N]),v=this._cachedBitmapsMap.get(Rt),v||(v=new Map,this._cachedBitmapsMap.set(Rt,v));const Tt=v.get(D);if(Tt&&!G){const Dt=Math.round(Math.min(j[0],j[2])+j[4]),Ft=Math.round(Math.min(j[1],j[3])+j[5]);return{canvas:Tt,offsetX:Dt,offsetY:Ft}}F=Tt}F||(z=this.cachedCanvases.getCanvas("maskCanvas",T,I),U(z.context,x));let q=s.Util.transform(j,[1/T,0,0,-1/I,0,0]);q=s.Util.transform(q,[1,0,0,1,0,-I]);const W=s.Util.applyTransform([0,0],q),Q=s.Util.applyTransform([T,I],q),ot=s.Util.normalizeRect([W[0],W[1],Q[0],Q[1]]),St=Math.round(ot[2]-ot[0])||1,ct=Math.round(ot[3]-ot[1])||1,ht=this.cachedCanvases.getCanvas("fillCanvas",St,ct),ut=ht.context,ft=Math.min(W[0],Q[0]),bt=Math.min(W[1],Q[1]);ut.translate(-ft,-bt),ut.transform(...q),F||(F=this._scaleImage(z.canvas,(0,l.getCurrentTransformInverse)(ut)),F=F.img,v&&G&&v.set(D,F)),ut.imageSmoothingEnabled=_t((0,l.getCurrentTransform)(ut),x.interpolate),E(ut,F,0,0,F.width,F.height,0,0,T,I),ut.globalCompositeOperation="source-in";const Et=s.Util.transform((0,l.getCurrentTransformInverse)(ut),[1,0,0,1,-ft,-bt]);return ut.fillStyle=G?N.getPattern(g,this,Et,m.PathType.FILL):N,ut.fillRect(0,0,T,I),v&&!G&&(this.cachedCanvases.delete("fillCanvas"),v.set(D,ht.canvas)),{canvas:ht.canvas,offsetX:Math.round(ft),offsetY:Math.round(bt)}}setLineWidth(x){x!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=x,this.ctx.lineWidth=x}setLineCap(x){this.ctx.lineCap=mt[x]}setLineJoin(x){this.ctx.lineJoin=yt[x]}setMiterLimit(x){this.ctx.miterLimit=x}setDash(x,g){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(x),T.lineDashOffset=g)}setRenderingIntent(x){}setFlatness(x){}setGState(x){for(const[g,T]of x)switch(g){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const x=this.inSMaskMode;this.current.activeSMask&&!x?this.beginSMaskMode():!this.current.activeSMask&&x&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const x=this.ctx.canvas.width,g=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(T,x,g);this.suspendedCtx=this.ctx,this.ctx=I.context;const N=this.ctx;N.setTransform(...(0,l.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,N),p(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(x){if(!this.current.activeSMask)return;x?(x[0]=Math.floor(x[0]),x[1]=Math.floor(x[1]),x[2]=Math.ceil(x[2]),x[3]=Math.ceil(x[3])):x=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,T=this.suspendedCtx;tt(T,g,this.ctx,x),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const x=this.current;this.stateStack.push(x),this.current=x.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(x,g,T,I,N,G){this.ctx.transform(x,g,T,I,N,G),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(x,g,T){const I=this.ctx,N=this.current;let G=N.x,j=N.y,v,D;const F=(0,l.getCurrentTransform)(I),z=F[0]===0&&F[3]===0||F[1]===0&&F[2]===0,q=z?T.slice(0):null;for(let W=0,Q=0,ot=x.length;W<ot;W++)switch(x[W]|0){case s.OPS.rectangle:G=g[Q++],j=g[Q++];const St=g[Q++],ct=g[Q++],ht=G+St,ut=j+ct;I.moveTo(G,j),St===0||ct===0?I.lineTo(ht,ut):(I.lineTo(ht,j),I.lineTo(ht,ut),I.lineTo(G,ut)),z||N.updateRectMinMax(F,[G,j,ht,ut]),I.closePath();break;case s.OPS.moveTo:G=g[Q++],j=g[Q++],I.moveTo(G,j),z||N.updatePathMinMax(F,G,j);break;case s.OPS.lineTo:G=g[Q++],j=g[Q++],I.lineTo(G,j),z||N.updatePathMinMax(F,G,j);break;case s.OPS.curveTo:v=G,D=j,G=g[Q+4],j=g[Q+5],I.bezierCurveTo(g[Q],g[Q+1],g[Q+2],g[Q+3],G,j),N.updateCurvePathMinMax(F,v,D,g[Q],g[Q+1],g[Q+2],g[Q+3],G,j,q),Q+=6;break;case s.OPS.curveTo2:v=G,D=j,I.bezierCurveTo(G,j,g[Q],g[Q+1],g[Q+2],g[Q+3]),N.updateCurvePathMinMax(F,v,D,G,j,g[Q],g[Q+1],g[Q+2],g[Q+3],q),G=g[Q+2],j=g[Q+3],Q+=4;break;case s.OPS.curveTo3:v=G,D=j,G=g[Q+2],j=g[Q+3],I.bezierCurveTo(g[Q],g[Q+1],G,j,G,j),N.updateCurvePathMinMax(F,v,D,g[Q],g[Q+1],G,j,G,j,q),Q+=4;break;case s.OPS.closePath:I.closePath();break}z&&N.updateScalingPathMinMax(F,q),N.setCurrentPoint(G,j)}closePath(){this.ctx.closePath()}stroke(x=!0){const g=this.ctx,T=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&T?.getPattern?(g.save(),g.strokeStyle=T.getPattern(g,this,(0,l.getCurrentTransformInverse)(g),m.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),x&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(x=!0){const g=this.ctx,T=this.current.fillColor,I=this.current.patternFill;let N=!1;I&&(g.save(),g.fillStyle=T.getPattern(g,this,(0,l.getCurrentTransformInverse)(g),m.PathType.FILL),N=!0);const G=this.current.getClippedPathBoundingBox();this.contentVisible&&G!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),N&&g.restore(),x&&this.consumePath(G)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=At}eoClip(){this.pendingClip=V}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const x=this.pendingTextPaths,g=this.ctx;if(x===void 0){g.beginPath();return}g.save(),g.beginPath();for(const T of x)g.setTransform(...T.transform),g.translate(T.x,T.y),T.addToPath(g,T.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(x){this.current.charSpacing=x}setWordSpacing(x){this.current.wordSpacing=x}setHScale(x){this.current.textHScale=x/100}setLeading(x){this.current.leading=-x}setFont(x,g){const T=this.commonObjs.get(x),I=this.current;if(!T)throw new Error(`Can't find font for ${x}`);if(I.fontMatrix=T.fontMatrix||s.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+x),g<0?(g=-g,I.fontDirection=-1):I.fontDirection=1,this.current.font=T,this.current.fontSize=g,T.isType3Font)return;const N=T.loadedName||"sans-serif",G=T.systemFontInfo?.css||`"${N}", ${T.fallbackName}`;let j="normal";T.black?j="900":T.bold&&(j="bold");const v=T.italic?"italic":"normal";let D=g;g<w?D=w:g>R&&(D=R),this.current.fontSizeScale=g/D,this.ctx.font=`${v} ${j} ${D}px ${G}`}setTextRenderingMode(x){this.current.textRenderingMode=x}setTextRise(x){this.current.textRise=x}moveText(x,g){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=g}setLeadingMoveText(x,g){this.setLeading(-g),this.moveText(x,g)}setTextMatrix(x,g,T,I,N,G){this.current.textMatrix=[x,g,T,I,N,G],this.current.textMatrixScale=Math.hypot(x,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(x,g,T,I){const N=this.ctx,G=this.current,j=G.font,v=G.textRenderingMode,D=G.fontSize/G.fontSizeScale,F=v&s.TextRenderingMode.FILL_STROKE_MASK,z=!!(v&s.TextRenderingMode.ADD_TO_PATH_FLAG),q=G.patternFill&&!j.missingFile;let W;(j.disableFontFace||z||q)&&(W=j.getPathGenerator(this.commonObjs,x)),j.disableFontFace||q?(N.save(),N.translate(g,T),N.beginPath(),W(N,D),I&&N.setTransform(...I),(F===s.TextRenderingMode.FILL||F===s.TextRenderingMode.FILL_STROKE)&&N.fill(),(F===s.TextRenderingMode.STROKE||F===s.TextRenderingMode.FILL_STROKE)&&N.stroke(),N.restore()):((F===s.TextRenderingMode.FILL||F===s.TextRenderingMode.FILL_STROKE)&&N.fillText(x,g,T),(F===s.TextRenderingMode.STROKE||F===s.TextRenderingMode.FILL_STROKE)&&N.strokeText(x,g,T)),z&&(this.pendingTextPaths||=[]).push({transform:(0,l.getCurrentTransform)(N),x:g,y:T,fontSize:D,addToPath:W})}get isFontSubpixelAAEnabled(){const{context:x}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);x.scale(1.5,1),x.fillText("I",0,10);const g=x.getImageData(0,0,10,10).data;let T=!1;for(let I=3;I<g.length;I+=4)if(g[I]>0&&g[I]<255){T=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(x){const g=this.current,T=g.font;if(T.isType3Font)return this.showType3Text(x);const I=g.fontSize;if(I===0)return;const N=this.ctx,G=g.fontSizeScale,j=g.charSpacing,v=g.wordSpacing,D=g.fontDirection,F=g.textHScale*D,z=x.length,q=T.vertical,W=q?1:-1,Q=T.defaultVMetrics,ot=I*g.fontMatrix[0],St=g.textRenderingMode===s.TextRenderingMode.FILL&&!T.disableFontFace&&!g.patternFill;N.save(),N.transform(...g.textMatrix),N.translate(g.x,g.y+g.textRise),D>0?N.scale(F,-1):N.scale(F,1);let ct;if(g.patternFill){N.save();const Et=g.fillColor.getPattern(N,this,(0,l.getCurrentTransformInverse)(N),m.PathType.FILL);ct=(0,l.getCurrentTransform)(N),N.restore(),N.fillStyle=Et}let ht=g.lineWidth;const ut=g.textMatrixScale;if(ut===0||ht===0){const Et=g.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Et===s.TextRenderingMode.STROKE||Et===s.TextRenderingMode.FILL_STROKE)&&(ht=this.getSinglePixelWidth())}else ht/=ut;if(G!==1&&(N.scale(G,G),ht/=G),N.lineWidth=ht,T.isInvalidPDFjsFont){const Et=[];let Rt=0;for(const Tt of x)Et.push(Tt.unicode),Rt+=Tt.width;N.fillText(Et.join(""),0,0),g.x+=Rt*ot*F,N.restore(),this.compose();return}let ft=0,bt;for(bt=0;bt<z;++bt){const Et=x[bt];if(typeof Et=="number"){ft+=W*Et*I/1e3;continue}let Rt=!1;const Tt=(Et.isSpace?v:0)+j,Dt=Et.fontChar,Ft=Et.accent;let zt,ue,Gt=Et.width;if(q){const qt=Et.vmetric||Q,Ke=-(Et.vmetric?qt[1]:Gt*.5)*ot,Za=qt[2]*ot;Gt=qt?-qt[0]:Gt,zt=Ke/G,ue=(ft+Za)/G}else zt=ft/G,ue=0;if(T.remeasure&&Gt>0){const qt=N.measureText(Dt).width*1e3/I*G;if(Gt<qt&&this.isFontSubpixelAAEnabled){const Ke=Gt/qt;Rt=!0,N.save(),N.scale(Ke,1),zt/=Ke}else Gt!==qt&&(zt+=(Gt-qt)/2e3*I/G)}if(this.contentVisible&&(Et.isInFont||T.missingFile)){if(St&&!Ft)N.fillText(Dt,zt,ue);else if(this.paintChar(Dt,zt,ue,ct),Ft){const qt=zt+I*Ft.offset.x/G,Ke=ue-I*Ft.offset.y/G;this.paintChar(Ft.fontChar,qt,Ke,ct)}}const xe=q?Gt*ot-Tt*D:Gt*ot+Tt*D;ft+=xe,Rt&&N.restore()}q?g.y-=ft:g.x+=ft*F,N.restore(),this.compose()}showType3Text(x){const g=this.ctx,T=this.current,I=T.font,N=T.fontSize,G=T.fontDirection,j=I.vertical?1:-1,v=T.charSpacing,D=T.wordSpacing,F=T.textHScale*G,z=T.fontMatrix||s.FONT_IDENTITY_MATRIX,q=x.length,W=T.textRenderingMode===s.TextRenderingMode.INVISIBLE;let Q,ot,St,ct;if(!(W||N===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...T.textMatrix),g.translate(T.x,T.y),g.scale(F,G),Q=0;Q<q;++Q){if(ot=x[Q],typeof ot=="number"){ct=j*ot*N/1e3,this.ctx.translate(ct,0),T.x+=ct*F;continue}const ht=(ot.isSpace?D:0)+v,ut=I.charProcOperatorList[ot.operatorListId];if(!ut){(0,s.warn)(`Type3 character "${ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ot,this.save(),g.scale(N,N),g.transform(...z),this.executeOperatorList(ut),this.restore()),St=s.Util.applyTransform([ot.width,0],z)[0]*N+ht,g.translate(St,0),T.x+=St*F}g.restore(),this.processingType3=null}}setCharWidth(x,g){}setCharWidthAndBounds(x,g,T,I,N,G){this.ctx.rect(T,I,N-T,G-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(x){let g;if(x[0]==="TilingPattern"){const T=x[1],I=this.baseTransform||(0,l.getCurrentTransform)(this.ctx),N={createCanvasGraphics:G=>new H(G,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new m.TilingPattern(x,T,this.ctx,N,I)}else g=this._getPattern(x[1],x[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(x,g,T){const I=s.Util.makeHexColor(x,g,T);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(x,g,T){const I=s.Util.makeHexColor(x,g,T);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(x,g=null){let T;return this.cachedPatterns.has(x)?T=this.cachedPatterns.get(x):(T=(0,m.getShadingPattern)(this.getObject(x)),this.cachedPatterns.set(x,T)),g&&(T.matrix=g),T}shadingFill(x){if(!this.contentVisible)return;const g=this.ctx;this.save();const T=this._getPattern(x);g.fillStyle=T.getPattern(g,this,(0,l.getCurrentTransformInverse)(g),m.PathType.SHADING);const I=(0,l.getCurrentTransformInverse)(g);if(I){const{width:N,height:G}=g.canvas,[j,v,D,F]=s.Util.getAxialAlignedBoundingBox([0,0,N,G],I);this.ctx.fillRect(j,v,D-j,F-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(x,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(x)&&x.length===6&&this.transform(...x),this.baseTransform=(0,l.getCurrentTransform)(this.ctx),g)){const T=g[2]-g[0],I=g[3]-g[1];this.ctx.rect(g[0],g[1],T,I),this.current.updateRectMinMax((0,l.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(x){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;x.isolated||(0,s.info)("TODO: Support non-isolated groups."),x.knockout&&(0,s.warn)("Knockout groups not supported.");const T=(0,l.getCurrentTransform)(g);if(x.matrix&&g.transform(...x.matrix),!x.bbox)throw new Error("Bounding box is required.");let I=s.Util.getAxialAlignedBoundingBox(x.bbox,(0,l.getCurrentTransform)(g));const N=[0,0,g.canvas.width,g.canvas.height];I=s.Util.intersect(I,N)||[0,0,0,0];const G=Math.floor(I[0]),j=Math.floor(I[1]);let v=Math.max(Math.ceil(I[2])-G,1),D=Math.max(Math.ceil(I[3])-j,1),F=1,z=1;v>h&&(F=v/h,v=h),D>h&&(z=D/h,D=h),this.current.startNewPathAndClipBox([0,0,v,D]);let q="groupAt"+this.groupLevel;x.smask&&(q+="_smask_"+this.smaskCounter++%2);const W=this.cachedCanvases.getCanvas(q,v,D),Q=W.context;Q.scale(1/F,1/z),Q.translate(-G,-j),Q.transform(...T),x.smask?this.smaskStack.push({canvas:W.canvas,context:Q,offsetX:G,offsetY:j,scaleX:F,scaleY:z,subtype:x.smask.subtype,backdrop:x.smask.backdrop,transferMap:x.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(G,j),g.scale(F,z),g.save()),C(g,Q),this.ctx=Q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(x){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,x.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,l.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const N=s.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],I);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(x,g,T,I,N){if(this.#t(),k(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const G=g[2]-g[0],j=g[3]-g[1];if(N&&this.annotationCanvasMap){T=T.slice(),T[4]-=g[0],T[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=G,g[3]=j;const[v,D]=s.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(this.ctx)),{viewportScale:F}=this,z=Math.ceil(G*this.outputScaleX*F),q=Math.ceil(j*this.outputScaleY*F);this.annotationCanvas=this.canvasFactory.create(z,q);const{canvas:W,context:Q}=this.annotationCanvas;this.annotationCanvasMap.set(x,W),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Q,this.ctx.save(),this.ctx.setTransform(v,0,0,-D,0,j*D),k(this.ctx)}else k(this.ctx),this.ctx.rect(g[0],g[1],G,j),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(x){if(!this.contentVisible)return;const g=x.count;x=this.getObject(x.data,x),x.count=g;const T=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=y(x)),I.compiled)){I.compiled(T);return}const N=this._createMaskCanvas(x),G=N.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(G,N.offsetX,N.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(x,g,T=0,I=0,N,G){if(!this.contentVisible)return;x=this.getObject(x.data,x);const j=this.ctx;j.save();const v=(0,l.getCurrentTransform)(j);j.transform(g,T,I,N,0,0);const D=this._createMaskCanvas(x);j.setTransform(1,0,0,1,D.offsetX-v[4],D.offsetY-v[5]);for(let F=0,z=G.length;F<z;F+=2){const q=s.Util.transform(v,[g,T,I,N,G[F],G[F+1]]),[W,Q]=s.Util.applyTransform([0,0],q);j.drawImage(D.canvas,W,Q)}j.restore(),this.compose()}paintImageMaskXObjectGroup(x){if(!this.contentVisible)return;const g=this.ctx,T=this.current.fillColor,I=this.current.patternFill;for(const N of x){const{data:G,width:j,height:v,transform:D}=N,F=this.cachedCanvases.getCanvas("maskCanvas",j,v),z=F.context;z.save();const q=this.getObject(G,N);U(z,q),z.globalCompositeOperation="source-in",z.fillStyle=I?T.getPattern(z,this,(0,l.getCurrentTransformInverse)(g),m.PathType.FILL):T,z.fillRect(0,0,j,v),z.restore(),g.save(),g.transform(...D),g.scale(1,-1),E(g,F.canvas,0,0,j,v,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(x){if(!this.contentVisible)return;const g=this.getObject(x);if(!g){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(x,g,T,I){if(!this.contentVisible)return;const N=this.getObject(x);if(!N){(0,s.warn)("Dependent image isn't ready yet");return}const G=N.width,j=N.height,v=[];for(let D=0,F=I.length;D<F;D+=2)v.push({transform:[g,0,0,T,I[D],I[D+1]],x:0,y:0,w:G,h:j});this.paintInlineImageXObjectGroup(N,v)}applyTransferMapsToCanvas(x){return this.current.transferMaps!=="none"&&(x.filter=this.current.transferMaps,x.drawImage(x.canvas,0,0),x.filter="none"),x.canvas}applyTransferMapsToBitmap(x){if(this.current.transferMaps==="none")return x.bitmap;const{bitmap:g,width:T,height:I}=x,N=this.cachedCanvases.getCanvas("inlineImage",T,I),G=N.context;return G.filter=this.current.transferMaps,G.drawImage(g,0,0),G.filter="none",N.canvas}paintInlineImageXObject(x){if(!this.contentVisible)return;const g=x.width,T=x.height,I=this.ctx;if(this.save(),!s.isNodeJS){const{filter:j}=I;j!=="none"&&j!==""&&(I.filter="none")}I.scale(1/g,-1/T);let N;if(x.bitmap)N=this.applyTransferMapsToBitmap(x);else if(typeof HTMLElement=="function"&&x instanceof HTMLElement||!x.data)N=x;else{const v=this.cachedCanvases.getCanvas("inlineImage",g,T).context;B(v,x),N=this.applyTransferMapsToCanvas(v)}const G=this._scaleImage(N,(0,l.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=_t((0,l.getCurrentTransform)(I),x.interpolate),E(I,G.img,0,0,G.paintWidth,G.paintHeight,0,-T,g,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(x,g){if(!this.contentVisible)return;const T=this.ctx;let I;if(x.bitmap)I=x.bitmap;else{const N=x.width,G=x.height,v=this.cachedCanvases.getCanvas("inlineImage",N,G).context;B(v,x),I=this.applyTransferMapsToCanvas(v)}for(const N of g)T.save(),T.transform(...N.transform),T.scale(1,-1),E(T,I,N.x,N.y,N.w,N.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(x){}markPointProps(x,g){}beginMarkedContent(x){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(x,g){x==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(x){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(x);const T=this.ctx;this.pendingClip&&(g||(this.pendingClip===V?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const x=(0,l.getCurrentTransform)(this.ctx);if(x[1]===0&&x[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(x[0]),Math.abs(x[3]));else{const g=Math.abs(x[0]*x[3]-x[2]*x[1]),T=Math.hypot(x[0],x[2]),I=Math.hypot(x[1],x[3]);this._cachedGetSinglePixelWidth=Math.max(T,I)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:x}=this.current,{a:g,b:T,c:I,d:N}=this.ctx.getTransform();let G,j;if(T===0&&I===0){const v=Math.abs(g),D=Math.abs(N);if(v===D)if(x===0)G=j=1/v;else{const F=v*x;G=j=F<1?1/F:1}else if(x===0)G=1/v,j=1/D;else{const F=v*x,z=D*x;G=F<1?1/F:1,j=z<1?1/z:1}}else{const v=Math.abs(g*N-T*I),D=Math.hypot(g,T),F=Math.hypot(I,N);if(x===0)G=F/v,j=D/v;else{const z=x*v;G=F>z?F/z:1,j=D>z?D/z:1}}this._cachedScaleForStroking[0]=G,this._cachedScaleForStroking[1]=j}return this._cachedScaleForStroking}rescaleAndStroke(x){const{ctx:g}=this,{lineWidth:T}=this.current,[I,N]=this.getScaleForStroking();if(g.lineWidth=T||1,I===1&&N===1){g.stroke();return}const G=g.getLineDash();if(x&&g.save(),g.scale(I,N),G.length>0){const j=Math.max(I,N);g.setLineDash(G.map(v=>v/j)),g.lineDashOffset/=j}g.stroke(),x&&g.restore()}isContentVisible(){for(let x=this.markedContentStack.length-1;x>=0;x--)if(!this.markedContentStack[x].visible)return!1;return!0}}a.CanvasGraphics=H;for(const O in s.OPS)H.prototype[O]!==void 0&&(H.prototype[s.OPS[O]]=H.prototype[O])},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=_;var s=r(1),l=r(6);const m={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=m;function S(E,y){if(!y)return;const P=y[2]-y[0],B=y[3]-y[1],U=new Path2D;U.rect(y[0],y[1],P,B),E.clip(U)}class w{constructor(){this.constructor===w&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class R extends w{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let P;this._type==="axial"?P=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const B of this._colorStops)P.addColorStop(B[0],B[1]);return P}getPattern(y,P,B,U){let C;if(U===m.STROKE||U===m.FILL){const k=P.current.getClippedPathBoundingBox(U,(0,l.getCurrentTransform)(y))||[0,0,0,0],$=Math.ceil(k[2]-k[0])||1,Y=Math.ceil(k[3]-k[1])||1,X=P.cachedCanvases.getCanvas("pattern",$,Y,!0),J=X.context;J.clearRect(0,0,J.canvas.width,J.canvas.height),J.beginPath(),J.rect(0,0,J.canvas.width,J.canvas.height),J.translate(-k[0],-k[1]),B=s.Util.transform(B,[1,0,0,1,k[0],k[1]]),J.transform(...P.baseTransform),this.matrix&&J.transform(...this.matrix),S(J,this._bbox),J.fillStyle=this._createGradient(J),J.fill(),C=y.createPattern(X.canvas,"no-repeat");const tt=new DOMMatrix(B);C.setTransform(tt)}else S(y,this._bbox),C=this._createGradient(y);return C}}function h(E,y,P,B,U,C,k,$){const Y=y.coords,X=y.colors,J=E.data,tt=E.width*4;let _t;Y[P+1]>Y[B+1]&&(_t=P,P=B,B=_t,_t=C,C=k,k=_t),Y[B+1]>Y[U+1]&&(_t=B,B=U,U=_t,_t=k,k=$,$=_t),Y[P+1]>Y[B+1]&&(_t=P,P=B,B=_t,_t=C,C=k,k=_t);const mt=(Y[P]+y.offsetX)*y.scaleX,yt=(Y[P+1]+y.offsetY)*y.scaleY,At=(Y[B]+y.offsetX)*y.scaleX,V=(Y[B+1]+y.offsetY)*y.scaleY,H=(Y[U]+y.offsetX)*y.scaleX,O=(Y[U+1]+y.offsetY)*y.scaleY;if(yt>=O)return;const x=X[C],g=X[C+1],T=X[C+2],I=X[k],N=X[k+1],G=X[k+2],j=X[$],v=X[$+1],D=X[$+2],F=Math.round(yt),z=Math.round(O);let q,W,Q,ot,St,ct,ht,ut;for(let ft=F;ft<=z;ft++){if(ft<V){const Dt=ft<yt?0:(yt-ft)/(yt-V);q=mt-(mt-At)*Dt,W=x-(x-I)*Dt,Q=g-(g-N)*Dt,ot=T-(T-G)*Dt}else{let Dt;ft>O?Dt=1:V===O?Dt=0:Dt=(V-ft)/(V-O),q=At-(At-H)*Dt,W=I-(I-j)*Dt,Q=N-(N-v)*Dt,ot=G-(G-D)*Dt}let bt;ft<yt?bt=0:ft>O?bt=1:bt=(yt-ft)/(yt-O),St=mt-(mt-H)*bt,ct=x-(x-j)*bt,ht=g-(g-v)*bt,ut=T-(T-D)*bt;const Et=Math.round(Math.min(q,St)),Rt=Math.round(Math.max(q,St));let Tt=tt*ft+Et*4;for(let Dt=Et;Dt<=Rt;Dt++)bt=(q-Dt)/(q-St),bt<0?bt=0:bt>1&&(bt=1),J[Tt++]=W-(W-ct)*bt|0,J[Tt++]=Q-(Q-ht)*bt|0,J[Tt++]=ot-(ot-ut)*bt|0,J[Tt++]=255}}function u(E,y,P){const B=y.coords,U=y.colors;let C,k;switch(y.type){case"lattice":const $=y.verticesPerRow,Y=Math.floor(B.length/$)-1,X=$-1;for(C=0;C<Y;C++){let J=C*$;for(let tt=0;tt<X;tt++,J++)h(E,P,B[J],B[J+1],B[J+$],U[J],U[J+1],U[J+$]),h(E,P,B[J+$+1],B[J+1],B[J+$],U[J+$+1],U[J+1],U[J+$])}break;case"triangles":for(C=0,k=B.length;C<k;C+=3)h(E,P,B[C],B[C+1],B[C+2],U[C],U[C+1],U[C+2]);break;default:throw new Error("illegal figure")}}class d extends w{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,P,B){const $=Math.floor(this._bounds[0]),Y=Math.floor(this._bounds[1]),X=Math.ceil(this._bounds[2])-$,J=Math.ceil(this._bounds[3])-Y,tt=Math.min(Math.ceil(Math.abs(X*y[0]*1.1)),3e3),_t=Math.min(Math.ceil(Math.abs(J*y[1]*1.1)),3e3),mt=X/tt,yt=J/_t,At={coords:this._coords,colors:this._colors,offsetX:-$,offsetY:-Y,scaleX:1/mt,scaleY:1/yt},V=tt+4,H=_t+4,O=B.getCanvas("mesh",V,H,!1),x=O.context,g=x.createImageData(tt,_t);if(P){const I=g.data;for(let N=0,G=I.length;N<G;N+=4)I[N]=P[0],I[N+1]=P[1],I[N+2]=P[2],I[N+3]=255}for(const I of this._figures)u(g,I,At);return x.putImageData(g,2,2),{canvas:O.canvas,offsetX:$-2*mt,offsetY:Y-2*yt,scaleX:mt,scaleY:yt}}getPattern(y,P,B,U){S(y,this._bbox);let C;if(U===m.SHADING)C=s.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(y));else if(C=s.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const $=s.Util.singularValueDecompose2dScale(this.matrix);C=[C[0]*$[0],C[1]*$[1]]}const k=this._createMeshCanvas(C,U===m.SHADING?null:this._background,P.cachedCanvases);return U!==m.SHADING&&(y.setTransform(...P.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(k.offsetX,k.offsetY),y.scale(k.scaleX,k.scaleY),y.createPattern(k.canvas,"no-repeat")}}class A extends w{getPattern(){return"hotpink"}}function _(E){switch(E[0]){case"RadialAxial":return new R(E);case"Mesh":return new d(E);case"Dummy":return new A}throw new Error(`Unknown IR type: ${E[0]}`)}const p={COLORED:1,UNCOLORED:2};class b{static MAX_PATTERN_SIZE=3e3;constructor(y,P,B,U,C){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=P,this.ctx=B,this.canvasGraphicsFactory=U,this.baseTransform=C}createPatternCanvas(y){const P=this.operatorList,B=this.bbox,U=this.xstep,C=this.ystep,k=this.paintType,$=this.tilingType,Y=this.color,X=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+$);const J=B[0],tt=B[1],_t=B[2],mt=B[3],yt=s.Util.singularValueDecompose2dScale(this.matrix),At=s.Util.singularValueDecompose2dScale(this.baseTransform),V=[yt[0]*At[0],yt[1]*At[1]],H=this.getSizeAndScale(U,this.ctx.canvas.width,V[0]),O=this.getSizeAndScale(C,this.ctx.canvas.height,V[1]),x=y.cachedCanvases.getCanvas("pattern",H.size,O.size,!0),g=x.context,T=X.createCanvasGraphics(g);T.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(T,k,Y);let I=J,N=tt,G=_t,j=mt;return J<0&&(I=0,G+=Math.abs(J)),tt<0&&(N=0,j+=Math.abs(tt)),g.translate(-(H.scale*I),-(O.scale*N)),T.transform(H.scale,0,0,O.scale,0,0),g.save(),this.clipBbox(T,I,N,G,j),T.baseTransform=(0,l.getCurrentTransform)(T.ctx),T.executeOperatorList(P),T.endDrawing(),{canvas:x.canvas,scaleX:H.scale,scaleY:O.scale,offsetX:I,offsetY:N}}getSizeAndScale(y,P,B){y=Math.abs(y);const U=Math.max(b.MAX_PATTERN_SIZE,P);let C=Math.ceil(y*B);return C>=U?C=U:B=C/y,{scale:B,size:C}}clipBbox(y,P,B,U,C){const k=U-P,$=C-B;y.ctx.rect(P,B,k,$),y.current.updateRectMinMax((0,l.getCurrentTransform)(y.ctx),[P,B,U,C]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,P,B){const U=y.ctx,C=y.current;switch(P){case p.COLORED:const k=this.ctx;U.fillStyle=k.fillStyle,U.strokeStyle=k.strokeStyle,C.fillColor=k.fillStyle,C.strokeColor=k.strokeStyle;break;case p.UNCOLORED:const $=s.Util.makeHexColor(B[0],B[1],B[2]);U.fillStyle=$,U.strokeStyle=$,C.fillColor=$,C.strokeColor=$;break;default:throw new s.FormatError(`Unsupported paint type: ${P}`)}}getPattern(y,P,B,U){let C=B;U!==m.SHADING&&(C=s.Util.transform(C,P.baseTransform),this.matrix&&(C=s.Util.transform(C,this.matrix)));const k=this.createPatternCanvas(P);let $=new DOMMatrix(C);$=$.translate(k.offsetX,k.offsetY),$=$.scale(1/k.scaleX,1/k.scaleY);const Y=y.createPattern(k.canvas,"repeat");return Y.setTransform($),Y}}a.TilingPattern=b},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convertBlackAndWhiteToRGBA=m,a.convertToRGBA=l,a.grayToRGBA=w;var s=r(1);function l(R){switch(R.kind){case s.ImageKind.GRAYSCALE_1BPP:return m(R);case s.ImageKind.RGB_24BPP:return S(R)}return null}function m({src:R,srcPos:h=0,dest:u,width:d,height:A,nonBlackColor:_=4294967295,inverseDecode:p=!1}){const b=s.FeatureTest.isLittleEndian?4278190080:255,[E,y]=p?[_,b]:[b,_],P=d>>3,B=d&7,U=R.length;u=new Uint32Array(u.buffer);let C=0;for(let k=0;k<A;k++){for(const Y=h+P;h<Y;h++){const X=h<U?R[h]:255;u[C++]=X&128?y:E,u[C++]=X&64?y:E,u[C++]=X&32?y:E,u[C++]=X&16?y:E,u[C++]=X&8?y:E,u[C++]=X&4?y:E,u[C++]=X&2?y:E,u[C++]=X&1?y:E}if(B===0)continue;const $=h<U?R[h++]:255;for(let Y=0;Y<B;Y++)u[C++]=$&1<<7-Y?y:E}return{srcPos:h,destPos:C}}function S({src:R,srcPos:h=0,dest:u,destPos:d=0,width:A,height:_}){let p=0;const b=R.length>>2,E=new Uint32Array(R.buffer,h,b);if(s.FeatureTest.isLittleEndian){for(;p<b-2;p+=3,d+=4){const y=E[p],P=E[p+1],B=E[p+2];u[d]=y|4278190080,u[d+1]=y>>>24|P<<8|4278190080,u[d+2]=P>>>16|B<<16|4278190080,u[d+3]=B>>>8|4278190080}for(let y=p*4,P=R.length;y<P;y+=3)u[d++]=R[y]|R[y+1]<<8|R[y+2]<<16|4278190080}else{for(;p<b-2;p+=3,d+=4){const y=E[p],P=E[p+1],B=E[p+2];u[d]=y|255,u[d+1]=y<<24|P>>>8|255,u[d+2]=P<<16|B>>>16|255,u[d+3]=B<<8|255}for(let y=p*4,P=R.length;y<P;y+=3)u[d++]=R[y]<<24|R[y+1]<<16|R[y+2]<<8|255}return{srcPos:h,destPos:d}}function w(R,h){if(s.FeatureTest.isLittleEndian)for(let u=0,d=R.length;u<d;u++)h[u]=R[u]*65793|4278190080;else for(let u=0,d=R.length;u<d;u++)h[u]=R[u]*16843008|255}},(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const r=Object.create(null);a.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var s=r(1);const l={DATA:1,ERROR:2},m={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new s.AbortException(R.message);case"MissingPDFException":return new s.MissingPDFException(R.message);case"PasswordException":return new s.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new s.UnknownErrorException(R.message,R.details);default:return new s.UnknownErrorException(R.message,R.toString())}}class w{constructor(h,u,d){this.sourceName=h,this.targetName=u,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=A=>{const _=A.data;if(_.targetName!==this.sourceName)return;if(_.stream){this.#e(_);return}if(_.callback){const b=_.callbackId,E=this.callbackCapabilities[b];if(!E)throw new Error(`Cannot resolve callback ${b}`);if(delete this.callbackCapabilities[b],_.callback===l.DATA)E.resolve(_.data);else if(_.callback===l.ERROR)E.reject(S(_.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[_.action];if(!p)throw new Error(`Unknown action from worker: ${_.action}`);if(_.callbackId){const b=this.sourceName,E=_.sourceName;new Promise(function(y){y(p(_.data))}).then(function(y){d.postMessage({sourceName:b,targetName:E,callback:l.DATA,callbackId:_.callbackId,data:y})},function(y){d.postMessage({sourceName:b,targetName:E,callback:l.ERROR,callbackId:_.callbackId,reason:S(y)})});return}if(_.streamId){this.#t(_);return}p(_.data)},d.addEventListener("message",this._onComObjOnMessage)}on(h,u){const d=this.actionHandler;if(d[h])throw new Error(`There is already an actionName called "${h}"`);d[h]=u}send(h,u,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:u},d)}sendWithPromise(h,u,d){const A=this.callbackId++,_=new s.PromiseCapability;this.callbackCapabilities[A]=_;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:A,data:u},d)}catch(p){_.reject(p)}return _.promise}sendWithStream(h,u,d,A){const _=this.streamId++,p=this.sourceName,b=this.targetName,E=this.comObj;return new ReadableStream({start:y=>{const P=new s.PromiseCapability;return this.streamControllers[_]={controller:y,startCall:P,pullCall:null,cancelCall:null,isClosed:!1},E.postMessage({sourceName:p,targetName:b,action:h,streamId:_,data:u,desiredSize:y.desiredSize},A),P.promise},pull:y=>{const P=new s.PromiseCapability;return this.streamControllers[_].pullCall=P,E.postMessage({sourceName:p,targetName:b,stream:m.PULL,streamId:_,desiredSize:y.desiredSize}),P.promise},cancel:y=>{(0,s.assert)(y instanceof Error,"cancel must have a valid reason");const P=new s.PromiseCapability;return this.streamControllers[_].cancelCall=P,this.streamControllers[_].isClosed=!0,E.postMessage({sourceName:p,targetName:b,stream:m.CANCEL,streamId:_,reason:S(y)}),P.promise}},d)}#t(h){const u=h.streamId,d=this.sourceName,A=h.sourceName,_=this.comObj,p=this,b=this.actionHandler[h.action],E={enqueue(y,P=1,B){if(this.isCancelled)return;const U=this.desiredSize;this.desiredSize-=P,U>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),_.postMessage({sourceName:d,targetName:A,stream:m.ENQUEUE,streamId:u,chunk:y},B)},close(){this.isCancelled||(this.isCancelled=!0,_.postMessage({sourceName:d,targetName:A,stream:m.CLOSE,streamId:u}),delete p.streamSinks[u])},error(y){(0,s.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_.postMessage({sourceName:d,targetName:A,stream:m.ERROR,streamId:u,reason:S(y)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};E.sinkCapability.resolve(),E.ready=E.sinkCapability.promise,this.streamSinks[u]=E,new Promise(function(y){y(b(h.data,E))}).then(function(){_.postMessage({sourceName:d,targetName:A,stream:m.START_COMPLETE,streamId:u,success:!0})},function(y){_.postMessage({sourceName:d,targetName:A,stream:m.START_COMPLETE,streamId:u,reason:S(y)})})}#e(h){const u=h.streamId,d=this.sourceName,A=h.sourceName,_=this.comObj,p=this.streamControllers[u],b=this.streamSinks[u];switch(h.stream){case m.START_COMPLETE:h.success?p.startCall.resolve():p.startCall.reject(S(h.reason));break;case m.PULL_COMPLETE:h.success?p.pullCall.resolve():p.pullCall.reject(S(h.reason));break;case m.PULL:if(!b){_.postMessage({sourceName:d,targetName:A,stream:m.PULL_COMPLETE,streamId:u,success:!0});break}b.desiredSize<=0&&h.desiredSize>0&&b.sinkCapability.resolve(),b.desiredSize=h.desiredSize,new Promise(function(E){E(b.onPull?.())}).then(function(){_.postMessage({sourceName:d,targetName:A,stream:m.PULL_COMPLETE,streamId:u,success:!0})},function(E){_.postMessage({sourceName:d,targetName:A,stream:m.PULL_COMPLETE,streamId:u,reason:S(E)})});break;case m.ENQUEUE:if((0,s.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(h.chunk);break;case m.CLOSE:if((0,s.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),this.#n(p,u);break;case m.ERROR:(0,s.assert)(p,"error should have stream controller"),p.controller.error(S(h.reason)),this.#n(p,u);break;case m.CANCEL_COMPLETE:h.success?p.cancelCall.resolve():p.cancelCall.reject(S(h.reason)),this.#n(p,u);break;case m.CANCEL:if(!b)break;new Promise(function(E){E(b.onCancel?.(S(h.reason)))}).then(function(){_.postMessage({sourceName:d,targetName:A,stream:m.CANCEL_COMPLETE,streamId:u,success:!0})},function(E){_.postMessage({sourceName:d,targetName:A,stream:m.CANCEL_COMPLETE,streamId:u,reason:S(E)})}),b.sinkCapability.reject(S(h.reason)),b.isCancelled=!0,delete this.streamSinks[u];break;default:throw new Error("Unexpected stream case")}}async#n(h,u){await Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[u]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=w},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var s=r(1);class l{#t;#e;constructor({parsedData:S,rawData:w}){this.#t=S,this.#e=w}getRaw(){return this.#e}get(S){return this.#t.get(S)??null}getAll(){return(0,s.objectFromMap)(this.#t)}has(S){return this.#t.has(S)}}a.Metadata=l},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var s=r(1),l=r(8);const m=Symbol("INTERNAL");class S{#t=!0;constructor(h,u){this.name=h,this.intent=u}get visible(){return this.#t}_setVisible(h,u){h!==m&&(0,s.unreachable)("Internal method `_setVisible` called."),this.#t=u}}class w{#t=null;#e=new Map;#n=null;#a=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#a=h.order;for(const u of h.groups)this.#e.set(u.id,new S(u.name,u.intent));if(h.baseState==="OFF")for(const u of this.#e.values())u._setVisible(m,!1);for(const u of h.on)this.#e.get(u)._setVisible(m,!0);for(const u of h.off)this.#e.get(u)._setVisible(m,!1);this.#n=this.getHash()}}#o(h){const u=h.length;if(u<2)return!0;const d=h[0];for(let A=1;A<u;A++){const _=h[A];let p;if(Array.isArray(_))p=this.#o(_);else if(this.#e.has(_))p=this.#e.get(_).visible;else return(0,s.warn)(`Optional content group not found: ${_}`),!0;switch(d){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return d==="And"}isVisible(h){if(this.#e.size===0)return!0;if(!h)return(0,s.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#e.has(h.id)?this.#e.get(h.id).visible:((0,s.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#o(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const u of h.ids){if(!this.#e.has(u))return(0,s.warn)(`Optional content group not found: ${u}`),!0;if(this.#e.get(u).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const u of h.ids){if(!this.#e.has(u))return(0,s.warn)(`Optional content group not found: ${u}`),!0;if(!this.#e.get(u).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const u of h.ids){if(!this.#e.has(u))return(0,s.warn)(`Optional content group not found: ${u}`),!0;if(!this.#e.get(u).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const u of h.ids){if(!this.#e.has(u))return(0,s.warn)(`Optional content group not found: ${u}`),!0;if(this.#e.get(u).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,s.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,u=!0){if(!this.#e.has(h)){(0,s.warn)(`Optional content group not found: ${h}`);return}this.#e.get(h)._setVisible(m,!!u),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#a?this.#a.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}getGroup(h){return this.#e.get(h)||null}getHash(){if(this.#t!==null)return this.#t;const h=new l.MurmurHash3_64;for(const[u,d]of this.#e)h.update(`${u}:${d.visible}`);return this.#t=h.hexdigest()}}a.OptionalContentConfig=w},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var s=r(1),l=r(6);class m{constructor({length:h,initialData:u,progressiveDone:d=!1,contentDispositionFilename:A=null,disableRange:_=!1,disableStream:p=!1},b){if((0,s.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=A,u?.length>0){const E=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!p,this._isRangeSupported=!_,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,y)=>{this._onReceiveData({begin:E,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((E,y)=>{this._onProgress({loaded:E,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:u}){const d=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{const A=this._rangeReaders.some(function(_){return _._begin!==h?!1:(_._enqueue(d),!0)});(0,s.assert)(A,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const u=this._rangeReaders.indexOf(h);u>=0&&this._rangeReaders.splice(u,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new S(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,u){if(u<=this._progressiveDataLength)return null;const d=new w(this,h,u);return this._pdfDataRangeTransport.requestDataRange(h,u),this._rangeReaders.push(d),d}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const u of this._rangeReaders.slice(0))u.cancel(h);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=m;class S{constructor(h,u,d=!1,A=null){this._stream=h,this._done=d||!1,this._filename=(0,l.isPdfFile)(A)?A:null,this._queuedChunks=u||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new s.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w{constructor(h,u,d){this._stream=h,this._begin=u,this._end=d,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new s.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var s=r(1),l=r(20);function m(d,A,_){return{method:"GET",headers:d,signal:_.signal,mode:"cors",credentials:A?"include":"same-origin",redirect:"follow"}}function S(d){const A=new Headers;for(const _ in d){const p=d[_];p!==void 0&&A.append(_,p)}return A}function w(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:((0,s.warn)(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class R{constructor(A){this.source=A,this.isHttp=/^https?:/i.test(A.url),this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(A,_){if(_<=this._progressiveDataLength)return null;const p=new u(this,A,_);return this._rangeRequestReaders.push(p),p}cancelAllRequests(A){this._fullRequestReader?.cancel(A);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(A)}}a.PDFFetchStream=R;class h{constructor(A){this._stream=A,this._reader=null,this._loaded=0,this._filename=null;const _=A.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=new s.PromiseCapability,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=S(this._stream.httpHeaders);const p=_.url;fetch(p,m(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,l.validateResponseStatus)(b.status))throw(0,l.createResponseStatusError)(b.status,p);this._reader=b.body.getReader(),this._headersCapability.resolve();const E=B=>b.headers.get(B),{allowRangeRequests:y,suggestedLength:P}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=P||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:A,done:_}=await this._reader.read();return _?{value:A,done:_}:(this._loaded+=A.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:w(A),done:!1})}cancel(A){this._reader?.cancel(A),this._abortController.abort()}}class u{constructor(A,_,p){this._stream=A,this._reader=null,this._loaded=0;const b=A.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${p-1}`);const E=b.url;fetch(E,m(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,l.validateResponseStatus)(y.status))throw(0,l.createResponseStatusError)(y.status,E);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:A,done:_}=await this._reader.read();return _?{value:A,done:_}:(this._loaded+=A.byteLength,this.onProgress?.({loaded:this._loaded}),{value:w(A),done:!1})}cancel(A){this._reader?.cancel(A),this._abortController.abort()}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=R,a.extractFilenameFromHeader=w,a.validateRangeRequestCapabilities=S,a.validateResponseStatus=h;var s=r(1),l=r(21),m=r(6);function S({getResponseHeader:u,isHttp:d,rangeChunkSize:A,disableRange:_}){const p={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(u("Content-Length"),10);return!Number.isInteger(b)||(p.suggestedLength=b,b<=2*A)||_||!d||u("Accept-Ranges")!=="bytes"||(u("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function w(u){const d=u("Content-Disposition");if(d){let A=(0,l.getFilenameFromContentDispositionHeader)(d);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,m.isPdfFile)(A))return A}return null}function R(u,d){return u===404||u===0&&d.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+d+'".'):new s.UnexpectedResponseException(`Unexpected server response (${u}) while retrieving PDF "${d}".`,u)}function h(u){return u===200||u===206}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=l;var s=r(1);function l(m){let S=!0,w=R("filename\\*","i").exec(m);if(w){w=w[1];let b=A(w);return b=unescape(b),b=_(b),b=p(b),u(b)}if(w=d(m),w){const b=p(w);return u(b)}if(w=R("filename","i").exec(m),w){w=w[1];let b=A(w);return b=p(b),u(b)}function R(b,E){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function h(b,E){if(b){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const y=new TextDecoder(b,{fatal:!0}),P=(0,s.stringToBytes)(E);E=y.decode(P),S=!1}catch{}}return E}function u(b){return S&&/[\x80-\xff]/.test(b)&&(b=h("utf-8",b),S&&(b=h("iso-8859-1",b))),b}function d(b){const E=[];let y;const P=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=P.exec(b))!==null;){let[,U,C,k]=y;if(U=parseInt(U,10),U in E){if(U===0)break;continue}E[U]=[C,k]}const B=[];for(let U=0;U<E.length&&U in E;++U){let[C,k]=E[U];k=A(k),C&&(k=unescape(k),U===0&&(k=_(k))),B.push(k)}return B.join("")}function A(b){if(b.startsWith('"')){const E=b.slice(1).split('\\"');for(let y=0;y<E.length;++y){const P=E[y].indexOf('"');P!==-1&&(E[y]=E[y].slice(0,P),E.length=y+1),E[y]=E[y].replaceAll(/\\(.)/g,"$1")}b=E.join('"')}return b}function _(b){const E=b.indexOf("'");if(E===-1)return b;const y=b.slice(0,E),B=b.slice(E+1).replace(/^[^']*'/,"");return h(y,B)}function p(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,y,P,B){if(P==="q"||P==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(U,C){return String.fromCharCode(parseInt(C,16))}),h(y,B);try{B=atob(B)}catch{}return h(y,B)})}return""}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var s=r(1),l=r(20);const m=200,S=206;function w(A){const _=A.response;return typeof _!="string"?_:(0,s.stringToBytes)(_).buffer}class R{constructor(_,p={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,p,b){const E={begin:_,end:p};for(const y in b)E[y]=b[y];return this.request(E)}requestFull(_){return this.request(_)}request(_){const p=new XMLHttpRequest,b=this.currXhrId++,E=this.pendingRequests[b]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const P=this.httpHeaders[y];P!==void 0&&p.setRequestHeader(y,P)}return this.isHttp&&"begin"in _&&"end"in _?(p.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),E.expectedStatus=S):E.expectedStatus=m,p.responseType="arraybuffer",_.onError&&(p.onerror=function(y){_.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,b),p.onprogress=this.onProgress.bind(this,b),E.onHeadersReceived=_.onHeadersReceived,E.onDone=_.onDone,E.onError=_.onError,E.onProgress=_.onProgress,p.send(null),b}onProgress(_,p){const b=this.pendingRequests[_];b&&b.onProgress?.(p)}onStateChange(_,p){const b=this.pendingRequests[_];if(!b)return;const E=b.xhr;if(E.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),E.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],E.status===0&&this.isHttp){b.onError?.(E.status);return}const y=E.status||m;if(!(y===m&&b.expectedStatus===S)&&y!==b.expectedStatus){b.onError?.(E.status);return}const B=w(E);if(y===S){const U=E.getResponseHeader("Content-Range"),C=/bytes (\d+)-(\d+)\/(\d+)/.exec(U);b.onDone({begin:parseInt(C[1],10),chunk:B})}else B?b.onDone({begin:0,chunk:B}):b.onError?.(E.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const p=this.pendingRequests[_].xhr;delete this.pendingRequests[_],p.abort()}}class h{constructor(_){this._source=_,this._manager=new R(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const p=this._rangeRequestReaders.indexOf(_);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u(this._manager,this._source),this._fullRequestReader}getRangeReader(_,p){const b=new d(this._manager,_,p);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(_){this._fullRequestReader?.cancel(_);for(const p of this._rangeRequestReaders.slice(0))p.cancel(_)}}a.PDFNetworkStream=h;class u{constructor(_,p){this._manager=_;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=_.requestFull(b),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,p=this._manager.getRequestXhr(_),b=P=>p.getResponseHeader(P),{allowRangeRequests:E,suggestedLength:y}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,l.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){this.onProgress?.({loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new s.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class d{constructor(_,p,b){this._manager=_;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(p,b,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(_){const p=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,l.createResponseStatusError)(_,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){this.isStreamingSupported||this.onProgress?.({loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new s.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var s=r(1),l=r(20);const m=/^file:\/\/\/[a-zA-Z]:\//;function S(b){const E=require$$5,y=E.parse(b);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(b)?E.parse(`file:///${b}`):(y.host||(y.protocol="file:"),y)}class w{constructor(E){this.source=E,this.url=S(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new d(this),this._fullRequestReader}getRangeReader(E,y){if(y<=this._progressiveDataLength)return null;const P=this.isFsUrl?new p(this,E,y):new A(this,E,y);return this._rangeRequestReaders.push(P),P}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const y of this._rangeRequestReaders.slice(0))y.cancel(E)}}a.PDFNodeStream=w;class R{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=E.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=E.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const y=E.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=E.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function u(b,E){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:E}}class d extends R{constructor(E){super(E);const y=P=>{if(P.statusCode===404){const k=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k,this._headersCapability.reject(k);return}this._headersCapability.resolve(),this._setReadableStream(P);const B=k=>this._readableStream.headers[k.toLowerCase()],{allowRangeRequests:U,suggestedLength:C}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=U,this._contentLength=C||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(u(this._url,E.httpHeaders),y)}else{const P=require$$5;this._request=P.request(u(this._url,E.httpHeaders),y)}this._request.on("error",P=>{this._storedError=P,this._headersCapability.reject(P)}),this._request.end()}}class A extends h{constructor(E,y,P){super(E),this._httpHeaders={};for(const U in E.httpHeaders){const C=E.httpHeaders[U];C!==void 0&&(this._httpHeaders[U]=C)}this._httpHeaders.Range=`bytes=${y}-${P-1}`;const B=U=>{if(U.statusCode===404){const C=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(U)};if(this._request=null,this._url.protocol==="http:"){const U=require$$5;this._request=U.request(u(this._url,this._httpHeaders),B)}else{const U=require$$5;this._request=U.request(u(this._url,this._httpHeaders),B)}this._request.on("error",U=>{this._storedError=U}),this._request.end()}}class _ extends R{constructor(E){super(E);let y=decodeURIComponent(this._url.path);m.test(this._url.href)&&(y=y.replace(/^\//,""));const P=require$$5;P.lstat(y,(B,U)=>{if(B){B.code==="ENOENT"&&(B=new s.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=U.size,this._setReadableStream(P.createReadStream(y)),this._headersCapability.resolve()})}}class p extends h{constructor(E,y,P){super(E);let B=decodeURIComponent(this._url.path);m.test(this._url.href)&&(B=B.replace(/^\//,""));const U=require$$5;this._setReadableStream(U.createReadStream(B,{start:y,end:P-1}))}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var s=r(6),l=r(1);const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/1999/xlink",R=["butt","round","square"],h=["miter","round","bevel"],u=function(U,C="",k=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!k)return URL.createObjectURL(new Blob([U],{type:C}));const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Y=`data:${C};base64,`;for(let X=0,J=U.length;X<J;X+=3){const tt=U[X]&255,_t=U[X+1]&255,mt=U[X+2]&255,yt=tt>>2,At=(tt&3)<<4|_t>>4,V=X+1<J?(_t&15)<<2|mt>>6:64,H=X+2<J?mt&63:64;Y+=$[yt]+$[At]+$[V]+$[H]}return Y},d=function(){const U=new Uint8Array([137,80,78,71,13,10,26,10]),C=12,k=new Int32Array(256);for(let mt=0;mt<256;mt++){let yt=mt;for(let At=0;At<8;At++)yt=yt&1?3988292384^yt>>1&2147483647:yt>>1&2147483647;k[mt]=yt}function $(mt,yt,At){let V=-1;for(let H=yt;H<At;H++){const O=(V^mt[H])&255,x=k[O];V=V>>>8^x}return V^-1}function Y(mt,yt,At,V){let H=V;const O=yt.length;At[H]=O>>24&255,At[H+1]=O>>16&255,At[H+2]=O>>8&255,At[H+3]=O&255,H+=4,At[H]=mt.charCodeAt(0)&255,At[H+1]=mt.charCodeAt(1)&255,At[H+2]=mt.charCodeAt(2)&255,At[H+3]=mt.charCodeAt(3)&255,H+=4,At.set(yt,H),H+=yt.length;const x=$(At,V+4,H);At[H]=x>>24&255,At[H+1]=x>>16&255,At[H+2]=x>>8&255,At[H+3]=x&255}function X(mt,yt,At){let V=1,H=0;for(let O=yt;O<At;++O)V=(V+(mt[O]&255))%65521,H=(H+V)%65521;return H<<16|V}function J(mt){if(!l.isNodeJS)return tt(mt);try{const yt=parseInt(process.versions.node)>=8?mt:Buffer.from(mt),At=require$$5.deflateSync(yt,{level:9});return At instanceof Uint8Array?At:new Uint8Array(At)}catch(yt){(0,l.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+yt)}return tt(mt)}function tt(mt){let yt=mt.length;const At=65535,V=Math.ceil(yt/At),H=new Uint8Array(2+yt+V*5+4);let O=0;H[O++]=120,H[O++]=156;let x=0;for(;yt>At;)H[O++]=0,H[O++]=255,H[O++]=255,H[O++]=0,H[O++]=0,H.set(mt.subarray(x,x+At),O),O+=At,x+=At,yt-=At;H[O++]=1,H[O++]=yt&255,H[O++]=yt>>8&255,H[O++]=~yt&65535&255,H[O++]=(~yt&65535)>>8&255,H.set(mt.subarray(x),O),O+=mt.length-x;const g=X(mt,0,mt.length);return H[O++]=g>>24&255,H[O++]=g>>16&255,H[O++]=g>>8&255,H[O++]=g&255,H}function _t(mt,yt,At,V){const H=mt.width,O=mt.height;let x,g,T;const I=mt.data;switch(yt){case l.ImageKind.GRAYSCALE_1BPP:g=0,x=1,T=H+7>>3;break;case l.ImageKind.RGB_24BPP:g=2,x=8,T=H*3;break;case l.ImageKind.RGBA_32BPP:g=6,x=8,T=H*4;break;default:throw new Error("invalid format")}const N=new Uint8Array((1+T)*O);let G=0,j=0;for(let W=0;W<O;++W)N[G++]=0,N.set(I.subarray(j,j+T),G),j+=T,G+=T;if(yt===l.ImageKind.GRAYSCALE_1BPP&&V){G=0;for(let W=0;W<O;W++){G++;for(let Q=0;Q<T;Q++)N[G++]^=255}}const v=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,H&255,O>>24&255,O>>16&255,O>>8&255,O&255,x,g,0,0,0]),D=J(N),F=U.length+C*3+v.length+D.length,z=new Uint8Array(F);let q=0;return z.set(U,q),q+=U.length,Y("IHDR",v,z,q),q+=C+v.length,Y("IDATA",D,z,q),q+=C+D.length,Y("IEND",new Uint8Array(0),z,q),u(z,"image/png",At)}return function(yt,At,V){const H=yt.kind===void 0?l.ImageKind.GRAYSCALE_1BPP:yt.kind;return _t(yt,H,At,V)}}();class A{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=l.IDENTITY_MATRIX,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=l.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(C,k){this.x=C,this.y=k}}function _(U){let C=[];const k=[];for(const $ of U){if($.fn==="save"){C.push({fnId:92,fn:"group",items:[]}),k.push(C),C=C.at(-1).items;continue}$.fn==="restore"?C=k.pop():C.push($)}return C}function p(U){if(Number.isInteger(U))return U.toString();const C=U.toFixed(10);let k=C.length-1;if(C[k]!=="0")return C;do k--;while(C[k]==="0");return C.substring(0,C[k]==="."?k:k+1)}function b(U){if(U[4]===0&&U[5]===0){if(U[1]===0&&U[2]===0)return U[0]===1&&U[3]===1?"":`scale(${p(U[0])} ${p(U[3])})`;if(U[0]===U[3]&&U[1]===-U[2]){const C=Math.acos(U[0])*180/Math.PI;return`rotate(${p(C)})`}}else if(U[0]===1&&U[1]===0&&U[2]===0&&U[3]===1)return`translate(${p(U[4])} ${p(U[5])})`;return`matrix(${p(U[0])} ${p(U[1])} ${p(U[2])} ${p(U[3])} ${p(U[4])} ${p(U[5])})`}let E=0,y=0,P=0;class B{constructor(C,k,$=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new A,this.transformMatrix=l.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=C,this.objs=k,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!$,this._operatorIdMapping=[];for(const Y in l.OPS)this._operatorIdMapping[l.OPS[Y]]=Y}getObject(C,k=null){return typeof C=="string"?C.startsWith("g_")?this.commonObjs.get(C):this.objs.get(C):k}save(){this.transformStack.push(this.transformMatrix);const C=this.current;this.extraStack.push(C),this.current=C.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(C){this.save(),this.executeOpTree(C),this.restore()}loadDependencies(C){const k=C.fnArray,$=C.argsArray;for(let Y=0,X=k.length;Y<X;Y++)if(k[Y]===l.OPS.dependency)for(const J of $[Y]){const tt=J.startsWith("g_")?this.commonObjs:this.objs,_t=new Promise(mt=>{tt.get(J,mt)});this.current.dependencies.push(_t)}return Promise.all(this.current.dependencies)}transform(C,k,$,Y,X,J){const tt=[C,k,$,Y,X,J];this.transformMatrix=l.Util.transform(this.transformMatrix,tt),this.tgrp=null}getSVG(C,k){this.viewport=k;const $=this._initialize(k);return this.loadDependencies(C).then(()=>(this.transformMatrix=l.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(C)),$))}convertOpList(C){const k=this._operatorIdMapping,$=C.argsArray,Y=C.fnArray,X=[];for(let J=0,tt=Y.length;J<tt;J++){const _t=Y[J];X.push({fnId:_t,fn:k[_t],args:$[J]})}return _(X)}executeOpTree(C){for(const k of C){const $=k.fn,Y=k.fnId,X=k.args;switch(Y|0){case l.OPS.beginText:this.beginText();break;case l.OPS.dependency:break;case l.OPS.setLeading:this.setLeading(X);break;case l.OPS.setLeadingMoveText:this.setLeadingMoveText(X[0],X[1]);break;case l.OPS.setFont:this.setFont(X);break;case l.OPS.showText:this.showText(X[0]);break;case l.OPS.showSpacedText:this.showText(X[0]);break;case l.OPS.endText:this.endText();break;case l.OPS.moveText:this.moveText(X[0],X[1]);break;case l.OPS.setCharSpacing:this.setCharSpacing(X[0]);break;case l.OPS.setWordSpacing:this.setWordSpacing(X[0]);break;case l.OPS.setHScale:this.setHScale(X[0]);break;case l.OPS.setTextMatrix:this.setTextMatrix(X[0],X[1],X[2],X[3],X[4],X[5]);break;case l.OPS.setTextRise:this.setTextRise(X[0]);break;case l.OPS.setTextRenderingMode:this.setTextRenderingMode(X[0]);break;case l.OPS.setLineWidth:this.setLineWidth(X[0]);break;case l.OPS.setLineJoin:this.setLineJoin(X[0]);break;case l.OPS.setLineCap:this.setLineCap(X[0]);break;case l.OPS.setMiterLimit:this.setMiterLimit(X[0]);break;case l.OPS.setFillRGBColor:this.setFillRGBColor(X[0],X[1],X[2]);break;case l.OPS.setStrokeRGBColor:this.setStrokeRGBColor(X[0],X[1],X[2]);break;case l.OPS.setStrokeColorN:this.setStrokeColorN(X);break;case l.OPS.setFillColorN:this.setFillColorN(X);break;case l.OPS.shadingFill:this.shadingFill(X[0]);break;case l.OPS.setDash:this.setDash(X[0],X[1]);break;case l.OPS.setRenderingIntent:this.setRenderingIntent(X[0]);break;case l.OPS.setFlatness:this.setFlatness(X[0]);break;case l.OPS.setGState:this.setGState(X[0]);break;case l.OPS.fill:this.fill();break;case l.OPS.eoFill:this.eoFill();break;case l.OPS.stroke:this.stroke();break;case l.OPS.fillStroke:this.fillStroke();break;case l.OPS.eoFillStroke:this.eoFillStroke();break;case l.OPS.clip:this.clip("nonzero");break;case l.OPS.eoClip:this.clip("evenodd");break;case l.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case l.OPS.paintImageXObject:this.paintImageXObject(X[0]);break;case l.OPS.paintInlineImageXObject:this.paintInlineImageXObject(X[0]);break;case l.OPS.paintImageMaskXObject:this.paintImageMaskXObject(X[0]);break;case l.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(X[0],X[1]);break;case l.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case l.OPS.closePath:this.closePath();break;case l.OPS.closeStroke:this.closeStroke();break;case l.OPS.closeFillStroke:this.closeFillStroke();break;case l.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case l.OPS.nextLine:this.nextLine();break;case l.OPS.transform:this.transform(X[0],X[1],X[2],X[3],X[4],X[5]);break;case l.OPS.constructPath:this.constructPath(X[0],X[1]);break;case l.OPS.endPath:this.endPath();break;case 92:this.group(k.items);break;default:(0,l.warn)(`Unimplemented operator ${$}`);break}}}setWordSpacing(C){this.current.wordSpacing=C}setCharSpacing(C){this.current.charSpacing=C}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(C,k,$,Y,X,J){const tt=this.current;tt.textMatrix=tt.lineMatrix=[C,k,$,Y,X,J],tt.textMatrixScale=Math.hypot(C,k),tt.x=tt.lineX=0,tt.y=tt.lineY=0,tt.xcoords=[],tt.ycoords=[],tt.tspan=this.svgFactory.createElement("svg:tspan"),tt.tspan.setAttributeNS(null,"font-family",tt.fontFamily),tt.tspan.setAttributeNS(null,"font-size",`${p(tt.fontSize)}px`),tt.tspan.setAttributeNS(null,"y",p(-tt.y)),tt.txtElement=this.svgFactory.createElement("svg:text"),tt.txtElement.append(tt.tspan)}beginText(){const C=this.current;C.x=C.lineX=0,C.y=C.lineY=0,C.textMatrix=l.IDENTITY_MATRIX,C.lineMatrix=l.IDENTITY_MATRIX,C.textMatrixScale=1,C.tspan=this.svgFactory.createElement("svg:tspan"),C.txtElement=this.svgFactory.createElement("svg:text"),C.txtgrp=this.svgFactory.createElement("svg:g"),C.xcoords=[],C.ycoords=[]}moveText(C,k){const $=this.current;$.x=$.lineX+=C,$.y=$.lineY+=k,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${p($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",p(-$.y))}showText(C){const k=this.current,$=k.font,Y=k.fontSize;if(Y===0)return;const X=k.fontSizeScale,J=k.charSpacing,tt=k.wordSpacing,_t=k.fontDirection,mt=k.textHScale*_t,yt=$.vertical,At=yt?1:-1,V=$.defaultVMetrics,H=Y*k.fontMatrix[0];let O=0;for(const T of C){if(T===null){O+=_t*tt;continue}else if(typeof T=="number"){O+=At*T*Y/1e3;continue}const I=(T.isSpace?tt:0)+J,N=T.fontChar;let G,j,v=T.width;if(yt){let F;const z=T.vmetric||V;F=T.vmetric?z[1]:v*.5,F=-F*H;const q=z[2]*H;v=z?-z[0]:v,G=F/X,j=(O+q)/X}else G=O/X,j=0;(T.isInFont||$.missingFile)&&(k.xcoords.push(k.x+G),yt&&k.ycoords.push(-k.y+j),k.tspan.textContent+=N);const D=yt?v*H-I*_t:v*H+I*_t;O+=D}k.tspan.setAttributeNS(null,"x",k.xcoords.map(p).join(" ")),yt?k.tspan.setAttributeNS(null,"y",k.ycoords.map(p).join(" ")):k.tspan.setAttributeNS(null,"y",p(-k.y)),yt?k.y-=O:k.x+=O*mt,k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${p(k.fontSize)}px`),k.fontStyle!==m.fontStyle&&k.tspan.setAttributeNS(null,"font-style",k.fontStyle),k.fontWeight!==m.fontWeight&&k.tspan.setAttributeNS(null,"font-weight",k.fontWeight);const x=k.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;if(x===l.TextRenderingMode.FILL||x===l.TextRenderingMode.FILL_STROKE?(k.fillColor!==m.fillColor&&k.tspan.setAttributeNS(null,"fill",k.fillColor),k.fillAlpha<1&&k.tspan.setAttributeNS(null,"fill-opacity",k.fillAlpha)):k.textRenderingMode===l.TextRenderingMode.ADD_TO_PATH?k.tspan.setAttributeNS(null,"fill","transparent"):k.tspan.setAttributeNS(null,"fill","none"),x===l.TextRenderingMode.STROKE||x===l.TextRenderingMode.FILL_STROKE){const T=1/(k.textMatrixScale||1);this._setStrokeAttributes(k.tspan,T)}let g=k.textMatrix;k.textRise!==0&&(g=g.slice(),g[5]+=k.textRise),k.txtElement.setAttributeNS(null,"transform",`${b(g)} scale(${p(mt)}, -1)`),k.txtElement.setAttributeNS(S,"xml:space","preserve"),k.txtElement.append(k.tspan),k.txtgrp.append(k.txtElement),this._ensureTransformGroup().append(k.txtElement)}setLeadingMoveText(C,k){this.setLeading(-k),this.moveText(C,k)}addFontStyle(C){if(!C.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const k=u(C.data,C.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${C.loadedName}"; src: url(${k}); }
`}setFont(C){const k=this.current,$=this.commonObjs.get(C[0]);let Y=C[1];k.font=$,this.embedFonts&&!$.missingFile&&!this.embeddedFonts[$.loadedName]&&(this.addFontStyle($),this.embeddedFonts[$.loadedName]=$),k.fontMatrix=$.fontMatrix||l.FONT_IDENTITY_MATRIX;let X="normal";$.black?X="900":$.bold&&(X="bold");const J=$.italic?"italic":"normal";Y<0?(Y=-Y,k.fontDirection=-1):k.fontDirection=1,k.fontSize=Y,k.fontFamily=$.loadedName,k.fontWeight=X,k.fontStyle=J,k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"y",p(-k.y)),k.xcoords=[],k.ycoords=[]}endText(){const C=this.current;C.textRenderingMode&l.TextRenderingMode.ADD_TO_PATH_FLAG&&C.txtElement?.hasChildNodes()&&(C.element=C.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(C){C>0&&(this.current.lineWidth=C)}setLineCap(C){this.current.lineCap=R[C]}setLineJoin(C){this.current.lineJoin=h[C]}setMiterLimit(C){this.current.miterLimit=C}setStrokeAlpha(C){this.current.strokeAlpha=C}setStrokeRGBColor(C,k,$){this.current.strokeColor=l.Util.makeHexColor(C,k,$)}setFillAlpha(C){this.current.fillAlpha=C}setFillRGBColor(C,k,$){this.current.fillColor=l.Util.makeHexColor(C,k,$),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(C){this.current.strokeColor=this._makeColorN_Pattern(C)}setFillColorN(C){this.current.fillColor=this._makeColorN_Pattern(C)}shadingFill(C){const{width:k,height:$}=this.viewport,Y=l.Util.inverseTransform(this.transformMatrix),[X,J,tt,_t]=l.Util.getAxialAlignedBoundingBox([0,0,k,$],Y),mt=this.svgFactory.createElement("svg:rect");mt.setAttributeNS(null,"x",X),mt.setAttributeNS(null,"y",J),mt.setAttributeNS(null,"width",tt-X),mt.setAttributeNS(null,"height",_t-J),mt.setAttributeNS(null,"fill",this._makeShadingPattern(C)),this.current.fillAlpha<1&&mt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(mt)}_makeColorN_Pattern(C){return C[0]==="TilingPattern"?this._makeTilingPattern(C):this._makeShadingPattern(C)}_makeTilingPattern(C){const k=C[1],$=C[2],Y=C[3]||l.IDENTITY_MATRIX,[X,J,tt,_t]=C[4],mt=C[5],yt=C[6],At=C[7],V=`shading${P++}`,[H,O,x,g]=l.Util.normalizeRect([...l.Util.applyTransform([X,J],Y),...l.Util.applyTransform([tt,_t],Y)]),[T,I]=l.Util.singularValueDecompose2dScale(Y),N=mt*T,G=yt*I,j=this.svgFactory.createElement("svg:pattern");j.setAttributeNS(null,"id",V),j.setAttributeNS(null,"patternUnits","userSpaceOnUse"),j.setAttributeNS(null,"width",N),j.setAttributeNS(null,"height",G),j.setAttributeNS(null,"x",`${H}`),j.setAttributeNS(null,"y",`${O}`);const v=this.svg,D=this.transformMatrix,F=this.current.fillColor,z=this.current.strokeColor,q=this.svgFactory.create(x-H,g-O);if(this.svg=q,this.transformMatrix=Y,At===2){const W=l.Util.makeHexColor(...k);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList($)),this.svg=v,this.transformMatrix=D,this.current.fillColor=F,this.current.strokeColor=z,j.append(q.childNodes[0]),this.defs.append(j),`url(#${V})`}_makeShadingPattern(C){switch(typeof C=="string"&&(C=this.objs.get(C)),C[0]){case"RadialAxial":const k=`shading${P++}`,$=C[3];let Y;switch(C[1]){case"axial":const X=C[4],J=C[5];Y=this.svgFactory.createElement("svg:linearGradient"),Y.setAttributeNS(null,"id",k),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"x1",X[0]),Y.setAttributeNS(null,"y1",X[1]),Y.setAttributeNS(null,"x2",J[0]),Y.setAttributeNS(null,"y2",J[1]);break;case"radial":const tt=C[4],_t=C[5],mt=C[6],yt=C[7];Y=this.svgFactory.createElement("svg:radialGradient"),Y.setAttributeNS(null,"id",k),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"cx",_t[0]),Y.setAttributeNS(null,"cy",_t[1]),Y.setAttributeNS(null,"r",yt),Y.setAttributeNS(null,"fx",tt[0]),Y.setAttributeNS(null,"fy",tt[1]),Y.setAttributeNS(null,"fr",mt);break;default:throw new Error(`Unknown RadialAxial type: ${C[1]}`)}for(const X of $){const J=this.svgFactory.createElement("svg:stop");J.setAttributeNS(null,"offset",X[0]),J.setAttributeNS(null,"stop-color",X[1]),Y.append(J)}return this.defs.append(Y),`url(#${k})`;case"Mesh":return(0,l.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${C[0]}`)}}setDash(C,k){this.current.dashArray=C,this.current.dashPhase=k}constructPath(C,k){const $=this.current;let Y=$.x,X=$.y,J=[],tt=0;for(const _t of C)switch(_t|0){case l.OPS.rectangle:Y=k[tt++],X=k[tt++];const mt=k[tt++],yt=k[tt++],At=Y+mt,V=X+yt;J.push("M",p(Y),p(X),"L",p(At),p(X),"L",p(At),p(V),"L",p(Y),p(V),"Z");break;case l.OPS.moveTo:Y=k[tt++],X=k[tt++],J.push("M",p(Y),p(X));break;case l.OPS.lineTo:Y=k[tt++],X=k[tt++],J.push("L",p(Y),p(X));break;case l.OPS.curveTo:Y=k[tt+4],X=k[tt+5],J.push("C",p(k[tt]),p(k[tt+1]),p(k[tt+2]),p(k[tt+3]),p(Y),p(X)),tt+=6;break;case l.OPS.curveTo2:J.push("C",p(Y),p(X),p(k[tt]),p(k[tt+1]),p(k[tt+2]),p(k[tt+3])),Y=k[tt+2],X=k[tt+3],tt+=4;break;case l.OPS.curveTo3:Y=k[tt+2],X=k[tt+3],J.push("C",p(k[tt]),p(k[tt+1]),p(Y),p(X),p(Y),p(X)),tt+=4;break;case l.OPS.closePath:J.push("Z");break}J=J.join(" "),$.path&&C.length>0&&C[0]!==l.OPS.rectangle&&C[0]!==l.OPS.moveTo?J=$.path.getAttributeNS(null,"d")+J:($.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append($.path)),$.path.setAttributeNS(null,"d",J),$.path.setAttributeNS(null,"fill","none"),$.element=$.path,$.setCurrentPoint(Y,X)}endPath(){const C=this.current;if(C.path=null,!this.pendingClip)return;if(!C.element){this.pendingClip=null;return}const k=`clippath${E++}`,$=this.svgFactory.createElement("svg:clipPath");$.setAttributeNS(null,"id",k),$.setAttributeNS(null,"transform",b(this.transformMatrix));const Y=C.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Y.setAttributeNS(null,"clip-rule","evenodd"):Y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,$.append(Y),this.defs.append($),C.activeClipUrl){C.clipGroup=null;for(const X of this.extraStack)X.clipGroup=null;$.setAttributeNS(null,"clip-path",C.activeClipUrl)}C.activeClipUrl=`url(#${k})`,this.tgrp=null}clip(C){this.pendingClip=C}closePath(){const C=this.current;if(C.path){const k=`${C.path.getAttributeNS(null,"d")}Z`;C.path.setAttributeNS(null,"d",k)}}setLeading(C){this.current.leading=-C}setTextRise(C){this.current.textRise=C}setTextRenderingMode(C){this.current.textRenderingMode=C}setHScale(C){this.current.textHScale=C/100}setRenderingIntent(C){}setFlatness(C){}setGState(C){for(const[k,$]of C)switch(k){case"LW":this.setLineWidth($);break;case"LC":this.setLineCap($);break;case"LJ":this.setLineJoin($);break;case"ML":this.setMiterLimit($);break;case"D":this.setDash($[0],$[1]);break;case"RI":this.setRenderingIntent($);break;case"FL":this.setFlatness($);break;case"Font":this.setFont($);break;case"CA":this.setStrokeAlpha($);break;case"ca":this.setFillAlpha($);break;default:(0,l.warn)(`Unimplemented graphic state operator ${k}`);break}}fill(){const C=this.current;C.element&&(C.element.setAttributeNS(null,"fill",C.fillColor),C.element.setAttributeNS(null,"fill-opacity",C.fillAlpha),this.endPath())}stroke(){const C=this.current;C.element&&(this._setStrokeAttributes(C.element),C.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(C,k=1){const $=this.current;let Y=$.dashArray;k!==1&&Y.length>0&&(Y=Y.map(function(X){return k*X})),C.setAttributeNS(null,"stroke",$.strokeColor),C.setAttributeNS(null,"stroke-opacity",$.strokeAlpha),C.setAttributeNS(null,"stroke-miterlimit",p($.miterLimit)),C.setAttributeNS(null,"stroke-linecap",$.lineCap),C.setAttributeNS(null,"stroke-linejoin",$.lineJoin),C.setAttributeNS(null,"stroke-width",p(k*$.lineWidth)+"px"),C.setAttributeNS(null,"stroke-dasharray",Y.map(p).join(" ")),C.setAttributeNS(null,"stroke-dashoffset",p(k*$.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y","0"),C.setAttributeNS(null,"width","1px"),C.setAttributeNS(null,"height","1px"),C.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(C)}paintImageXObject(C){const k=this.getObject(C);if(!k){(0,l.warn)(`Dependent image with object ID ${C} is not ready yet`);return}this.paintInlineImageXObject(k)}paintInlineImageXObject(C,k){const $=C.width,Y=C.height,X=d(C,this.forceDataSchema,!!k),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x","0"),J.setAttributeNS(null,"y","0"),J.setAttributeNS(null,"width",p($)),J.setAttributeNS(null,"height",p(Y)),this.current.element=J,this.clip("nonzero");const tt=this.svgFactory.createElement("svg:image");tt.setAttributeNS(w,"xlink:href",X),tt.setAttributeNS(null,"x","0"),tt.setAttributeNS(null,"y",p(-Y)),tt.setAttributeNS(null,"width",p($)+"px"),tt.setAttributeNS(null,"height",p(Y)+"px"),tt.setAttributeNS(null,"transform",`scale(${p(1/$)} ${p(-1/Y)})`),k?k.append(tt):this._ensureTransformGroup().append(tt)}paintImageMaskXObject(C){const k=this.getObject(C.data,C);if(k.bitmap){(0,l.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const $=this.current,Y=k.width,X=k.height,J=$.fillColor;$.maskId=`mask${y++}`;const tt=this.svgFactory.createElement("svg:mask");tt.setAttributeNS(null,"id",$.maskId);const _t=this.svgFactory.createElement("svg:rect");_t.setAttributeNS(null,"x","0"),_t.setAttributeNS(null,"y","0"),_t.setAttributeNS(null,"width",p(Y)),_t.setAttributeNS(null,"height",p(X)),_t.setAttributeNS(null,"fill",J),_t.setAttributeNS(null,"mask",`url(#${$.maskId})`),this.defs.append(tt),this._ensureTransformGroup().append(_t),this.paintInlineImageXObject(k,tt)}paintFormXObjectBegin(C,k){if(Array.isArray(C)&&C.length===6&&this.transform(C[0],C[1],C[2],C[3],C[4],C[5]),k){const $=k[2]-k[0],Y=k[3]-k[1],X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",k[0]),X.setAttributeNS(null,"y",k[1]),X.setAttributeNS(null,"width",p($)),X.setAttributeNS(null,"height",p(Y)),this.current.element=X,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(C){const k=this.svgFactory.create(C.width,C.height),$=this.svgFactory.createElement("svg:defs");k.append($),this.defs=$;const Y=this.svgFactory.createElement("svg:g");return Y.setAttributeNS(null,"transform",b(C.transform)),k.append(Y),this.svg=Y,k}_ensureClipGroup(){if(!this.current.clipGroup){const C=this.svgFactory.createElement("svg:g");C.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(C),this.current.clipGroup=C}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}a.SVGGraphics=B},(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class r{static textContent(l){const m=[],S={items:m,styles:Object.create(null)};function w(R){if(!R)return;let h=null;const u=R.name;if(u==="#text")h=R.value;else if(r.shouldBuildText(u))R?.attributes?.textContent?h=R.attributes.textContent:R.value&&(h=R.value);else return;if(h!==null&&m.push({str:h}),!!R.children)for(const d of R.children)w(d)}return w(l),S}static shouldBuildText(l){return!(l==="textarea"||l==="input"||l==="option"||l==="select")}}a.XfaText=r},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerRenderTask=void 0,a.renderTextLayer=b,a.updateTextLayer=E;var s=r(1),l=r(6);const m=1e5,S=30,w=.8,R=new Map;function h(y,P){let B;if(P&&s.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const U=document.createElement("canvas");U.width=U.height=y,B=U.getContext("2d",{alpha:!1})}return B}function u(y,P){const B=R.get(y);if(B)return B;const U=h(S,P);U.font=`${S}px ${y}`;const C=U.measureText("");let k=C.fontBoundingBoxAscent,$=Math.abs(C.fontBoundingBoxDescent);if(k){const X=k/(k+$);return R.set(y,X),U.canvas.width=U.canvas.height=0,X}U.strokeStyle="red",U.clearRect(0,0,S,S),U.strokeText("g",0,0);let Y=U.getImageData(0,0,S,S).data;$=0;for(let X=Y.length-1-3;X>=0;X-=4)if(Y[X]>0){$=Math.ceil(X/4/S);break}U.clearRect(0,0,S,S),U.strokeText("A",0,S),Y=U.getImageData(0,0,S,S).data,k=0;for(let X=0,J=Y.length;X<J;X+=4)if(Y[X]>0){k=S-Math.floor(X/4/S);break}if(U.canvas.width=U.canvas.height=0,k){const X=k/(k+$);return R.set(y,X),X}return R.set(y,w),w}function d(y,P,B){const U=document.createElement("span"),C={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};y._textDivs.push(U);const k=s.Util.transform(y._transform,P.transform);let $=Math.atan2(k[1],k[0]);const Y=B[P.fontName];Y.vertical&&($+=Math.PI/2);const X=Math.hypot(k[2],k[3]),J=X*u(Y.fontFamily,y._isOffscreenCanvasSupported);let tt,_t;$===0?(tt=k[4],_t=k[5]-J):(tt=k[4]+J*Math.sin($),_t=k[5]-J*Math.cos($));const mt="calc(var(--scale-factor)*",yt=U.style;y._container===y._rootContainer?(yt.left=`${(100*tt/y._pageWidth).toFixed(2)}%`,yt.top=`${(100*_t/y._pageHeight).toFixed(2)}%`):(yt.left=`${mt}${tt.toFixed(2)}px)`,yt.top=`${mt}${_t.toFixed(2)}px)`),yt.fontSize=`${mt}${X.toFixed(2)}px)`,yt.fontFamily=Y.fontFamily,C.fontSize=X,U.setAttribute("role","presentation"),U.textContent=P.str,U.dir=P.dir,y._fontInspectorEnabled&&(U.dataset.fontName=P.fontName),$!==0&&(C.angle=$*(180/Math.PI));let At=!1;if(P.str.length>1)At=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const V=Math.abs(P.transform[0]),H=Math.abs(P.transform[3]);V!==H&&Math.max(V,H)/Math.min(V,H)>1.5&&(At=!0)}At&&(C.canvasWidth=Y.vertical?P.height:P.width),y._textDivProperties.set(U,C),y._isReadableStream&&y._layoutText(U)}function A(y){const{div:P,scale:B,properties:U,ctx:C,prevFontSize:k,prevFontFamily:$}=y,{style:Y}=P;let X="";if(U.canvasWidth!==0&&U.hasText){const{fontFamily:J}=Y,{canvasWidth:tt,fontSize:_t}=U;(k!==_t||$!==J)&&(C.font=`${_t*B}px ${J}`,y.prevFontSize=_t,y.prevFontFamily=J);const{width:mt}=C.measureText(P.textContent);mt>0&&(X=`scaleX(${tt*B/mt})`)}U.angle!==0&&(X=`rotate(${U.angle}deg) ${X}`),X.length>0&&(Y.transform=X)}function _(y){if(y._canceled)return;const P=y._textDivs,B=y._capability;if(P.length>m){B.resolve();return}if(!y._isReadableStream)for(const C of P)y._layoutText(C);B.resolve()}class p{constructor({textContentSource:P,container:B,viewport:U,textDivs:C,textDivProperties:k,textContentItemsStr:$,isOffscreenCanvasSupported:Y}){this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=C||[],this._textContentItemsStr=$||[],this._isOffscreenCanvasSupported=Y,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=k||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:U.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,Y)};const{pageWidth:X,pageHeight:J,pageX:tt,pageY:_t}=U.rawDims;this._transform=[1,0,0,-1,-tt,_t+J],this._pageWidth=X,this._pageHeight=J,(0,l.setLayerDimensions)(B,U),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(P,B){for(const U of P){if(U.str===void 0){if(U.type==="beginMarkedContentProps"||U.type==="beginMarkedContent"){const C=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),U.id!==null&&this._container.setAttribute("id",`${U.id}`),C.append(this._container)}else U.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(U.str),d(this,U,B)}}_layoutText(P){const B=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,A(this._layoutTextParams),B.hasText&&this._container.append(P),B.hasEOL){const U=document.createElement("br");U.setAttribute("role","presentation"),this._container.append(U)}}_render(){const P=new s.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const U=()=>{this._reader.read().then(({value:C,done:k})=>{if(k){P.resolve();return}Object.assign(B,C.styles),this._processItems(C.items,B),U()},P.reject)};this._reader=this._textContentSource.getReader(),U()}else if(this._textContentSource){const{items:U,styles:C}=this._textContentSource;this._processItems(U,C),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{B=null,_(this)},this._capability.reject)}}a.TextLayerRenderTask=p;function b(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,l.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:P,viewport:B}=y,U=getComputedStyle(P),C=U.getPropertyValue("visibility"),k=parseFloat(U.getPropertyValue("--scale-factor"));C==="visible"&&(!k||Math.abs(k-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const $=new p(y);return $._render(),$}function E({container:y,viewport:P,textDivs:B,textDivProperties:U,isOffscreenCanvasSupported:C,mustRotate:k=!0,mustRescale:$=!0}){if(k&&(0,l.setLayerDimensions)(y,{rotation:P.rotation}),$){const Y=h(0,C),J={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Y};for(const tt of B)J.properties=U.get(tt),J.div=tt,A(J)}}},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayer=void 0;var s=r(1),l=r(4),m=r(28),S=r(33),w=r(6),R=r(34);class h{#t;#e=!1;#n=null;#a=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#i=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:d,pageIndex:A,div:_,accessibilityManager:p,annotationLayer:b,viewport:E,l10n:y}){const P=[m.FreeTextEditor,S.InkEditor,R.StampEditor];if(!h._initialized){h._initialized=!0;for(const B of P)B.initialize(y)}d.registerEditorTypes(P),this.#s=d,this.pageIndex=A,this.div=_,this.#t=p,this.#n=b,this.viewport=E,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(d){this.#s.updateToolbar(d)}updateMode(d=this.#s.getMode()){this.#p(),d===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),d!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",d===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",d===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",d===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(d){if(!d&&this.#s.getMode()!==s.AnnotationEditorType.INK)return;if(!d){for(const _ of this.#r.values())if(_.isEmpty()){_.setInBackground();return}}this.#h({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(d){this.#s.setEditingState(d)}addCommands(d){this.#s.addCommands(d)}enable(){this.div.style.pointerEvents="auto";const d=new Set;for(const _ of this.#r.values())_.enableEditing(),_.annotationElementId&&d.add(_.annotationElementId);if(!this.#n)return;const A=this.#n.getEditableAnnotations();for(const _ of A){if(_.hide(),this.#s.isDeletedAnnotationElement(_.data.id)||d.has(_.data.id))continue;const p=this.deserialize(_);p&&(this.addOrRebuild(p),p.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const d=new Set;for(const A of this.#r.values()){if(A.disableEditing(),!A.annotationElementId||A.serialize()!==null){d.add(A.annotationElementId);continue}this.getEditableAnnotation(A.annotationElementId)?.show(),A.remove()}if(this.#n){const A=this.#n.getEditableAnnotations();for(const _ of A){const{id:p}=_.data;d.has(p)||this.#s.isDeletedAnnotationElement(p)||_.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(d){return this.#n?.getEditableAnnotation(d)||null}setActiveEditor(d){this.#s.getActive()!==d&&this.#s.setActiveEditor(d)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#a)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#a)}attach(d){this.#r.set(d.id,d);const{annotationElementId:A}=d;A&&this.#s.isDeletedAnnotationElement(A)&&this.#s.removeDeletedAnnotationElement(d)}detach(d){this.#r.delete(d.id),this.#t?.removePointerInTextLayer(d.contentDiv),!this.#c&&d.annotationElementId&&this.#s.addDeletedAnnotationElement(d)}remove(d){this.detach(d),this.#s.removeEditor(d),d.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),d.div.remove(),d.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(d){d.parent!==this&&(d.annotationElementId&&(this.#s.addDeletedAnnotationElement(d.annotationElementId),l.AnnotationEditor.deleteAnnotationElement(d),d.annotationElementId=null),this.attach(d),d.parent?.detach(d),d.setParent(this),d.div&&d.isAttachedToDOM&&(d.div.remove(),this.div.append(d.div)))}add(d){if(this.changeParent(d),this.#s.addEditor(d),this.attach(d),!d.isAttachedToDOM){const A=d.render();this.div.append(A),d.isAttachedToDOM=!0}d.fixAndSetPosition(),d.onceAdded(),this.#s.addToAnnotationStorage(d)}moveEditorInDOM(d){if(!d.isAttachedToDOM)return;const{activeElement:A}=document;d.div.contains(A)&&(d._focusEventsAllowed=!1,setTimeout(()=>{d.div.contains(document.activeElement)?d._focusEventsAllowed=!0:(d.div.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),A.focus())},0)),d._structTreeParentId=this.#t?.moveElementInDOM(this.div,d.div,d.contentDiv,!0)}addOrRebuild(d){d.needsToBeRebuilt()?d.rebuild():this.add(d)}addUndoableEditor(d){const A=()=>d._uiManager.rebuild(d),_=()=>{d.remove()};this.addCommands({cmd:A,undo:_,mustExec:!1})}getNextId(){return this.#s.getId()}#f(d){switch(this.#s.getMode()){case s.AnnotationEditorType.FREETEXT:return new m.FreeTextEditor(d);case s.AnnotationEditorType.INK:return new S.InkEditor(d);case s.AnnotationEditorType.STAMP:return new R.StampEditor(d)}return null}pasteEditor(d,A){this.#s.updateToolbar(d),this.#s.updateMode(d);const{offsetX:_,offsetY:p}=this.#d(),b=this.getNextId(),E=this.#f({parent:this,id:b,x:_,y:p,uiManager:this.#s,isCentered:!0,...A});E&&this.add(E)}deserialize(d){switch(d.annotationType??d.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return m.FreeTextEditor.deserialize(d,this,this.#s);case s.AnnotationEditorType.INK:return S.InkEditor.deserialize(d,this,this.#s);case s.AnnotationEditorType.STAMP:return R.StampEditor.deserialize(d,this,this.#s)}return null}#h(d,A){const _=this.getNextId(),p=this.#f({parent:this,id:_,x:d.offsetX,y:d.offsetY,uiManager:this.#s,isCentered:A});return p&&this.add(p),p}#d(){const{x:d,y:A,width:_,height:p}=this.div.getBoundingClientRect(),b=Math.max(0,d),E=Math.max(0,A),y=Math.min(window.innerWidth,d+_),P=Math.min(window.innerHeight,A+p),B=(b+y)/2-d,U=(E+P)/2-A,[C,k]=this.viewport.rotation%180===0?[B,U]:[U,B];return{offsetX:C,offsetY:k}}addNewEditor(){this.#h(this.#d(),!0)}setSelected(d){this.#s.setSelected(d)}toggleSelected(d){this.#s.toggleSelected(d)}isSelected(d){return this.#s.isSelected(d)}unselect(d){this.#s.unselect(d)}pointerup(d){const{isMac:A}=s.FeatureTest.platform;if(!(d.button!==0||d.ctrlKey&&A)&&d.target===this.div&&this.#i){if(this.#i=!1,!this.#e){this.#e=!0;return}if(this.#s.getMode()===s.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#h(d,!1)}}pointerdown(d){if(this.#i){this.#i=!1;return}const{isMac:A}=s.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&A||d.target!==this.div)return;this.#i=!0;const _=this.#s.getActive();this.#e=!_||_.isEmpty()}findNewParent(d,A,_){const p=this.#s.findParent(A,_);return p===null||p===this?!1:(p.changeParent(d),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const d of this.#r.values())this.#t?.removePointerInTextLayer(d.contentDiv),d.setParent(null),d.isAttachedToDOM=!1,d.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const d of this.#r.values())d.isEmpty()&&d.remove();this.#l=!1}render({viewport:d}){this.viewport=d,(0,w.setLayerDimensions)(this.div,d);for(const A of this.#s.getEditors(this.pageIndex))this.add(A);this.updateMode()}update({viewport:d}){this.#s.commitOrRemove(),this.viewport=d,(0,w.setLayerDimensions)(this.div,{rotation:d.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:d,pageHeight:A}=this.viewport.rawDims;return[d,A]}}a.AnnotationEditorLayer=h},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FreeTextEditor=void 0;var s=r(1),l=r(5),m=r(4),S=r(29);class w extends m.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#a=this.editorDivKeydown.bind(this);#o;#r="";#i=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const h=w.prototype,u=_=>_.isEmpty(),d=l.AnnotationEditorUIManager.TRANSLATE_SMALL,A=l.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new l.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],h.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],h.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],h._translateEmpty,{args:[-d,0],checker:u}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h._translateEmpty,{args:[-A,0],checker:u}],[["ArrowRight","mac+ArrowRight"],h._translateEmpty,{args:[d,0],checker:u}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h._translateEmpty,{args:[A,0],checker:u}],[["ArrowUp","mac+ArrowUp"],h._translateEmpty,{args:[0,-d],checker:u}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h._translateEmpty,{args:[0,-A],checker:u}],[["ArrowDown","mac+ArrowDown"],h._translateEmpty,{args:[0,d],checker:u}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h._translateEmpty,{args:[0,A],checker:u}]]))}static _type="freetext";constructor(h){super({...h,name:"freeTextEditor"}),this.#o=h.color||w._defaultColor||m.AnnotationEditor._defaultLineColor,this.#l=h.fontSize||w._defaultFontSize}static initialize(h){m.AnnotationEditor.initialize(h,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const u=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(u.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,u){switch(h){case s.AnnotationEditorParamsType.FREETEXT_SIZE:w._defaultFontSize=u;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:w._defaultColor=u;break}}updateParams(h,u){switch(h){case s.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(u);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(u);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,w._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,w._defaultColor||m.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[s.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(h){const u=A=>{this.editorDiv.style.fontSize=`calc(${A}px * var(--scale-factor))`,this.translate(0,-(A-this.#l)*this.parentScale),this.#l=A,this.#d()},d=this.#l;this.addCommands({cmd:()=>{u(h)},undo:()=>{u(d)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(h){const u=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=h},undo:()=>{this.#o=this.editorDiv.style.color=u},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(h,u){this._uiManager.translateSelectedEditors(h,u,!0)}getInitialTranslation(){const h=this.parentScale;return[-w._internalPadding*h,-(w._internalPadding+this.#l)*h]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#a),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#a),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(h){this._focusEventsAllowed&&(super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#h(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const u=[];for(const d of h)u.push(d.innerText.replace(/\r\n?|\n/,""));return u.join(`
`)}#d(){const[h,u]=this.parentDimensions;let d;if(this.isAttachedToDOM)d=this.div.getBoundingClientRect();else{const{currentLayer:A,div:_}=this,p=_.style.display;_.style.display="hidden",A.div.append(this.div),d=_.getBoundingClientRect(),_.remove(),_.style.display=p}this.rotation%180===this.parentRotation%180?(this.width=d.width/h,this.height=d.height/u):(this.width=d.height/h,this.height=d.width/u),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const h=this.#r,u=this.#r=this.#h().trimEnd();if(h===u)return;const d=A=>{if(this.#r=A,!A){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{d(u)},undo:()=>{d(h)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(h){this.enterInEditMode()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enterInEditMode(),h.preventDefault())}editorDivKeydown(h){w._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}editorDivInput(h){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,u;this.width&&(h=this.x,u=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.enableEditing(),m.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(A=>this.editorDiv?.setAttribute("aria-label",A)),m.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(A=>this.editorDiv?.setAttribute("default-content",A)),this.editorDiv.contentEditable=!0;const{style:d}=this.editorDiv;if(d.fontSize=`calc(${this.#l}px * var(--scale-factor))`,d.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,l.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[A,_]=this.parentDimensions;if(this.annotationElementId){const{position:p}=this.#c;let[b,E]=this.getInitialTranslation();[b,E]=this.pageTranslationToScreen(b,E);const[y,P]=this.pageDimensions,[B,U]=this.pageTranslation;let C,k;switch(this.rotation){case 0:C=h+(p[0]-B)/y,k=u+this.height-(p[1]-U)/P;break;case 90:C=h+(p[0]-B)/y,k=u-(p[1]-U)/P,[b,E]=[E,-b];break;case 180:C=h-this.width+(p[0]-B)/y,k=u-(p[1]-U)/P,[b,E]=[-b,-E];break;case 270:C=h+(p[0]-B-this.height*P)/y,k=u+(p[1]-U-this.width*y)/P,[b,E]=[-E,b];break}this.setAt(C*A,k*_,b,E)}else this.setAt(h*A,u*_,this.width*A,this.height*_);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const h of this.#r.split(`
`)){const u=document.createElement("div");u.append(h?document.createTextNode(h):document.createElement("br")),this.editorDiv.append(u)}}get contentDiv(){return this.editorDiv}static deserialize(h,u,d){let A=null;if(h instanceof S.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:p,fontColor:b},rect:E,rotation:y,id:P},textContent:B,textPosition:U,parent:{page:{pageNumber:C}}}=h;if(!B||B.length===0)return null;A=h={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(b),fontSize:p,value:B.join(`
`),position:U,pageIndex:C-1,rect:E,rotation:y,id:P,deleted:!1}}const _=super.deserialize(h,u,d);return _.#l=h.fontSize,_.#o=s.Util.makeHexColor(...h.color),_.#r=h.value,_.annotationElementId=h.id||null,_.#c=A,_}serialize(h=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const u=w._internalPadding*this.parentScale,d=this.getRect(u,u),A=m.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),_={annotationType:s.AnnotationEditorType.FREETEXT,color:A,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:d,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return h?_:this.annotationElementId&&!this.#_(_)?null:(_.id=this.annotationElementId,_)}#_(h){const{value:u,fontSize:d,color:A,rect:_,pageIndex:p}=this.#c;return h.value!==u||h.fontSize!==d||h.rect.some((b,E)=>Math.abs(b-_[E])>=1)||h.color.some((b,E)=>b!==A[E])||h.pageIndex!==p}#g(h=!1){if(!this.annotationElementId)return;if(this.#d(),!h&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const u=w._internalPadding*this.parentScale;this.#c.rect=this.getRect(u,u)}}a.FreeTextEditor=w},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampAnnotationElement=a.InkAnnotationElement=a.FreeTextAnnotationElement=a.AnnotationLayer=void 0;var s=r(1),l=r(6),m=r(3),S=r(30),w=r(31),R=r(32);const h=1e3,u=9,d=new WeakSet;function A(j){return{width:j[2]-j[0],height:j[3]-j[1]}}class _{static create(v){switch(v.data.annotationType){case s.AnnotationType.LINK:return new b(v);case s.AnnotationType.TEXT:return new E(v);case s.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new P(v);case"Btn":return v.data.radioButton?new C(v):v.data.checkBox?new U(v):new k(v);case"Ch":return new $(v);case"Sig":return new B(v)}return new y(v);case s.AnnotationType.POPUP:return new Y(v);case s.AnnotationType.FREETEXT:return new J(v);case s.AnnotationType.LINE:return new tt(v);case s.AnnotationType.SQUARE:return new _t(v);case s.AnnotationType.CIRCLE:return new mt(v);case s.AnnotationType.POLYLINE:return new yt(v);case s.AnnotationType.CARET:return new V(v);case s.AnnotationType.INK:return new H(v);case s.AnnotationType.POLYGON:return new At(v);case s.AnnotationType.HIGHLIGHT:return new O(v);case s.AnnotationType.UNDERLINE:return new x(v);case s.AnnotationType.SQUIGGLY:return new g(v);case s.AnnotationType.STRIKEOUT:return new T(v);case s.AnnotationType.STAMP:return new I(v);case s.AnnotationType.FILEATTACHMENT:return new N(v);default:return new p(v)}}}class p{#t=!1;constructor(v,{isRenderable:D=!1,ignoreBorder:F=!1,createQuadrilaterals:z=!1}={}){this.isRenderable=D,this.data=v.data,this.layer=v.layer,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this.parent=v.parent,D&&(this.container=this._createContainer(F)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:v,contentsObj:D,richText:F}){return!!(v?.str||D?.str||F?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(v){const{data:D,parent:{page:F,viewport:z}}=this,q=document.createElement("section");q.setAttribute("data-annotation-id",D.id),this instanceof y||(q.tabIndex=h),q.style.zIndex=this.parent.zIndex++,this.data.popupRef&&q.setAttribute("aria-haspopup","dialog"),D.noRotate&&q.classList.add("norotate");const{pageWidth:W,pageHeight:Q,pageX:ot,pageY:St}=z.rawDims;if(!D.rect||this instanceof Y){const{rotation:bt}=D;return!D.hasOwnCanvas&&bt!==0&&this.setRotation(bt,q),q}const{width:ct,height:ht}=A(D.rect),ut=s.Util.normalizeRect([D.rect[0],F.view[3]-D.rect[1]+F.view[1],D.rect[2],F.view[3]-D.rect[3]+F.view[1]]);if(!v&&D.borderStyle.width>0){q.style.borderWidth=`${D.borderStyle.width}px`;const bt=D.borderStyle.horizontalCornerRadius,Et=D.borderStyle.verticalCornerRadius;if(bt>0||Et>0){const Tt=`calc(${bt}px * var(--scale-factor)) / calc(${Et}px * var(--scale-factor))`;q.style.borderRadius=Tt}else if(this instanceof C){const Tt=`calc(${ct}px * var(--scale-factor)) / calc(${ht}px * var(--scale-factor))`;q.style.borderRadius=Tt}switch(D.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:q.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:q.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:q.style.borderBottomStyle="solid";break}const Rt=D.borderColor||null;Rt?(this.#t=!0,q.style.borderColor=s.Util.makeHexColor(Rt[0]|0,Rt[1]|0,Rt[2]|0)):q.style.borderWidth=0}q.style.left=`${100*(ut[0]-ot)/W}%`,q.style.top=`${100*(ut[1]-St)/Q}%`;const{rotation:ft}=D;return D.hasOwnCanvas||ft===0?(q.style.width=`${100*ct/W}%`,q.style.height=`${100*ht/Q}%`):this.setRotation(ft,q),q}setRotation(v,D=this.container){if(!this.data.rect)return;const{pageWidth:F,pageHeight:z}=this.parent.viewport.rawDims,{width:q,height:W}=A(this.data.rect);let Q,ot;v%180===0?(Q=100*q/F,ot=100*W/z):(Q=100*W/F,ot=100*q/z),D.style.width=`${Q}%`,D.style.height=`${ot}%`,D.setAttribute("data-main-rotation",(360-v)%360)}get _commonActions(){const v=(D,F,z)=>{const q=z.detail[D],W=q[0],Q=q.slice(1);z.target.style[F]=S.ColorConverters[`${W}_HTML`](Q),this.annotationStorage.setValue(this.data.id,{[F]:S.ColorConverters[`${W}_rgb`](Q)})};return(0,s.shadow)(this,"_commonActions",{display:D=>{const{display:F}=D.detail,z=F%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:F===1||F===2})},print:D=>{this.annotationStorage.setValue(this.data.id,{noPrint:!D.detail.print})},hidden:D=>{const{hidden:F}=D.detail;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:F,noView:F})},focus:D=>{setTimeout(()=>D.target.focus({preventScroll:!1}),0)},userName:D=>{D.target.title=D.detail.userName},readonly:D=>{D.target.disabled=D.detail.readonly},required:D=>{this._setRequired(D.target,D.detail.required)},bgColor:D=>{v("bgColor","backgroundColor",D)},fillColor:D=>{v("fillColor","backgroundColor",D)},fgColor:D=>{v("fgColor","color",D)},textColor:D=>{v("textColor","color",D)},borderColor:D=>{v("borderColor","borderColor",D)},strokeColor:D=>{v("strokeColor","borderColor",D)},rotation:D=>{const F=D.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(v,D){const F=this._commonActions;for(const z of Object.keys(D.detail))(v[z]||F[z])?.(D)}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;const D=this.annotationStorage.getRawValue(this.data.id);if(!D)return;const F=this._commonActions;for(const[z,q]of Object.entries(D)){const W=F[z];if(W){const Q={detail:{[z]:q},target:v};W(Q),delete D[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:v}=this.data;if(!v)return;const[D,F,z,q]=this.data.rect;if(v.length===1){const[,{x:Et,y:Rt},{x:Tt,y:Dt}]=v[0];if(z===Et&&q===Rt&&D===Tt&&F===Dt)return}const{style:W}=this.container;let Q;if(this.#t){const{borderColor:Et,borderWidth:Rt}=W;W.borderWidth=0,Q=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Et}" stroke-width="${Rt}">`],this.container.classList.add("hasBorder")}const ot=z-D,St=q-F,{svgFactory:ct}=this,ht=ct.createElement("svg");ht.classList.add("quadrilateralsContainer"),ht.setAttribute("width",0),ht.setAttribute("height",0);const ut=ct.createElement("defs");ht.append(ut);const ft=ct.createElement("clipPath"),bt=`clippath_${this.data.id}`;ft.setAttribute("id",bt),ft.setAttribute("clipPathUnits","objectBoundingBox"),ut.append(ft);for(const[,{x:Et,y:Rt},{x:Tt,y:Dt}]of v){const Ft=ct.createElement("rect"),zt=(Tt-D)/ot,ue=(q-Rt)/St,Gt=(Et-Tt)/ot,xe=(Rt-Dt)/St;Ft.setAttribute("x",zt),Ft.setAttribute("y",ue),Ft.setAttribute("width",Gt),Ft.setAttribute("height",xe),ft.append(Ft),Q?.push(`<rect vector-effect="non-scaling-stroke" x="${zt}" y="${ue}" width="${Gt}" height="${xe}"/>`)}this.#t&&(Q.push("</g></svg>')"),W.backgroundImage=Q.join("")),this.container.append(ht),this.container.style.clipPath=`url(#${bt})`}_createPopup(){const{container:v,data:D}=this;v.setAttribute("aria-haspopup","dialog");const F=new Y({data:{color:D.color,titleObj:D.titleObj,modificationDate:D.modificationDate,contentsObj:D.contentsObj,richText:D.richText,parentRect:D.rect,borderStyle:0,id:`popup_${D.id}`,rotation:D.rotation},parent:this.parent,elements:[this]});this.parent.div.append(F.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v,D=null){const F=[];if(this._fieldObjects){const z=this._fieldObjects[v];if(z)for(const{page:q,id:W,exportValues:Q}of z){if(q===-1||W===D)continue;const ot=typeof Q=="string"?Q:null,St=document.querySelector(`[data-element-id="${W}"]`);if(St&&!d.has(St)){(0,s.warn)(`_getElementsByName - element not allowed: ${W}`);continue}F.push({id:W,exportValue:ot,domElement:St})}return F}for(const z of document.getElementsByName(v)){const{exportValue:q}=z,W=z.getAttribute("data-element-id");W!==D&&d.has(z)&&F.push({id:W,exportValue:q,domElement:z})}return F}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const v=this.getElementsToTriggerPopup();if(Array.isArray(v))for(const D of v)D.classList.add("highlightArea");else v.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:v,data:{id:D}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:v,editId:D})})}}class b extends p{constructor(v,D=null){super(v,{isRenderable:!0,ignoreBorder:!!D?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=v.data.isTooltipOnly}render(){const{data:v,linkService:D}=this,F=document.createElement("a");F.setAttribute("data-element-id",v.id);let z=!1;return v.url?(D.addLinkAttributes(F,v.url,v.newWindow),z=!0):v.action?(this._bindNamedAction(F,v.action),z=!0):v.attachment?(this._bindAttachment(F,v.attachment),z=!0):v.setOCGState?(this.#e(F,v.setOCGState),z=!0):v.dest?(this._bindLink(F,v.dest),z=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(F,v),z=!0),v.resetForm?(this._bindResetFormAction(F,v.resetForm),z=!0):this.isTooltipOnly&&!z&&(this._bindLink(F,""),z=!0)),this.container.classList.add("linkAnnotation"),z&&this.container.append(F),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(v,D){v.href=this.linkService.getDestinationHash(D),v.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&this.#t()}_bindNamedAction(v,D){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(D),!1),this.#t()}_bindAttachment(v,D){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,D.content,D.filename),!1),this.#t()}#e(v,D){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeSetOCGState(D),!1),this.#t()}_bindJSAction(v,D){v.href=this.linkService.getAnchorUrl("");const F=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const z of Object.keys(D.actions)){const q=F.get(z);q&&(v[q]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:z}}),!1))}v.onclick||(v.onclick=()=>!1),this.#t()}_bindResetFormAction(v,D){const F=v.onclick;if(F||(v.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),F||(v.onclick=()=>!1);return}v.onclick=()=>{F?.();const{fields:z,refs:q,include:W}=D,Q=[];if(z.length!==0||q.length!==0){const ct=new Set(q);for(const ht of z){const ut=this._fieldObjects[ht]||[];for(const{id:ft}of ut)ct.add(ft)}for(const ht of Object.values(this._fieldObjects))for(const ut of ht)ct.has(ut.id)===W&&Q.push(ut)}else for(const ct of Object.values(this._fieldObjects))Q.push(...ct);const ot=this.annotationStorage,St=[];for(const ct of Q){const{id:ht}=ct;switch(St.push(ht),ct.type){case"text":{const ft=ct.defaultValue||"";ot.setValue(ht,{value:ft});break}case"checkbox":case"radiobutton":{const ft=ct.defaultValue===ct.exportValues;ot.setValue(ht,{value:ft});break}case"combobox":case"listbox":{const ft=ct.defaultValue||"";ot.setValue(ht,{value:ft});break}default:continue}const ut=document.querySelector(`[data-element-id="${ht}"]`);if(ut){if(!d.has(ut)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${ht}`);continue}}else continue;ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:St,name:"ResetForm"}}),!1}}}class E extends p{constructor(v){super(v,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const v=document.createElement("img");return v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(v),this.container}}class y extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(v){this.data.hasOwnCanvas&&(v.previousSibling?.nodeName==="CANVAS"&&(v.previousSibling.hidden=!0),v.hidden=!1)}_getKeyModifier(v){const{isWin:D,isMac:F}=s.FeatureTest.platform;return D&&v.ctrlKey||F&&v.metaKey}_setEventListener(v,D,F,z,q){F.includes("mouse")?v.addEventListener(F,W=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:q(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):v.addEventListener(F,W=>{if(F==="blur"){if(!D.focused||!W.relatedTarget)return;D.focused=!1}else if(F==="focus"){if(D.focused)return;D.focused=!0}q&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:q(W)}})})}_setEventListeners(v,D,F,z){for(const[q,W]of F)(W==="Action"||this.data.actions?.[W])&&((W==="Focus"||W==="Blur")&&(D||={focused:!1}),this._setEventListener(v,D,q,W,z),W==="Focus"&&!this.data.actions?.Blur?this._setEventListener(v,D,"blur","Blur",null):W==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(v,D,"focus","Focus",null))}_setBackgroundColor(v){const D=this.data.backgroundColor||null;v.style.backgroundColor=D===null?"transparent":s.Util.makeHexColor(D[0],D[1],D[2])}_setTextStyle(v){const D=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||u,q=v.style;let W;const Q=2,ot=St=>Math.round(10*St)/10;if(this.data.multiLine){const St=Math.abs(this.data.rect[3]-this.data.rect[1]-Q),ct=Math.round(St/(s.LINE_FACTOR*z))||1,ht=St/ct;W=Math.min(z,ot(ht/s.LINE_FACTOR))}else{const St=Math.abs(this.data.rect[3]-this.data.rect[1]-Q);W=Math.min(z,ot(St/s.LINE_FACTOR))}q.fontSize=`calc(${W}px * var(--scale-factor))`,q.color=s.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(q.textAlign=D[this.data.textAlignment])}_setRequired(v,D){D?v.setAttribute("required",!0):v.removeAttribute("required"),v.setAttribute("aria-required",D)}}class P extends y{constructor(v){const D=v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue;super(v,{isRenderable:D})}setPropertyOnSiblings(v,D,F,z){const q=this.annotationStorage;for(const W of this._getElementsByName(v.name,v.id))W.domElement&&(W.domElement[D]=F),q.setValue(W.id,{[z]:F})}render(){const v=this.annotationStorage,D=this.data.id;this.container.classList.add("textWidgetAnnotation");let F=null;if(this.renderForms){const z=v.getValue(D,{value:this.data.fieldValue});let q=z.value||"";const W=v.getValue(D,{charLimit:this.data.maxLen}).charLimit;W&&q.length>W&&(q=q.slice(0,W));let Q=z.formattedValue||this.data.textContent?.join(`
`)||null;Q&&this.data.comb&&(Q=Q.replaceAll(/\s+/g,""));const ot={userValue:q,formattedValue:Q,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=Q??q,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",Q??q),this.data.doNotScroll&&(F.style.overflowX="hidden")),this.data.hasOwnCanvas&&(F.hidden=!0),d.add(F),F.setAttribute("data-element-id",D),F.disabled=this.data.readOnly,F.name=this.data.fieldName,F.tabIndex=h,this._setRequired(F,this.data.required),W&&(F.maxLength=W),F.addEventListener("input",ct=>{v.setValue(D,{value:ct.target.value}),this.setPropertyOnSiblings(F,"value",ct.target.value,"value"),ot.formattedValue=null}),F.addEventListener("resetform",ct=>{const ht=this.data.defaultFieldValue??"";F.value=ot.userValue=ht,ot.formattedValue=null});let St=ct=>{const{formattedValue:ht}=ot;ht!=null&&(ct.target.value=ht),ct.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",ht=>{if(ot.focused)return;const{target:ut}=ht;ot.userValue&&(ut.value=ot.userValue),ot.lastCommittedValue=ut.value,ot.commitKey=1,ot.focused=!0}),F.addEventListener("updatefromsandbox",ht=>{this.showElementAndHideCanvas(ht.target);const ut={value(ft){ot.userValue=ft.detail.value??"",v.setValue(D,{value:ot.userValue.toString()}),ft.target.value=ot.userValue},formattedValue(ft){const{formattedValue:bt}=ft.detail;ot.formattedValue=bt,bt!=null&&ft.target!==document.activeElement&&(ft.target.value=bt),v.setValue(D,{formattedValue:bt})},selRange(ft){ft.target.setSelectionRange(...ft.detail.selRange)},charLimit:ft=>{const{charLimit:bt}=ft.detail,{target:Et}=ft;if(bt===0){Et.removeAttribute("maxLength");return}Et.setAttribute("maxLength",bt);let Rt=ot.userValue;!Rt||Rt.length<=bt||(Rt=Rt.slice(0,bt),Et.value=ot.userValue=Rt,v.setValue(D,{value:Rt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:Rt,willCommit:!0,commitKey:1,selStart:Et.selectionStart,selEnd:Et.selectionEnd}}))}};this._dispatchEventFromSandbox(ut,ht)}),F.addEventListener("keydown",ht=>{ot.commitKey=1;let ut=-1;if(ht.key==="Escape"?ut=0:ht.key==="Enter"&&!this.data.multiLine?ut=2:ht.key==="Tab"&&(ot.commitKey=3),ut===-1)return;const{value:ft}=ht.target;ot.lastCommittedValue!==ft&&(ot.lastCommittedValue=ft,ot.userValue=ft,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:ft,willCommit:!0,commitKey:ut,selStart:ht.target.selectionStart,selEnd:ht.target.selectionEnd}}))});const ct=St;St=null,F.addEventListener("blur",ht=>{if(!ot.focused||!ht.relatedTarget)return;ot.focused=!1;const{value:ut}=ht.target;ot.userValue=ut,ot.lastCommittedValue!==ut&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:ut,willCommit:!0,commitKey:ot.commitKey,selStart:ht.target.selectionStart,selEnd:ht.target.selectionEnd}}),ct(ht)}),this.data.actions?.Keystroke&&F.addEventListener("beforeinput",ht=>{ot.lastCommittedValue=null;const{data:ut,target:ft}=ht,{value:bt,selectionStart:Et,selectionEnd:Rt}=ft;let Tt=Et,Dt=Rt;switch(ht.inputType){case"deleteWordBackward":{const Ft=bt.substring(0,Et).match(/\w*[^\w]*$/);Ft&&(Tt-=Ft[0].length);break}case"deleteWordForward":{const Ft=bt.substring(Et).match(/^[^\w]*\w*/);Ft&&(Dt+=Ft[0].length);break}case"deleteContentBackward":Et===Rt&&(Tt-=1);break;case"deleteContentForward":Et===Rt&&(Dt+=1);break}ht.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:bt,change:ut||"",willCommit:!1,selStart:Tt,selEnd:Dt}})}),this._setEventListeners(F,ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ht=>ht.target.value)}if(St&&F.addEventListener("blur",St),this.data.comb){const ht=(this.data.rect[2]-this.data.rect[0])/W;F.classList.add("comb"),F.style.letterSpacing=`calc(${ht}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class B extends y{constructor(v){super(v,{isRenderable:!!v.data.hasOwnCanvas})}}class U extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){const v=this.annotationStorage,D=this.data,F=D.id;let z=v.getValue(F,{value:D.exportValue===D.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",v.setValue(F,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const q=document.createElement("input");return d.add(q),q.setAttribute("data-element-id",F),q.disabled=D.readOnly,this._setRequired(q,this.data.required),q.type="checkbox",q.name=D.fieldName,z&&q.setAttribute("checked",!0),q.setAttribute("exportValue",D.exportValue),q.tabIndex=h,q.addEventListener("change",W=>{const{name:Q,checked:ot}=W.target;for(const St of this._getElementsByName(Q,F)){const ct=ot&&St.exportValue===D.exportValue;St.domElement&&(St.domElement.checked=ct),v.setValue(St.id,{value:ct})}v.setValue(F,{value:ot})}),q.addEventListener("resetform",W=>{const Q=D.defaultFieldValue||"Off";W.target.checked=Q===D.exportValue}),this.enableScripting&&this.hasJSActions&&(q.addEventListener("updatefromsandbox",W=>{const Q={value(ot){ot.target.checked=ot.detail.value!=="Off",v.setValue(F,{value:ot.target.checked})}};this._dispatchEventFromSandbox(Q,W)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class C extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const v=this.annotationStorage,D=this.data,F=D.id;let z=v.getValue(F,{value:D.fieldValue===D.buttonValue}).value;typeof z=="string"&&(z=z!==D.buttonValue,v.setValue(F,{value:z}));const q=document.createElement("input");if(d.add(q),q.setAttribute("data-element-id",F),q.disabled=D.readOnly,this._setRequired(q,this.data.required),q.type="radio",q.name=D.fieldName,z&&q.setAttribute("checked",!0),q.tabIndex=h,q.addEventListener("change",W=>{const{name:Q,checked:ot}=W.target;for(const St of this._getElementsByName(Q,F))v.setValue(St.id,{value:!1});v.setValue(F,{value:ot})}),q.addEventListener("resetform",W=>{const Q=D.defaultFieldValue;W.target.checked=Q!=null&&Q===D.buttonValue}),this.enableScripting&&this.hasJSActions){const W=D.buttonValue;q.addEventListener("updatefromsandbox",Q=>{const ot={value:St=>{const ct=W===St.detail.value;for(const ht of this._getElementsByName(St.target.name)){const ut=ct&&ht.id===F;ht.domElement&&(ht.domElement.checked=ut),v.setValue(ht.id,{value:ut})}}};this._dispatchEventFromSandbox(ot,Q)}),this._setEventListeners(q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)}return this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class k extends b{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){const v=super.render();v.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(v.title=this.data.alternativeText);const D=v.lastChild;return this.enableScripting&&this.hasJSActions&&D&&(this._setDefaultPropertiesFromJS(D),D.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),v}}class $ extends y{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const v=this.annotationStorage,D=this.data.id,F=v.getValue(D,{value:this.data.fieldValue}),z=document.createElement("select");d.add(z),z.setAttribute("data-element-id",D),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=h;let q=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",ct=>{const ht=this.data.defaultFieldValue;for(const ut of z.options)ut.selected=ut.value===ht});for(const ct of this.data.options){const ht=document.createElement("option");ht.textContent=ct.displayValue,ht.value=ct.exportValue,F.value.includes(ct.exportValue)&&(ht.setAttribute("selected",!0),q=!1),z.append(ht)}let W=null;if(q){const ct=document.createElement("option");ct.value=" ",ct.setAttribute("hidden",!0),ct.setAttribute("selected",!0),z.prepend(ct),W=()=>{ct.remove(),z.removeEventListener("input",W),W=null},z.addEventListener("input",W)}const Q=ct=>{const ht=ct?"value":"textContent",{options:ut,multiple:ft}=z;return ft?Array.prototype.filter.call(ut,bt=>bt.selected).map(bt=>bt[ht]):ut.selectedIndex===-1?null:ut[ut.selectedIndex][ht]};let ot=Q(!1);const St=ct=>{const ht=ct.target.options;return Array.prototype.map.call(ht,ut=>({displayValue:ut.textContent,exportValue:ut.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",ct=>{const ht={value(ut){W?.();const ft=ut.detail.value,bt=new Set(Array.isArray(ft)?ft:[ft]);for(const Et of z.options)Et.selected=bt.has(Et.value);v.setValue(D,{value:Q(!0)}),ot=Q(!1)},multipleSelection(ut){z.multiple=!0},remove(ut){const ft=z.options,bt=ut.detail.remove;ft[bt].selected=!1,z.remove(bt),ft.length>0&&Array.prototype.findIndex.call(ft,Rt=>Rt.selected)===-1&&(ft[0].selected=!0),v.setValue(D,{value:Q(!0),items:St(ut)}),ot=Q(!1)},clear(ut){for(;z.length!==0;)z.remove(0);v.setValue(D,{value:null,items:[]}),ot=Q(!1)},insert(ut){const{index:ft,displayValue:bt,exportValue:Et}=ut.detail.insert,Rt=z.children[ft],Tt=document.createElement("option");Tt.textContent=bt,Tt.value=Et,Rt?Rt.before(Tt):z.append(Tt),v.setValue(D,{value:Q(!0),items:St(ut)}),ot=Q(!1)},items(ut){const{items:ft}=ut.detail;for(;z.length!==0;)z.remove(0);for(const bt of ft){const{displayValue:Et,exportValue:Rt}=bt,Tt=document.createElement("option");Tt.textContent=Et,Tt.value=Rt,z.append(Tt)}z.options.length>0&&(z.options[0].selected=!0),v.setValue(D,{value:Q(!0),items:St(ut)}),ot=Q(!1)},indices(ut){const ft=new Set(ut.detail.indices);for(const bt of ut.target.options)bt.selected=ft.has(bt.index);v.setValue(D,{value:Q(!0)}),ot=Q(!1)},editable(ut){ut.target.disabled=!ut.detail.editable}};this._dispatchEventFromSandbox(ht,ct)}),z.addEventListener("input",ct=>{const ht=Q(!0);v.setValue(D,{value:ht}),ct.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:ot,changeEx:ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ct=>ct.target.value)):z.addEventListener("input",function(ct){v.setValue(D,{value:Q(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class Y extends p{constructor(v){const{data:D,elements:F}=v;super(v,{isRenderable:p._hasPopupData(D)}),this.elements=F}render(){this.container.classList.add("popupAnnotation");const v=new X({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),D=[];for(const F of this.elements)F.popup=v,D.push(F.data.id),F.addHighlightArea();return this.container.setAttribute("aria-controls",D.map(F=>`${s.AnnotationPrefix}${F}`).join(",")),this.container}}class X{#t=null;#e=this.#u.bind(this);#n=this.#S.bind(this);#a=this.#E.bind(this);#o=this.#y.bind(this);#r=null;#i=null;#l=null;#c=null;#s=null;#f=null;#h=!1;#d=null;#p=null;#_=null;#g=null;#m=!1;constructor({container:v,color:D,elements:F,titleObj:z,modificationDate:q,contentsObj:W,richText:Q,parent:ot,rect:St,parentRect:ct,open:ht}){this.#i=v,this.#g=z,this.#l=W,this.#_=Q,this.#s=ot,this.#r=D,this.#p=St,this.#f=ct,this.#c=F;const ut=l.PDFDateString.toDateObject(q);ut&&(this.#t=ot.l10n.get("annotation_date_string",{date:ut.toLocaleDateString(),time:ut.toLocaleTimeString()})),this.trigger=F.flatMap(ft=>ft.getElementsToTriggerPopup());for(const ft of this.trigger)ft.addEventListener("click",this.#o),ft.addEventListener("mouseenter",this.#a),ft.addEventListener("mouseleave",this.#n),ft.classList.add("popupTriggerArea");for(const ft of F)ft.container?.addEventListener("keydown",this.#e);this.#i.hidden=!0,ht&&this.#y()}render(){if(this.#d)return;const{page:{view:v},viewport:{rawDims:{pageWidth:D,pageHeight:F,pageX:z,pageY:q}}}=this.#s,W=this.#d=document.createElement("div");if(W.className="popup",this.#r){const Ft=W.style.outlineColor=s.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?W.style.backgroundColor=`color-mix(in srgb, ${Ft} 30%, white)`:W.style.backgroundColor=s.Util.makeHexColor(...this.#r.map(ue=>Math.floor(.7*(255-ue)+ue)))}const Q=document.createElement("span");Q.className="header";const ot=document.createElement("h1");if(Q.append(ot),{dir:ot.dir,str:ot.textContent}=this.#g,W.append(Q),this.#t){const Ft=document.createElement("span");Ft.classList.add("popupDate"),this.#t.then(zt=>{Ft.textContent=zt}),Q.append(Ft)}const St=this.#l,ct=this.#_;if(ct?.str&&(!St?.str||St.str===ct.str))R.XfaLayer.render({xfaHtml:ct.html,intent:"richText",div:W}),W.lastChild.classList.add("richText","popupContent");else{const Ft=this._formatContents(St);W.append(Ft)}let ht=!!this.#f,ut=ht?this.#f:this.#p;for(const Ft of this.#c)if(!ut||s.Util.intersect(Ft.data.rect,ut)!==null){ut=Ft.data.rect,ht=!0;break}const ft=s.Util.normalizeRect([ut[0],v[3]-ut[1]+v[1],ut[2],v[3]-ut[3]+v[1]]),Et=ht?ut[2]-ut[0]+5:0,Rt=ft[0]+Et,Tt=ft[1],{style:Dt}=this.#i;Dt.left=`${100*(Rt-z)/D}%`,Dt.top=`${100*(Tt-q)/F}%`,this.#i.append(W)}_formatContents({str:v,dir:D}){const F=document.createElement("p");F.classList.add("popupContent"),F.dir=D;const z=v.split(/(?:\r\n?|\n)/);for(let q=0,W=z.length;q<W;++q){const Q=z[q];F.append(document.createTextNode(Q)),q<W-1&&F.append(document.createElement("br"))}return F}#u(v){v.altKey||v.shiftKey||v.ctrlKey||v.metaKey||(v.key==="Enter"||v.key==="Escape"&&this.#h)&&this.#y()}#y(){this.#h=!this.#h,this.#h?(this.#E(),this.#i.addEventListener("click",this.#o),this.#i.addEventListener("keydown",this.#e)):(this.#S(),this.#i.removeEventListener("click",this.#o),this.#i.removeEventListener("keydown",this.#e))}#E(){this.#d||this.render(),this.isVisible?this.#h&&this.#i.classList.add("focused"):(this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#S(){this.#i.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#i.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class J extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.textContent=v.data.textContent,this.textPosition=v.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const v=document.createElement("div");v.classList.add("annotationTextContent"),v.setAttribute("role","comment");for(const D of this.textContent){const F=document.createElement("span");F.textContent=D,v.append(F)}this.container.append(v)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}a.FreeTextAnnotationElement=J;class tt extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const v=this.data,{width:D,height:F}=A(v.rect),z=this.svgFactory.create(D,F,!0),q=this.#t=this.svgFactory.createElement("svg:line");return q.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),q.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),q.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),q.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),q.setAttribute("stroke-width",v.borderStyle.width||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),z.append(q),this.container.append(z),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _t extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const v=this.data,{width:D,height:F}=A(v.rect),z=this.svgFactory.create(D,F,!0),q=v.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",q/2),W.setAttribute("y",q/2),W.setAttribute("width",D-q),W.setAttribute("height",F-q),W.setAttribute("stroke-width",q||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),z.append(W),this.container.append(z),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class mt extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const v=this.data,{width:D,height:F}=A(v.rect),z=this.svgFactory.create(D,F,!0),q=v.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",D/2),W.setAttribute("cy",F/2),W.setAttribute("rx",D/2-q/2),W.setAttribute("ry",F/2-q/2),W.setAttribute("stroke-width",q||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),z.append(W),this.container.append(z),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yt extends p{#t=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:D,height:F}=A(v.rect),z=this.svgFactory.create(D,F,!0);let q=[];for(const Q of v.vertices){const ot=Q.x-v.rect[0],St=v.rect[3]-Q.y;q.push(ot+","+St)}q=q.join(" ");const W=this.#t=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",q),W.setAttribute("stroke-width",v.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),z.append(W),this.container.append(z),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class At extends yt{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class H extends p{#t=[];constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:D,height:F}=A(v.rect),z=this.svgFactory.create(D,F,!0);for(const q of v.inkLists){let W=[];for(const ot of q){const St=ot.x-v.rect[0],ct=v.rect[3]-ot.y;W.push(`${St},${ct}`)}W=W.join(" ");const Q=this.svgFactory.createElement(this.svgElementName);this.#t.push(Q),Q.setAttribute("points",W),Q.setAttribute("stroke-width",v.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),!v.popupRef&&this.hasPopupData&&this._createPopup(),z.append(Q)}return this.container.append(z),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}a.InkAnnotationElement=H;class O extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class x extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class g extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class T extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class I extends p{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}a.StampAnnotationElement=I;class N extends p{#t=null;constructor(v){super(v,{isRenderable:!0});const{filename:D,content:F}=this.data.file;this.filename=(0,l.getFilenameFromUrl)(D,!0),this.content=F,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:D,content:F})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:v,data:D}=this;let F;D.hasAppearance||D.fillAlpha===0?F=document.createElement("div"):(F=document.createElement("img"),F.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(F.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),F.addEventListener("dblclick",this.#e.bind(this)),this.#t=F;const{isMac:z}=s.FeatureTest.platform;return v.addEventListener("keydown",q=>{q.key==="Enter"&&(z?q.metaKey:q.ctrlKey)&&this.#e()}),!D.popupRef&&this.hasPopupData?this._createPopup():F.classList.add("popupTriggerArea"),v.append(F),v}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class G{#t=null;#e=null;#n=new Map;constructor({div:v,accessibilityManager:D,annotationCanvasMap:F,l10n:z,page:q,viewport:W}){this.div=v,this.#t=D,this.#e=F,this.l10n=z,this.page=q,this.viewport=W,this.zIndex=0,this.l10n||=w.NullL10n}#a(v,D){const F=v.firstChild||v;F.id=`${s.AnnotationPrefix}${D}`,this.div.append(v),this.#t?.moveElementInDOM(this.div,v,F,!1)}async render(v){const{annotations:D}=v,F=this.div;(0,l.setLayerDimensions)(F,this.viewport);const z=new Map,q={data:null,layer:F,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:v.renderForms!==!1,svgFactory:new l.DOMSVGFactory,annotationStorage:v.annotationStorage||new m.AnnotationStorage,enableScripting:v.enableScripting===!0,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,parent:this,elements:null};for(const W of D){if(W.noHTML)continue;const Q=W.annotationType===s.AnnotationType.POPUP;if(Q){const ct=z.get(W.id);if(!ct)continue;q.elements=ct}else{const{width:ct,height:ht}=A(W.rect);if(ct<=0||ht<=0)continue}q.data=W;const ot=_.create(q);if(!ot.isRenderable)continue;if(!Q&&W.popupRef){const ct=z.get(W.popupRef);ct?ct.push(ot):z.set(W.popupRef,[ot])}ot.annotationEditorType>0&&this.#n.set(ot.data.id,ot);const St=ot.render();W.hidden&&(St.style.visibility="hidden"),this.#a(St,W.id)}this.#o(),await this.l10n.translate(F)}update({viewport:v}){const D=this.div;this.viewport=v,(0,l.setLayerDimensions)(D,{rotation:v.rotation}),this.#o(),D.hidden=!1}#o(){if(!this.#e)return;const v=this.div;for(const[D,F]of this.#e){const z=v.querySelector(`[data-annotation-id="${D}"]`);if(!z)continue;const{firstChild:q}=z;q?q.nodeName==="CANVAS"?q.replaceWith(F):q.before(F):z.append(F)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(v){return this.#n.get(v)}}a.AnnotationLayer=G},(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function r(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function s(m){return Math.max(0,Math.min(255,255*m))}class l{static CMYK_G([S,w,R,h]){return["G",1-Math.min(1,.3*S+.59*R+.11*w+h)]}static G_CMYK([S]){return["CMYK",0,0,0,1-S]}static G_RGB([S]){return["RGB",S,S,S]}static G_rgb([S]){return S=s(S),[S,S,S]}static G_HTML([S]){const w=r(S);return`#${w}${w}${w}`}static RGB_G([S,w,R]){return["G",.3*S+.59*w+.11*R]}static RGB_rgb(S){return S.map(s)}static RGB_HTML(S){return`#${S.map(r).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([S,w,R,h]){return["RGB",1-Math.min(1,S+h),1-Math.min(1,R+h),1-Math.min(1,w+h)]}static CMYK_rgb([S,w,R,h]){return[s(1-Math.min(1,S+h)),s(1-Math.min(1,R+h)),s(1-Math.min(1,w+h))]}static CMYK_HTML(S){const w=this.CMYK_RGB(S).slice(1);return this.RGB_HTML(w)}static RGB_CMYK([S,w,R]){const h=1-S,u=1-w,d=1-R,A=Math.min(h,u,d);return["CMYK",h,u,d,A]}}a.ColorConverters=l},(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NullL10n=void 0,a.getL10nFallback=s;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};r.print_progress_percent="{{progress}}%";function s(S,w){switch(S){case"find_match_count":S=`find_match_count[${w.total===1?"one":"other"}]`;break;case"find_match_count_limit":S=`find_match_count_limit[${w.limit===1?"one":"other"}]`;break}return r[S]||""}function l(S,w){return w?S.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(R,h)=>h in w?w[h]:"{{"+h+"}}"):S}const m={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(S,w=null,R=s(S,w)){return l(R,w)},async translate(S){}};a.NullL10n=m},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var s=r(25);class l{static setupStorage(S,w,R,h,u){const d=h.getValue(w,{value:null});switch(R.name){case"textarea":if(d.value!==null&&(S.textContent=d.value),u==="print")break;S.addEventListener("input",A=>{h.setValue(w,{value:A.target.value})});break;case"input":if(R.attributes.type==="radio"||R.attributes.type==="checkbox"){if(d.value===R.attributes.xfaOn?S.setAttribute("checked",!0):d.value===R.attributes.xfaOff&&S.removeAttribute("checked"),u==="print")break;S.addEventListener("change",A=>{h.setValue(w,{value:A.target.checked?A.target.getAttribute("xfaOn"):A.target.getAttribute("xfaOff")})})}else{if(d.value!==null&&S.setAttribute("value",d.value),u==="print")break;S.addEventListener("input",A=>{h.setValue(w,{value:A.target.value})})}break;case"select":if(d.value!==null){S.setAttribute("value",d.value);for(const A of R.children)A.attributes.value===d.value?A.attributes.selected=!0:A.attributes.hasOwnProperty("selected")&&delete A.attributes.selected}S.addEventListener("input",A=>{const _=A.target.options,p=_.selectedIndex===-1?"":_[_.selectedIndex].value;h.setValue(w,{value:p})});break}}static setAttributes({html:S,element:w,storage:R=null,intent:h,linkService:u}){const{attributes:d}=w,A=S instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${h}`);for(const[_,p]of Object.entries(d))if(p!=null)switch(_){case"class":p.length&&S.setAttribute(_,p.join(" "));break;case"dataId":break;case"id":S.setAttribute("data-element-id",p);break;case"style":Object.assign(S.style,p);break;case"textContent":S.textContent=p;break;default:(!A||_!=="href"&&_!=="newWindow")&&S.setAttribute(_,p)}A&&u.addLinkAttributes(S,d.href,d.newWindow),R&&d.dataId&&this.setupStorage(S,d.dataId,w,R)}static render(S){const w=S.annotationStorage,R=S.linkService,h=S.xfaHtml,u=S.intent||"display",d=document.createElement(h.name);h.attributes&&this.setAttributes({html:d,element:h,intent:u,linkService:R});const A=[[h,-1,d]],_=S.div;if(_.append(d),S.viewport){const b=`matrix(${S.viewport.transform.join(",")})`;_.style.transform=b}u!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");const p=[];for(;A.length>0;){const[b,E,y]=A.at(-1);if(E+1===b.children.length){A.pop();continue}const P=b.children[++A.at(-1)[1]];if(P===null)continue;const{name:B}=P;if(B==="#text"){const C=document.createTextNode(P.value);p.push(C),y.append(C);continue}const U=P?.attributes?.xmlns?document.createElementNS(P.attributes.xmlns,B):document.createElement(B);if(y.append(U),P.attributes&&this.setAttributes({html:U,element:P,storage:w,intent:u,linkService:R}),P.children&&P.children.length>0)A.push([P,-1,U]);else if(P.value){const C=document.createTextNode(P.value);s.XfaText.shouldBuildText(B)&&p.push(C),U.append(C)}}for(const b of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:p}}static update(S){const w=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=w,S.div.hidden=!1}}a.XfaLayer=l},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InkEditor=void 0;var s=r(1),l=r(4),m=r(29),S=r(6),w=r(5);class R extends l.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#a=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#i=new Path2D;#l=!1;#c=!1;#s=!1;#f=null;#h=0;#d=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(u){super({...u,name:"inkEditor"}),this.color=u.color||null,this.thickness=u.thickness||null,this.opacity=u.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(u){l.AnnotationEditor.initialize(u,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(u,d){switch(u){case s.AnnotationEditorParamsType.INK_THICKNESS:R._defaultThickness=d;break;case s.AnnotationEditorParamsType.INK_COLOR:R._defaultColor=d;break;case s.AnnotationEditorParamsType.INK_OPACITY:R._defaultOpacity=d/100;break}}updateParams(u,d){switch(u){case s.AnnotationEditorParamsType.INK_THICKNESS:this.#_(d);break;case s.AnnotationEditorParamsType.INK_COLOR:this.#g(d);break;case s.AnnotationEditorParamsType.INK_OPACITY:this.#m(d);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,R._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,R._defaultColor||l.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(R._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||R._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||R._defaultColor||l.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??R._defaultOpacity))]]}#_(u){const d=this.thickness;this.addCommands({cmd:()=>{this.thickness=u,this.#C()},undo:()=>{this.thickness=d,this.#C()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(u){const d=this.color;this.addCommands({cmd:()=>{this.color=u,this.#b()},undo:()=>{this.color=d,this.#b()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(u){u/=100;const d=this.opacity;this.addCommands({cmd:()=>{this.opacity=u,this.#b()},undo:()=>{this.opacity=d,this.#b()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#M(),this.#P()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#C()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(u){!this.parent&&u?this._uiManager.removeShouldRescale(this):this.parent&&u===null&&this._uiManager.addShouldRescale(this),super.setParent(u)}onScaleChanging(){const[u,d]=this.parentDimensions,A=this.width*u,_=this.height*d;this.setDimensions(A,_)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:u,parentDimensions:[d,A]}=this;switch(u){case 90:return[0,A,A,d];case 180:return[d,A,d,A];case 270:return[d,0,A,d];default:return[0,0,d,A]}}#y(){const{ctx:u,color:d,opacity:A,thickness:_,parentScale:p,scaleFactor:b}=this;u.lineWidth=_*p/b,u.lineCap="round",u.lineJoin="round",u.miterLimit=10,u.strokeStyle=`${d}${(0,w.opacityToHex)(A)}`}#E(u,d){this.canvas.addEventListener("contextmenu",S.noContextMenu),this.canvas.addEventListener("pointerleave",this.#a),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#v(),this.thickness||=R._defaultThickness,this.color||=R._defaultColor||l.AnnotationEditor._defaultLineColor,this.opacity??=R._defaultOpacity),this.currentPath.push([u,d]),this.#c=!1,this.#y(),this.#p=()=>{this.#k(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(u,d){const[A,_]=this.currentPath.at(-1);if(this.currentPath.length>1&&u===A&&d===_)return;const p=this.currentPath;let b=this.#i;if(p.push([u,d]),this.#c=!0,p.length<=2){b.moveTo(...p[0]),b.lineTo(u,d);return}p.length===3&&(this.#i=b=new Path2D,b.moveTo(...p[0])),this.#L(b,...p.at(-3),...p.at(-2),u,d)}#R(){if(this.currentPath.length===0)return;const u=this.currentPath.at(-1);this.#i.lineTo(...u)}#T(u,d){this.#p=null,u=Math.min(Math.max(u,0),this.canvas.width),d=Math.min(Math.max(d,0),this.canvas.height),this.#S(u,d),this.#R();let A;if(this.currentPath.length!==1)A=this.#N();else{const y=[u,d];A=[[y,y.slice(),y.slice(),y]]}const _=this.#i,p=this.currentPath;this.currentPath=[],this.#i=new Path2D;const b=()=>{this.allRawPaths.push(p),this.paths.push(A),this.bezierPath2D.push(_),this.rebuild()},E=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#M(),this.#P()),this.#C())};this.addCommands({cmd:b,undo:E,mustExec:!0})}#k(){if(!this.#c)return;this.#c=!1;const u=Math.ceil(this.thickness*this.parentScale),d=this.currentPath.slice(-3),A=d.map(b=>b[0]),_=d.map(b=>b[1]);Math.min(...A)-u,Math.max(...A)+u,Math.min(..._)-u,Math.max(..._)+u;const{ctx:p}=this;p.save(),p.clearRect(0,0,this.canvas.width,this.canvas.height);for(const b of this.bezierPath2D)p.stroke(b);p.stroke(this.#i),p.restore()}#L(u,d,A,_,p,b,E){const y=(d+_)/2,P=(A+p)/2,B=(_+b)/2,U=(p+E)/2;u.bezierCurveTo(y+2*(_-y)/3,P+2*(p-P)/3,B+2*(_-B)/3,U+2*(p-U)/3,B,U)}#N(){const u=this.currentPath;if(u.length<=2)return[[u[0],u[0],u.at(-1),u.at(-1)]];const d=[];let A,[_,p]=u[0];for(A=1;A<u.length-2;A++){const[C,k]=u[A],[$,Y]=u[A+1],X=(C+$)/2,J=(k+Y)/2,tt=[_+2*(C-_)/3,p+2*(k-p)/3],_t=[X+2*(C-X)/3,J+2*(k-J)/3];d.push([[_,p],tt,_t,[X,J]]),[_,p]=[X,J]}const[b,E]=u[A],[y,P]=u[A+1],B=[_+2*(b-_)/3,p+2*(E-p)/3],U=[y+2*(b-y)/3,P+2*(E-P)/3];return d.push([[_,p],B,U,[y,P]]),d}#b(){if(this.isEmpty()){this.#x();return}this.#y();const{canvas:u,ctx:d}=this;d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,u.width,u.height),this.#x();for(const A of this.bezierPath2D)d.stroke(A)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#C(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(u){this._focusEventsAllowed&&(super.focusin(u),this.enableEditMode())}canvasPointerdown(u){u.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),u.preventDefault(),u.type!=="mouse"&&this.div.focus(),this.#E(u.offsetX,u.offsetY))}canvasPointermove(u){u.preventDefault(),this.#S(u.offsetX,u.offsetY)}canvasPointerup(u){u.preventDefault(),this.#F(u)}canvasPointerleave(u){this.#F(u)}#F(u){this.canvas.removeEventListener("pointerleave",this.#a),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",S.noContextMenu)},10),this.#T(u.offsetX,u.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#M(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",l.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(u=>this.canvas?.setAttribute("aria-label",u)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#P(){this.#f=new ResizeObserver(u=>{const d=u[0].contentRect;d.width&&d.height&&this.setDimensions(d.width,d.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let u,d;this.width&&(u=this.x,d=this.y),super.render(),l.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(E=>this.div?.setAttribute("aria-label",E));const[A,_,p,b]=this.#u();if(this.setAt(A,_,0,0),this.setDims(p,b),this.#M(),this.width){const[E,y]=this.parentDimensions;this.setAspectRatio(this.width*E,this.height*y),this.setAt(u*E,d*y,this.width*E,this.height*y),this.#s=!0,this.#v(),this.setDims(this.width*E,this.height*y),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#P(),this.div}#v(){if(!this.#s)return;const[u,d]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*u),this.canvas.height=Math.ceil(this.height*d),this.#x()}setDimensions(u,d){const A=Math.round(u),_=Math.round(d);if(this.#h===A&&this.#d===_)return;this.#h=A,this.#d=_,this.canvas.style.visibility="hidden";const[p,b]=this.parentDimensions;this.width=u/p,this.height=d/b,this.fixAndSetPosition(),this.#l&&this.#w(u,d),this.#v(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#w(u,d){const A=this.#D(),_=(u-A)/this.#e,p=(d-A)/this.#t;this.scaleFactor=Math.min(_,p)}#x(){const u=this.#D()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+u,this.translationY*this.scaleFactor+u)}static#I(u){const d=new Path2D;for(let A=0,_=u.length;A<_;A++){const[p,b,E,y]=u[A];A===0&&d.moveTo(...p),d.bezierCurveTo(b[0],b[1],E[0],E[1],y[0],y[1])}return d}static#U(u,d,A){const[_,p,b,E]=d;switch(A){case 0:for(let y=0,P=u.length;y<P;y+=2)u[y]+=_,u[y+1]=E-u[y+1];break;case 90:for(let y=0,P=u.length;y<P;y+=2){const B=u[y];u[y]=u[y+1]+_,u[y+1]=B+p}break;case 180:for(let y=0,P=u.length;y<P;y+=2)u[y]=b-u[y],u[y+1]+=p;break;case 270:for(let y=0,P=u.length;y<P;y+=2){const B=u[y];u[y]=b-u[y+1],u[y+1]=E-B}break;default:throw new Error("Invalid rotation")}return u}static#B(u,d,A){const[_,p,b,E]=d;switch(A){case 0:for(let y=0,P=u.length;y<P;y+=2)u[y]-=_,u[y+1]=E-u[y+1];break;case 90:for(let y=0,P=u.length;y<P;y+=2){const B=u[y];u[y]=u[y+1]-p,u[y+1]=B-_}break;case 180:for(let y=0,P=u.length;y<P;y+=2)u[y]=b-u[y],u[y+1]-=p;break;case 270:for(let y=0,P=u.length;y<P;y+=2){const B=u[y];u[y]=E-u[y+1],u[y+1]=b-B}break;default:throw new Error("Invalid rotation")}return u}#j(u,d,A,_){const p=[],b=this.thickness/2,E=u*d+b,y=u*A+b;for(const P of this.paths){const B=[],U=[];for(let C=0,k=P.length;C<k;C++){const[$,Y,X,J]=P[C],tt=u*$[0]+E,_t=u*$[1]+y,mt=u*Y[0]+E,yt=u*Y[1]+y,At=u*X[0]+E,V=u*X[1]+y,H=u*J[0]+E,O=u*J[1]+y;C===0&&(B.push(tt,_t),U.push(tt,_t)),B.push(mt,yt,At,V,H,O),U.push(mt,yt),C===k-1&&U.push(H,O)}p.push({bezier:R.#U(B,_,this.rotation),points:R.#U(U,_,this.rotation)})}return p}#O(){let u=1/0,d=-1/0,A=1/0,_=-1/0;for(const p of this.paths)for(const[b,E,y,P]of p){const B=s.Util.bezierBoundingBox(...b,...E,...y,...P);u=Math.min(u,B[0]),A=Math.min(A,B[1]),d=Math.max(d,B[2]),_=Math.max(_,B[3])}return[u,A,d,_]}#D(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#C(u=!1){if(this.isEmpty())return;if(!this.#l){this.#b();return}const d=this.#O(),A=this.#D();this.#e=Math.max(l.AnnotationEditor.MIN_SIZE,d[2]-d[0]),this.#t=Math.max(l.AnnotationEditor.MIN_SIZE,d[3]-d[1]);const _=Math.ceil(A+this.#e*this.scaleFactor),p=Math.ceil(A+this.#t*this.scaleFactor),[b,E]=this.parentDimensions;this.width=_/b,this.height=p/E,this.setAspectRatio(_,p);const y=this.translationX,P=this.translationY;this.translationX=-d[0],this.translationY=-d[1],this.#v(),this.#b(),this.#h=_,this.#d=p,this.setDims(_,p);const B=u?A/this.scaleFactor/2:0;this.translate(y-this.translationX-B,P-this.translationY-B)}static deserialize(u,d,A){if(u instanceof m.InkAnnotationElement)return null;const _=super.deserialize(u,d,A);_.thickness=u.thickness,_.color=s.Util.makeHexColor(...u.color),_.opacity=u.opacity;const[p,b]=_.pageDimensions,E=_.width*p,y=_.height*b,P=_.parentScale,B=u.thickness/2;_.#l=!0,_.#h=Math.round(E),_.#d=Math.round(y);const{paths:U,rect:C,rotation:k}=u;for(let{bezier:Y}of U){Y=R.#B(Y,C,k);const X=[];_.paths.push(X);let J=P*(Y[0]-B),tt=P*(Y[1]-B);for(let mt=2,yt=Y.length;mt<yt;mt+=6){const At=P*(Y[mt]-B),V=P*(Y[mt+1]-B),H=P*(Y[mt+2]-B),O=P*(Y[mt+3]-B),x=P*(Y[mt+4]-B),g=P*(Y[mt+5]-B);X.push([[J,tt],[At,V],[H,O],[x,g]]),J=x,tt=g}const _t=this.#I(X);_.bezierPath2D.push(_t)}const $=_.#O();return _.#e=Math.max(l.AnnotationEditor.MIN_SIZE,$[2]-$[0]),_.#t=Math.max(l.AnnotationEditor.MIN_SIZE,$[3]-$[1]),_.#w(E,y),_}serialize(){if(this.isEmpty())return null;const u=this.getRect(0,0),d=l.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:d,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,u),pageIndex:this.pageIndex,rect:u,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}a.InkEditor=R},(o,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampEditor=void 0;var s=r(1),l=r(4),m=r(6),S=r(29);class w extends l.AnnotationEditor{#t=null;#e=null;#n=null;#a=null;#o=null;#r=null;#i=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(h){super({...h,name:"stampEditor"}),this.#a=h.bitmapUrl,this.#o=h.bitmapFile}static initialize(h){l.AnnotationEditor.initialize(h)}static get supportedTypes(){const h=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",h.map(u=>`image/${u}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(h){return this.supportedTypes.includes(h)}static paste(h,u){u.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:h.getAsFile()})}#f(h,u=!1){if(!h){this.remove();return}this.#t=h.bitmap,u||(this.#e=h.id,this.#c=h.isSvg),this.#p()}#h(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#d(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(u=>this.#f(u,!0)).finally(()=>this.#h());return}if(this.#a){const u=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(u).then(d=>this.#f(d)).finally(()=>this.#h());return}if(this.#o){const u=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(u).then(d=>this.#f(d)).finally(()=>this.#h());return}const h=document.createElement("input");h.type="file",h.accept=w.supportedTypesStr,this.#n=new Promise(u=>{h.addEventListener("change",async()=>{if(!h.files||h.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(h.files[0]);this.#f(d)}u()}),h.addEventListener("cancel",()=>{this.remove(),u()})}).finally(()=>this.#h()),h.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#i?.disconnect(),this.#i=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#d();return}super.rebuild(),this.div!==null&&(this.#e&&this.#d(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#a||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let h,u;if(this.width&&(h=this.x,u=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#d(),this.width){const[d,A]=this.parentDimensions;this.setAt(h*d,u*A,this.width*d,this.height*A)}return this.div}#p(){const{div:h}=this;let{width:u,height:d}=this.#t;const[A,_]=this.pageDimensions,p=.75;if(this.width)u=this.width*A,d=this.height*_;else if(u>p*A||d>p*_){const P=Math.min(p*A/u,p*_/d);u*=P,d*=P}const[b,E]=this.parentDimensions;this.setDims(u*b/A,d*E/_),this._uiManager.enableWaiting(!1);const y=this.#r=document.createElement("canvas");h.append(y),h.hidden=!1,this.#m(u,d),this.#y(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#_(h,u){const[d,A]=this.parentDimensions;this.width=h/d,this.height=u/A,this.setDims(h,u),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const _=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(h,u)},_)}#g(h,u){const{width:d,height:A}=this.#t;let _=d,p=A,b=this.#t;for(;_>2*h||p>2*u;){const E=_,y=p;_>2*h&&(_=_>=16384?Math.floor(_/2)-1:Math.ceil(_/2)),p>2*u&&(p=p>=16384?Math.floor(p/2)-1:Math.ceil(p/2));const P=new OffscreenCanvas(_,p);P.getContext("2d").drawImage(b,0,0,E,y,0,0,_,p),b=P.transferToImageBitmap()}return b}#m(h,u){h=Math.ceil(h),u=Math.ceil(u);const d=this.#r;if(!d||d.width===h&&d.height===u)return;d.width=h,d.height=u;const A=this.#c?this.#t:this.#g(h,u),_=d.getContext("2d");_.filter=this._uiManager.hcmFilter,_.drawImage(A,0,0,A.width,A.height,0,0,h,u)}#u(h){if(h){if(this.#c){const A=this._uiManager.imageManager.getSvgUrl(this.#e);if(A)return A}const u=document.createElement("canvas");return{width:u.width,height:u.height}=this.#t,u.getContext("2d").drawImage(this.#t,0,0),u.toDataURL()}if(this.#c){const[u,d]=this.pageDimensions,A=Math.round(this.width*u*m.PixelsPerInch.PDF_TO_CSS_UNITS),_=Math.round(this.height*d*m.PixelsPerInch.PDF_TO_CSS_UNITS),p=new OffscreenCanvas(A,_);return p.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,A,_),p.transferToImageBitmap()}return structuredClone(this.#t)}#y(){this.#i=new ResizeObserver(h=>{const u=h[0].contentRect;u.width&&u.height&&this.#_(u.width,u.height)}),this.#i.observe(this.div)}static deserialize(h,u,d){if(h instanceof S.StampAnnotationElement)return null;const A=super.deserialize(h,u,d),{rect:_,bitmapUrl:p,bitmapId:b,isSvg:E,accessibilityData:y}=h;b&&d.imageManager.isValidId(b)?A.#e=b:A.#a=p,A.#c=E;const[P,B]=A.pageDimensions;return A.width=(_[2]-_[0])/P,A.height=(_[3]-_[1])/B,y&&(A.altTextData=y),A}serialize(h=!1,u=null){if(this.isEmpty())return null;const d={annotationType:s.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(h)return d.bitmapUrl=this.#u(!0),d.accessibilityData=this.altTextData,d;const{decorative:A,altText:_}=this.altTextData;if(!A&&_&&(d.accessibilityData={type:"Figure",alt:_}),u===null)return d;u.stamps||=new Map;const p=this.#c?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!u.stamps.has(this.#e))u.stamps.set(this.#e,{area:p,serialized:d}),d.bitmap=this.#u(!1);else if(this.#c){const b=u.stamps.get(this.#e);p>b.area&&(b.area=p,b.serialized.bitmap.close(),b.serialized.bitmap=this.#u(!1))}return d}}a.StampEditor=w}],__webpack_module_cache__={};function __w_pdfjs_require__(o){var a=__webpack_module_cache__[o];if(a!==void 0)return a.exports;var r=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AbortException",{enumerable:!0,get:function(){return a.AbortException}}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return m.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return a.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return a.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return S.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return w.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(o,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(o,"FeatureTest",{enumerable:!0,get:function(){return a.FeatureTest}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(o,"ImageKind",{enumerable:!0,get:function(){return a.ImageKind}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(o,"PromiseCapability",{enumerable:!0,get:function(){return a.PromiseCapability}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(o,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(o,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(o,"normalizeUnicode",{enumerable:!0,get:function(){return a.normalizeUnicode}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(o,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(o,"updateTextLayer",{enumerable:!0,get:function(){return l.updateTextLayer}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return r.version}});var a=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),l=__w_pdfjs_require__(26),m=__w_pdfjs_require__(27),S=__w_pdfjs_require__(5),w=__w_pdfjs_require__(29),R=__w_pdfjs_require__(14),h=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const client=new OpenAI({apiKey:"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",dangerouslyAllowBrowser:!0});function Analyze(){const[o,a]=reactExports.useState(null),[r,s]=reactExports.useState(""),[l,m]=reactExports.useState(!1),[S,w]=reactExports.useState(null),[R,h]=reactExports.useState(!1),u=b=>{b&&(b.type==="application/pdf"||b.name.endsWith(".pdf"))?a(b):alert("Please upload a PDF file only.")},d=b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?h(!0):b.type==="dragleave"&&h(!1)},A=b=>{b.preventDefault(),b.stopPropagation(),h(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&u(b.dataTransfer.files[0])},_=async()=>{if(!o||!r.trim()){alert("Please upload your resume and enter a job description.");return}m(!0);function b(P,B){return`You are an expert resume analyst and career coach. Please analyze the following resume against the provided job description and return your analysis in the exact JSON format specified below.

**RESUME CONTENT:**
${P}

**TARGET JOB DESCRIPTION:**
${B}

**ANALYSIS REQUIREMENTS:**
Please provide a comprehensive analysis and return ONLY a valid JSON object with the following structure (no additional text, explanations, or formatting):

{
  "score": [number between 0-100],
  "strengths": [
    "strength 1",
    "strength 2",
    "strength 3"
  ],
  "improvements": [
    "improvement suggestion 1",
    "improvement suggestion 2",
    "improvement suggestion 3"
  ],
  "keywords": [
    "keyword1",
    "keyword2",
    "keyword3",
    "keyword4",
    "keyword5"
  ],
  "detailedFeedback": {
    "technicalSkills": "Brief assessment of technical skills alignment",
    "experience": "Brief assessment of experience relevance",
    "formatting": "Brief assessment of resume formatting and structure",
    "achievements": "Brief assessment of quantifiable achievements"
  },
  "missingKeywords": [
    "missing keyword 1",
    "missing keyword 2",
    "missing keyword 3"
  ],
  "atsOptimization": "Brief suggestion for ATS optimization"
}

**SCORING CRITERIA:**
- Technical skills match: 30%
- Experience relevance: 25%  
- Keywords presence: 20%
- Achievements/quantifiable results: 15%
- ATS-friendly formatting: 10%

Ensure the JSON is valid and parseable. Focus on actionable, specific feedback. If the resume content text is Arabic respond in Arabic, if not then in English. Do not add the JSON stylizer.`}async function E(P){const B=await P.arrayBuffer(),U=await pdfExports.getDocument(B).promise;let C="";for(let k=1;k<=U.numPages;k++){const X=(await(await U.getPage(k)).getTextContent()).items.map(J=>J.str).join(" ");C+=X+" "}return C}(async(P,B)=>{try{const U=await E(P),C=b(U,B),k=await client.responses.create({model:"gpt-4o-mini",input:C});return JSON.parse(k.output_text)}catch(U){return console.error("Analysis failed:",U),null}})(o,r).then(P=>{w(P),m(!1)}).catch(P=>console.log(P))},p=()=>{a(null),s(""),w(null),m(!1)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen px-6 py-10",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Resume Analyzer 📊"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 max-w-2xl mx-auto text-lg",children:"Upload your resume and paste the job description you're targeting. Our AI will analyze your resume and provide personalized feedback."})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[S?jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your Resume Score"}),jsxRuntimeExports.jsxs("div",{className:"text-6xl font-bold text-green-600 mb-2",children:[S.score,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Match with target job"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:"✅ Strengths"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:S.strengths.map((b,E)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500 mr-2",children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:b})]},E))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:"🔧 Areas for Improvement"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:S.improvements.map((b,E)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"text-orange-500 mr-2",children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:b})]},E))})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"🔑 Key Skills Found"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:S.keywords.map((b,E)=>jsxRuntimeExports.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:b},E))})]})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Upload Your Resume"}),jsxRuntimeExports.jsx("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition ${R?"border-green-500 bg-green-50":o?"border-green-300 bg-green-50":"border-gray-300 hover:border-green-400"}`,onDragEnter:d,onDragLeave:d,onDragOver:d,onDrop:A,children:o?jsxRuntimeExports.jsxs("div",{className:"text-green-600",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:"📄"}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:o.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(o.size/1024/1024).toFixed(2)," MB"]}),jsxRuntimeExports.jsx("button",{onClick:()=>a(null),className:"mt-2 text-red-500 hover:text-red-600 text-sm",children:"Remove file"})]}):jsxRuntimeExports.jsxs("div",{className:"text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:"📁"}),jsxRuntimeExports.jsx("p",{className:"mb-2",children:"Drag & drop your resume here"}),jsxRuntimeExports.jsx("p",{className:"text-sm mb-4",children:"or"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",onChange:b=>u(b.target.files[0]),className:"hidden",id:"resume-upload"}),jsxRuntimeExports.jsx("label",{htmlFor:"resume-upload",className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-full cursor-pointer transition",children:"Browse Files"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"PDF files only"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/80 border border-transparent rounded-2xl shadow-xl p-8 backdrop-blur-md relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 via-transparent to-white opacity-40 pointer-events-none"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Target Job Description"}),jsxRuntimeExports.jsx("textarea",{value:r,onChange:b=>s(b.target.value),placeholder:"Paste the job description you're applying for here...",className:"w-full h-64 p-4 border border-gray-300 rounded-xl resize-none focus:border-green-500 focus:outline-none transition"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[r.length," characters"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-12",children:S?jsxRuntimeExports.jsxs("div",{className:"space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:p,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-8 rounded-full text-lg transition",children:"Analyze Another Resume"}),jsxRuntimeExports.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-8 rounded-full text-lg transition",onClick:()=>alert("Resume Builder coming soon!"),children:"Use Resume Builder"})]}):jsxRuntimeExports.jsx("button",{onClick:_,disabled:!o||!r.trim()||l,className:`${!o||!r.trim()||l?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600"} text-white font-semibold py-3 px-8 rounded-full text-lg transition`,children:l?"Analyzing... ⚡":"Analyze My Resume ⚡"})})]})]})}function Home(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center text-center px-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Welcome to Rehancer!"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-700 max-w-xl mb-8",children:["A 1-day project, that aims to help you achieve the"," ",jsxRuntimeExports.jsx("span",{className:"text-green-600 font-semibold",children:"best"})," resume",jsxRuntimeExports.jsx("br",{}),"that you can submit to any HR department ⚡"]}),jsxRuntimeExports.jsx(Link,{to:"/start",className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-full text-lg transition",children:"Get started"})]})})}function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/rehancer",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/start",element:jsxRuntimeExports.jsx(Start,{})}),jsxRuntimeExports.jsx(Route,{path:"/analyze",element:jsxRuntimeExports.jsx(Analyze,{})}),jsxRuntimeExports.jsx(Route,{path:"/builder"})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
